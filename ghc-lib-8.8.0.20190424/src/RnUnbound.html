<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-

This module contains helper functions for reporting and creating
unbound variables.

-}</span><span>
</span><a name="line-7"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">RnUnbound</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-var">mkUnboundName</span><span>
</span><a name="line-8"></a><span>                 </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#mkUnboundNameRdr"><span class="hs-identifier hs-var">mkUnboundNameRdr</span></a><span>
</span><a name="line-9"></a><span>                 </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">isUnboundName</span><span>
</span><a name="line-10"></a><span>                 </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#reportUnboundName"><span class="hs-identifier hs-var">reportUnboundName</span></a><span>
</span><a name="line-11"></a><span>                 </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#unknownNameSuggestions"><span class="hs-identifier hs-var">unknownNameSuggestions</span></a><span>
</span><a name="line-12"></a><span>                 </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-13"></a><span>                 </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#unboundName"><span class="hs-identifier hs-var">unboundName</span></a><span>
</span><a name="line-14"></a><span>                 </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#unboundNameX"><span class="hs-identifier hs-var">unboundNameX</span></a><span>
</span><a name="line-15"></a><span>                 </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#notInScopeErr"><span class="hs-identifier hs-var">notInScopeErr</span></a><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GhcPrelude</span><span>
</span><a name="line-18"></a><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">RdrName</span><span>
</span><a name="line-20"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">HscTypes</span><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><a href="TcRnMonad.html"><span class="hs-identifier">TcRnMonad</span></a><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Name</span><span>
</span><a name="line-23"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Module</span><span>
</span><a name="line-24"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">SrcLoc</span><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Outputable</span><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">PrelNames</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-var">mkUnboundName</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">isUnboundName</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">getUnique</span><span class="hs-special">)</span><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Util</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Maybes</span><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">DynFlags</span><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">FastString</span><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.List</span><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Function</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-var">on</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">UniqDFM</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">udfmToList</span><span class="hs-special">)</span><span>
</span><a name="line-34"></a><span>
</span><a name="line-35"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
               What to do when a lookup fails
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-42"></a><span>
</span><a name="line-43"></a><span class="hs-keyword">data</span><span> </span><a name="WhereLooking"><a href="RnUnbound.html#WhereLooking"><span class="hs-identifier">WhereLooking</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="WL_Any"><a href="RnUnbound.html#WL_Any"><span class="hs-identifier">WL_Any</span></a></a><span>        </span><span class="hs-comment">-- Any binding</span><span>
</span><a name="line-44"></a><span>                  </span><span class="hs-glyph">|</span><span> </span><a name="WL_Global"><a href="RnUnbound.html#WL_Global"><span class="hs-identifier">WL_Global</span></a></a><span>     </span><span class="hs-comment">-- Any top-level binding (local or imported)</span><span>
</span><a name="line-45"></a><span>                  </span><span class="hs-glyph">|</span><span> </span><a name="WL_LocalTop"><a href="RnUnbound.html#WL_LocalTop"><span class="hs-identifier">WL_LocalTop</span></a></a><span>   </span><span class="hs-comment">-- Any top-level binding in this module</span><span>
</span><a name="line-46"></a><span>                  </span><span class="hs-glyph">|</span><span> </span><a name="WL_LocalOnly"><a href="RnUnbound.html#WL_LocalOnly"><span class="hs-identifier">WL_LocalOnly</span></a></a><span>
</span><a name="line-47"></a><span>                        </span><span class="hs-comment">-- Only local bindings</span><span>
</span><a name="line-48"></a><span>                        </span><span class="hs-comment">-- (pattern synonyms declaractions,</span><span>
</span><a name="line-49"></a><span>                        </span><span class="hs-comment">-- see Note [Renaming pattern synonym variables])</span><span>
</span><a name="line-50"></a><span>
</span><a name="line-51"></a><span class="hs-identifier">mkUnboundNameRdr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Name</span><span>
</span><a name="line-52"></a><a name="mkUnboundNameRdr"><a href="RnUnbound.html#mkUnboundNameRdr"><span class="hs-identifier">mkUnboundNameRdr</span></a></a><span> </span><a name="local-6989586621681420398"><a href="#local-6989586621681420398"><span class="hs-identifier">rdr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mkUnboundName</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">rdrNameOcc</span><span> </span><a href="#local-6989586621681420398"><span class="hs-identifier hs-var">rdr</span></a><span class="hs-special">)</span><span>
</span><a name="line-53"></a><span>
</span><a name="line-54"></a><span class="hs-identifier">reportUnboundName</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RnM</span><span> </span><span class="hs-identifier hs-type">Name</span><span>
</span><a name="line-55"></a><a name="reportUnboundName"><a href="RnUnbound.html#reportUnboundName"><span class="hs-identifier">reportUnboundName</span></a></a><span> </span><a name="local-6989586621681420399"><a href="#local-6989586621681420399"><span class="hs-identifier">rdr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="RnUnbound.html#unboundName"><span class="hs-identifier hs-var">unboundName</span></a><span> </span><a href="RnUnbound.html#WL_Any"><span class="hs-identifier hs-var">WL_Any</span></a><span> </span><a href="#local-6989586621681420399"><span class="hs-identifier hs-var">rdr</span></a><span>
</span><a name="line-56"></a><span>
</span><a name="line-57"></a><span class="hs-identifier">unboundName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="RnUnbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RnM</span><span> </span><span class="hs-identifier hs-type">Name</span><span>
</span><a name="line-58"></a><a name="unboundName"><a href="RnUnbound.html#unboundName"><span class="hs-identifier">unboundName</span></a></a><span> </span><a name="local-6989586621681420400"><a href="#local-6989586621681420400"><span class="hs-identifier">wl</span></a></a><span> </span><a name="local-6989586621681420401"><a href="#local-6989586621681420401"><span class="hs-identifier">rdr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="RnUnbound.html#unboundNameX"><span class="hs-identifier hs-var">unboundNameX</span></a><span> </span><a href="#local-6989586621681420400"><span class="hs-identifier hs-var">wl</span></a><span> </span><a href="#local-6989586621681420401"><span class="hs-identifier hs-var">rdr</span></a><span> </span><span class="hs-identifier hs-var">Outputable.empty</span><span>
</span><a name="line-59"></a><span>
</span><a name="line-60"></a><span class="hs-identifier">unboundNameX</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="RnUnbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RnM</span><span> </span><span class="hs-identifier hs-type">Name</span><span>
</span><a name="line-61"></a><a name="unboundNameX"><a href="RnUnbound.html#unboundNameX"><span class="hs-identifier">unboundNameX</span></a></a><span> </span><a name="local-6989586621681420402"><a href="#local-6989586621681420402"><span class="hs-identifier">where_look</span></a></a><span> </span><a name="local-6989586621681420403"><a href="#local-6989586621681420403"><span class="hs-identifier">rdr_name</span></a></a><span> </span><a name="local-6989586621681420404"><a href="#local-6989586621681420404"><span class="hs-identifier">extra</span></a></a><span>
</span><a name="line-62"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><a name="local-6989586621681420405"><a href="#local-6989586621681420405"><span class="hs-identifier">dflags</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">getDynFlags</span><span>
</span><a name="line-63"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420406"><a href="#local-6989586621681420406"><span class="hs-identifier">show_helpful_errors</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">gopt</span><span> </span><span class="hs-identifier hs-var">Opt_HelpfulErrors</span><span> </span><a href="#local-6989586621681420405"><span class="hs-identifier hs-var">dflags</span></a><span>
</span><a name="line-64"></a><span>              </span><a name="local-6989586621681420407"><a href="#local-6989586621681420407"><span class="hs-identifier">err</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="RnUnbound.html#notInScopeErr"><span class="hs-identifier hs-var">notInScopeErr</span></a><span> </span><a href="#local-6989586621681420403"><span class="hs-identifier hs-var">rdr_name</span></a><span> </span><span class="hs-operator hs-var">$$</span><span> </span><a href="#local-6989586621681420404"><span class="hs-identifier hs-var">extra</span></a><span>
</span><a name="line-65"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><a href="#local-6989586621681420406"><span class="hs-identifier hs-var">show_helpful_errors</span></a><span>
</span><a name="line-66"></a><span>          </span><span class="hs-keyword">then</span><span> </span><a href="TcRnMonad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a><span> </span><a href="#local-6989586621681420407"><span class="hs-identifier hs-var">err</span></a><span>
</span><a name="line-67"></a><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-6989586621681420408"><a href="#local-6989586621681420408"><span class="hs-identifier">local_env</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getLocalRdrEnv"><span class="hs-identifier hs-var">getLocalRdrEnv</span></a><span>
</span><a name="line-68"></a><span>                  </span><span class="hs-special">;</span><span> </span><a name="local-6989586621681420409"><a href="#local-6989586621681420409"><span class="hs-identifier">global_env</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getGlobalRdrEnv"><span class="hs-identifier hs-var">getGlobalRdrEnv</span></a><span>
</span><a name="line-69"></a><span>                  </span><span class="hs-special">;</span><span> </span><a name="local-6989586621681420410"><a href="#local-6989586621681420410"><span class="hs-identifier">impInfo</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getImports"><span class="hs-identifier hs-var">getImports</span></a><span>
</span><a name="line-70"></a><span>                  </span><span class="hs-special">;</span><span> </span><a name="local-6989586621681420411"><a href="#local-6989586621681420411"><span class="hs-identifier">currmod</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">getModule</span><span>
</span><a name="line-71"></a><span>                  </span><span class="hs-special">;</span><span> </span><a name="local-6989586621681420412"><a href="#local-6989586621681420412"><span class="hs-identifier">hpt</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="TcRnMonad.html#getHpt"><span class="hs-identifier hs-var">getHpt</span></a><span>
</span><a name="line-72"></a><span>                  </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420413"><a href="#local-6989586621681420413"><span class="hs-identifier">suggestions</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="RnUnbound.html#unknownNameSuggestions_"><span class="hs-identifier hs-var">unknownNameSuggestions_</span></a><span> </span><a href="#local-6989586621681420402"><span class="hs-identifier hs-var">where_look</span></a><span>
</span><a name="line-73"></a><span>                          </span><a href="#local-6989586621681420405"><span class="hs-identifier hs-var">dflags</span></a><span> </span><a href="#local-6989586621681420412"><span class="hs-identifier hs-var">hpt</span></a><span> </span><a href="#local-6989586621681420411"><span class="hs-identifier hs-var">currmod</span></a><span> </span><a href="#local-6989586621681420409"><span class="hs-identifier hs-var">global_env</span></a><span> </span><a href="#local-6989586621681420408"><span class="hs-identifier hs-var">local_env</span></a><span> </span><a href="#local-6989586621681420410"><span class="hs-identifier hs-var">impInfo</span></a><span>
</span><a name="line-74"></a><span>                          </span><a href="#local-6989586621681420403"><span class="hs-identifier hs-var">rdr_name</span></a><span>
</span><a name="line-75"></a><span>                  </span><span class="hs-special">;</span><span> </span><a href="TcRnMonad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420407"><span class="hs-identifier hs-var">err</span></a><span> </span><span class="hs-operator hs-var">$$</span><span> </span><a href="#local-6989586621681420413"><span class="hs-identifier hs-var">suggestions</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-76"></a><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="RnUnbound.html#mkUnboundNameRdr"><span class="hs-identifier hs-var">mkUnboundNameRdr</span></a><span> </span><a href="#local-6989586621681420403"><span class="hs-identifier hs-var">rdr_name</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-77"></a><span>
</span><a name="line-78"></a><span class="hs-identifier">notInScopeErr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-79"></a><a name="notInScopeErr"><a href="RnUnbound.html#notInScopeErr"><span class="hs-identifier">notInScopeErr</span></a></a><span> </span><a name="local-6989586621681420414"><a href="#local-6989586621681420414"><span class="hs-identifier">rdr_name</span></a></a><span>
</span><a name="line-80"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">hang</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Not in scope:&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-81"></a><span>       </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420415"><span class="hs-identifier hs-var">what</span></a><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420414"><span class="hs-identifier hs-var">rdr_name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-82"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-83"></a><span>    </span><a name="local-6989586621681420415"><a href="#local-6989586621681420415"><span class="hs-identifier">what</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pprNonVarNameSpace</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">occNameSpace</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">rdrNameOcc</span><span> </span><a href="#local-6989586621681420414"><span class="hs-identifier hs-var">rdr_name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-84"></a><span>
</span><a name="line-85"></a><span class="hs-keyword">type</span><span> </span><a name="HowInScope"><a href="RnUnbound.html#HowInScope"><span class="hs-identifier">HowInScope</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SrcSpan</span><span> </span><span class="hs-identifier hs-type">ImpDeclSpec</span><span>
</span><a name="line-86"></a><span>     </span><span class="hs-comment">-- Left loc    =&gt;  locally bound at loc</span><span>
</span><a name="line-87"></a><span>     </span><span class="hs-comment">-- Right ispec =&gt;  imported as specified by ispec</span><span>
</span><a name="line-88"></a><span>
</span><a name="line-89"></a><span>
</span><a name="line-90"></a><span class="hs-comment">-- | Called from the typechecker (TcErrors) when we find an unbound variable</span><span>
</span><a name="line-91"></a><span class="hs-identifier">unknownNameSuggestions</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">DynFlags</span><span>
</span><a name="line-92"></a><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">HomePackageTable</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Module</span><span>
</span><a name="line-93"></a><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">GlobalRdrEnv</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">LocalRdrEnv</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">ImportAvails</span><span>
</span><a name="line-94"></a><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-95"></a><a name="unknownNameSuggestions"><a href="RnUnbound.html#unknownNameSuggestions"><span class="hs-identifier">unknownNameSuggestions</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="RnUnbound.html#unknownNameSuggestions_"><span class="hs-identifier hs-var">unknownNameSuggestions_</span></a><span> </span><a href="RnUnbound.html#WL_Any"><span class="hs-identifier hs-var">WL_Any</span></a><span>
</span><a name="line-96"></a><span>
</span><a name="line-97"></a><span class="hs-identifier">unknownNameSuggestions_</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="RnUnbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">DynFlags</span><span>
</span><a name="line-98"></a><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">HomePackageTable</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Module</span><span>
</span><a name="line-99"></a><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">GlobalRdrEnv</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">LocalRdrEnv</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">ImportAvails</span><span>
</span><a name="line-100"></a><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-101"></a><a name="unknownNameSuggestions_"><a href="RnUnbound.html#unknownNameSuggestions_"><span class="hs-identifier">unknownNameSuggestions_</span></a></a><span> </span><a name="local-6989586621681420416"><a href="#local-6989586621681420416"><span class="hs-identifier">where_look</span></a></a><span> </span><a name="local-6989586621681420417"><a href="#local-6989586621681420417"><span class="hs-identifier">dflags</span></a></a><span> </span><a name="local-6989586621681420418"><a href="#local-6989586621681420418"><span class="hs-identifier">hpt</span></a></a><span> </span><a name="local-6989586621681420419"><a href="#local-6989586621681420419"><span class="hs-identifier">curr_mod</span></a></a><span> </span><a name="local-6989586621681420420"><a href="#local-6989586621681420420"><span class="hs-identifier">global_env</span></a></a><span> </span><a name="local-6989586621681420421"><a href="#local-6989586621681420421"><span class="hs-identifier">local_env</span></a></a><span>
</span><a name="line-102"></a><span>                          </span><a name="local-6989586621681420422"><a href="#local-6989586621681420422"><span class="hs-identifier">imports</span></a></a><span> </span><a name="local-6989586621681420423"><a href="#local-6989586621681420423"><span class="hs-identifier">tried_rdr_name</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-103"></a><span>    </span><a href="RnUnbound.html#similarNameSuggestions"><span class="hs-identifier hs-var">similarNameSuggestions</span></a><span> </span><a href="#local-6989586621681420416"><span class="hs-identifier hs-var">where_look</span></a><span> </span><a href="#local-6989586621681420417"><span class="hs-identifier hs-var">dflags</span></a><span> </span><a href="#local-6989586621681420420"><span class="hs-identifier hs-var">global_env</span></a><span> </span><a href="#local-6989586621681420421"><span class="hs-identifier hs-var">local_env</span></a><span> </span><a href="#local-6989586621681420423"><span class="hs-identifier hs-var">tried_rdr_name</span></a><span> </span><span class="hs-operator hs-var">$$</span><span>
</span><a name="line-104"></a><span>    </span><a href="RnUnbound.html#importSuggestions"><span class="hs-identifier hs-var">importSuggestions</span></a><span> </span><a href="#local-6989586621681420416"><span class="hs-identifier hs-var">where_look</span></a><span> </span><a href="#local-6989586621681420420"><span class="hs-identifier hs-var">global_env</span></a><span> </span><a href="#local-6989586621681420418"><span class="hs-identifier hs-var">hpt</span></a><span>
</span><a name="line-105"></a><span>                      </span><a href="#local-6989586621681420419"><span class="hs-identifier hs-var">curr_mod</span></a><span> </span><a href="#local-6989586621681420422"><span class="hs-identifier hs-var">imports</span></a><span> </span><a href="#local-6989586621681420423"><span class="hs-identifier hs-var">tried_rdr_name</span></a><span> </span><span class="hs-operator hs-var">$$</span><span>
</span><a name="line-106"></a><span>    </span><a href="RnUnbound.html#extensionSuggestions"><span class="hs-identifier hs-var">extensionSuggestions</span></a><span> </span><a href="#local-6989586621681420423"><span class="hs-identifier hs-var">tried_rdr_name</span></a><span>
</span><a name="line-107"></a><span>
</span><a name="line-108"></a><span>
</span><a name="line-109"></a><span class="hs-identifier">similarNameSuggestions</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="RnUnbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">DynFlags</span><span>
</span><a name="line-110"></a><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">GlobalRdrEnv</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">LocalRdrEnv</span><span>
</span><a name="line-111"></a><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-112"></a><a name="similarNameSuggestions"><a href="RnUnbound.html#similarNameSuggestions"><span class="hs-identifier">similarNameSuggestions</span></a></a><span> </span><a name="local-6989586621681420424"><a href="#local-6989586621681420424"><span class="hs-identifier">where_look</span></a></a><span> </span><a name="local-6989586621681420425"><a href="#local-6989586621681420425"><span class="hs-identifier">dflags</span></a></a><span> </span><a name="local-6989586621681420426"><a href="#local-6989586621681420426"><span class="hs-identifier">global_env</span></a></a><span>
</span><a name="line-113"></a><span>                        </span><a name="local-6989586621681420427"><a href="#local-6989586621681420427"><span class="hs-identifier">local_env</span></a></a><span> </span><a name="local-6989586621681420428"><a href="#local-6989586621681420428"><span class="hs-identifier">tried_rdr_name</span></a></a><span>
</span><a name="line-114"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621681420430"><span class="hs-identifier hs-var">suggest</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-115"></a><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Outputable.empty</span><span>
</span><a name="line-116"></a><span>      </span><span class="hs-special">[</span><a name="local-6989586621681420484"><a href="#local-6989586621681420484"><span class="hs-identifier">p</span></a></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621681420431"><span class="hs-identifier hs-var">perhaps</span></a><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><a href="#local-6989586621681420432"><span class="hs-identifier hs-var">pp_item</span></a><span> </span><a href="#local-6989586621681420484"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-117"></a><span>      </span><a name="local-6989586621681420485"><a href="#local-6989586621681420485"><span class="hs-identifier">ps</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">sep</span><span> </span><span class="hs-special">[</span><span> </span><a href="#local-6989586621681420431"><span class="hs-identifier hs-var">perhaps</span></a><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;one of these:&quot;</span><span>
</span><a name="line-118"></a><span>                 </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">nest</span><span> </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pprWithCommas</span><span> </span><a href="#local-6989586621681420432"><span class="hs-identifier hs-var">pp_item</span></a><span> </span><a href="#local-6989586621681420485"><span class="hs-identifier hs-var">ps</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><a name="line-119"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-120"></a><span>    </span><span class="hs-identifier">all_possibilities</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">RdrName</span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#HowInScope"><span class="hs-identifier hs-type">HowInScope</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-121"></a><span>    </span><a name="local-6989586621681420429"><a href="#local-6989586621681420429"><span class="hs-identifier">all_possibilities</span></a></a><span>
</span><a name="line-122"></a><span>       </span><span class="hs-glyph">=</span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">showPpr</span><span> </span><a href="#local-6989586621681420425"><span class="hs-identifier hs-var">dflags</span></a><span> </span><a href="#local-6989586621681420444"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420444"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><a href="#local-6989586621681420445"><span class="hs-identifier hs-var">loc</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-123"></a><span>          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-6989586621681420444"><a href="#local-6989586621681420444"><span class="hs-identifier">r</span></a></a><span class="hs-special">,</span><a name="local-6989586621681420445"><a href="#local-6989586621681420445"><span class="hs-identifier">loc</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420440"><span class="hs-identifier hs-var">local_possibilities</span></a><span> </span><a href="#local-6989586621681420427"><span class="hs-identifier hs-var">local_env</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-124"></a><span>       </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">showPpr</span><span> </span><a href="#local-6989586621681420425"><span class="hs-identifier hs-var">dflags</span></a><span> </span><a href="#local-6989586621681420446"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420447"><span class="hs-identifier hs-var">rp</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-6989586621681420446"><a href="#local-6989586621681420446"><span class="hs-identifier">r</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621681420447"><a href="#local-6989586621681420447"><span class="hs-identifier">rp</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420441"><span class="hs-identifier hs-var">global_possibilities</span></a><span> </span><a href="#local-6989586621681420426"><span class="hs-identifier hs-var">global_env</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-125"></a><span>
</span><a name="line-126"></a><span>    </span><a name="local-6989586621681420430"><a href="#local-6989586621681420430"><span class="hs-identifier">suggest</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fuzzyLookup</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">showPpr</span><span> </span><a href="#local-6989586621681420425"><span class="hs-identifier hs-var">dflags</span></a><span> </span><a href="#local-6989586621681420428"><span class="hs-identifier hs-var">tried_rdr_name</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621681420429"><span class="hs-identifier hs-var">all_possibilities</span></a><span>
</span><a name="line-127"></a><span>    </span><a name="local-6989586621681420431"><a href="#local-6989586621681420431"><span class="hs-identifier">perhaps</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Perhaps you meant&quot;</span><span>
</span><a name="line-128"></a><span>
</span><a name="line-129"></a><span>    </span><span class="hs-identifier">pp_item</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">RdrName</span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#HowInScope"><span class="hs-identifier hs-type">HowInScope</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-130"></a><span>    </span><a name="local-6989586621681420432"><a href="#local-6989586621681420432"><span class="hs-identifier">pp_item</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621681420448"><a href="#local-6989586621681420448"><span class="hs-identifier">rdr</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621681420449"><a href="#local-6989586621681420449"><span class="hs-identifier">loc</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621681420433"><span class="hs-identifier hs-var">pp_ns</span></a><span> </span><a href="#local-6989586621681420448"><span class="hs-identifier hs-var">rdr</span></a><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420448"><span class="hs-identifier hs-var">rdr</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><a href="#local-6989586621681420450"><span class="hs-identifier hs-var">loc'</span></a><span> </span><span class="hs-comment">-- Locally defined</span><span>
</span><a name="line-131"></a><span>        </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621681420450"><a href="#local-6989586621681420450"><span class="hs-identifier">loc'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621681420449"><span class="hs-identifier hs-var">loc</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-132"></a><span>                     </span><span class="hs-identifier hs-var">UnhelpfulSpan</span><span> </span><a name="local-6989586621681420451"><a href="#local-6989586621681420451"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">parens</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420451"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">)</span><span>
</span><a name="line-133"></a><span>                     </span><span class="hs-identifier hs-var">RealSrcSpan</span><span> </span><a name="local-6989586621681420452"><a href="#local-6989586621681420452"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">parens</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;line&quot;</span><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><span class="hs-identifier hs-var">int</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">srcSpanStartLine</span><span> </span><a href="#local-6989586621681420452"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-134"></a><span>    </span><span class="hs-identifier">pp_item</span><span> </span><span class="hs-special">(</span><a name="local-6989586621681420453"><a href="#local-6989586621681420453"><span class="hs-identifier">rdr</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><a name="local-6989586621681420454"><a href="#local-6989586621681420454"><span class="hs-identifier">is</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621681420433"><span class="hs-identifier hs-var">pp_ns</span></a><span> </span><a href="#local-6989586621681420453"><span class="hs-identifier hs-var">rdr</span></a><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420453"><span class="hs-identifier hs-var">rdr</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span>   </span><span class="hs-comment">-- Imported</span><span>
</span><a name="line-135"></a><span>                              </span><span class="hs-identifier hs-var">parens</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;imported from&quot;</span><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><span class="hs-identifier hs-var">ppr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">is_mod</span><span> </span><a href="#local-6989586621681420454"><span class="hs-identifier hs-var">is</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-136"></a><span>
</span><a name="line-137"></a><span>    </span><span class="hs-identifier">pp_ns</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-138"></a><span>    </span><a name="local-6989586621681420433"><a href="#local-6989586621681420433"><span class="hs-identifier">pp_ns</span></a></a><span> </span><a name="local-6989586621681420455"><a href="#local-6989586621681420455"><span class="hs-identifier">rdr</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420456"><span class="hs-identifier hs-var">ns</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><a href="#local-6989586621681420436"><span class="hs-identifier hs-var">tried_ns</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pprNameSpace</span><span> </span><a href="#local-6989586621681420456"><span class="hs-identifier hs-var">ns</span></a><span>
</span><a name="line-139"></a><span>              </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Outputable.empty</span><span>
</span><a name="line-140"></a><span>      </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621681420456"><a href="#local-6989586621681420456"><span class="hs-identifier">ns</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">rdrNameSpace</span><span> </span><a href="#local-6989586621681420455"><span class="hs-identifier hs-var">rdr</span></a><span>
</span><a name="line-141"></a><span>
</span><a name="line-142"></a><span>    </span><a name="local-6989586621681420434"><a href="#local-6989586621681420434"><span class="hs-identifier">tried_occ</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">rdrNameOcc</span><span> </span><a href="#local-6989586621681420428"><span class="hs-identifier hs-var">tried_rdr_name</span></a><span>
</span><a name="line-143"></a><span>    </span><a name="local-6989586621681420435"><a href="#local-6989586621681420435"><span class="hs-identifier">tried_is_sym</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isSymOcc</span><span> </span><a href="#local-6989586621681420434"><span class="hs-identifier hs-var">tried_occ</span></a><span>
</span><a name="line-144"></a><span>    </span><a name="local-6989586621681420436"><a href="#local-6989586621681420436"><span class="hs-identifier">tried_ns</span></a></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">occNameSpace</span><span> </span><a href="#local-6989586621681420434"><span class="hs-identifier hs-var">tried_occ</span></a><span>
</span><a name="line-145"></a><span>    </span><a name="local-6989586621681420437"><a href="#local-6989586621681420437"><span class="hs-identifier">tried_is_qual</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isQual</span><span> </span><a href="#local-6989586621681420428"><span class="hs-identifier hs-var">tried_rdr_name</span></a><span>
</span><a name="line-146"></a><span>
</span><a name="line-147"></a><span>    </span><a name="local-6989586621681420438"><a href="#local-6989586621681420438"><span class="hs-identifier">correct_name_space</span></a></a><span> </span><a name="local-6989586621681420457"><a href="#local-6989586621681420457"><span class="hs-identifier">occ</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-identifier hs-var">nameSpacesRelated</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">occNameSpace</span><span> </span><a href="#local-6989586621681420457"><span class="hs-identifier hs-var">occ</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621681420436"><span class="hs-identifier hs-var">tried_ns</span></a><span>
</span><a name="line-148"></a><span>                           </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">isSymOcc</span><span> </span><a href="#local-6989586621681420457"><span class="hs-identifier hs-var">occ</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="#local-6989586621681420435"><span class="hs-identifier hs-var">tried_is_sym</span></a><span>
</span><a name="line-149"></a><span>        </span><span class="hs-comment">-- Treat operator and non-operators as non-matching</span><span>
</span><a name="line-150"></a><span>        </span><span class="hs-comment">-- This heuristic avoids things like</span><span>
</span><a name="line-151"></a><span>        </span><span class="hs-comment">--      Not in scope 'f'; perhaps you meant '+' (from Prelude)</span><span>
</span><a name="line-152"></a><span>
</span><a name="line-153"></a><span>    </span><a name="local-6989586621681420439"><a href="#local-6989586621681420439"><span class="hs-identifier">local_ok</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621681420424"><span class="hs-identifier hs-var">where_look</span></a><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><a href="RnUnbound.html#WL_Any"><span class="hs-identifier hs-var">WL_Any</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-154"></a><span>                                  </span><span class="hs-special">;</span><span> </span><a href="RnUnbound.html#WL_LocalOnly"><span class="hs-identifier hs-var">WL_LocalOnly</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-155"></a><span>                                  </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-156"></a><span>    </span><span class="hs-identifier">local_possibilities</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">LocalRdrEnv</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">RdrName</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">SrcSpan</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-157"></a><span>    </span><a name="local-6989586621681420440"><a href="#local-6989586621681420440"><span class="hs-identifier">local_possibilities</span></a></a><span> </span><a name="local-6989586621681420458"><a href="#local-6989586621681420458"><span class="hs-identifier">env</span></a></a><span>
</span><a name="line-158"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420437"><span class="hs-identifier hs-var">tried_is_qual</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-159"></a><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><a href="#local-6989586621681420439"><span class="hs-identifier hs-var">local_ok</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-160"></a><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mkRdrUnqual</span><span> </span><a href="#local-6989586621681420460"><span class="hs-identifier hs-var">occ</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">nameSrcSpan</span><span> </span><a href="#local-6989586621681420459"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-161"></a><span>                        </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621681420459"><a href="#local-6989586621681420459"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">localRdrEnvElts</span><span> </span><a href="#local-6989586621681420458"><span class="hs-identifier hs-var">env</span></a><span>
</span><a name="line-162"></a><span>                        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420460"><a href="#local-6989586621681420460"><span class="hs-identifier">occ</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">nameOccName</span><span> </span><a href="#local-6989586621681420459"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-163"></a><span>                        </span><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420438"><span class="hs-identifier hs-var">correct_name_space</span></a><span> </span><a href="#local-6989586621681420460"><span class="hs-identifier hs-var">occ</span></a><span class="hs-special">]</span><span>
</span><a name="line-164"></a><span>
</span><a name="line-165"></a><span>    </span><span class="hs-identifier">global_possibilities</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">GlobalRdrEnv</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">RdrName</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">RdrName</span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#HowInScope"><span class="hs-identifier hs-type">HowInScope</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-166"></a><span>    </span><a name="local-6989586621681420441"><a href="#local-6989586621681420441"><span class="hs-identifier">global_possibilities</span></a></a><span> </span><a name="local-6989586621681420461"><a href="#local-6989586621681420461"><span class="hs-identifier">global_env</span></a></a><span>
</span><a name="line-167"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420437"><span class="hs-identifier hs-var">tried_is_qual</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420467"><span class="hs-identifier hs-var">rdr_qual</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420467"><span class="hs-identifier hs-var">rdr_qual</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420466"><span class="hs-identifier hs-var">how</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-168"></a><span>                        </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621681420462"><a href="#local-6989586621681420462"><span class="hs-identifier">gre</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">globalRdrEnvElts</span><span> </span><a href="#local-6989586621681420461"><span class="hs-identifier hs-var">global_env</span></a><span>
</span><a name="line-169"></a><span>                        </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#isGreOk"><span class="hs-identifier hs-var">isGreOk</span></a><span> </span><a href="#local-6989586621681420424"><span class="hs-identifier hs-var">where_look</span></a><span> </span><a href="#local-6989586621681420462"><span class="hs-identifier hs-var">gre</span></a><span>
</span><a name="line-170"></a><span>                        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420463"><a href="#local-6989586621681420463"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">gre_name</span><span> </span><a href="#local-6989586621681420462"><span class="hs-identifier hs-var">gre</span></a><span>
</span><a name="line-171"></a><span>                              </span><a name="local-6989586621681420464"><a href="#local-6989586621681420464"><span class="hs-identifier">occ</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">nameOccName</span><span> </span><a href="#local-6989586621681420463"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-172"></a><span>                        </span><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420438"><span class="hs-identifier hs-var">correct_name_space</span></a><span> </span><a href="#local-6989586621681420464"><span class="hs-identifier hs-var">occ</span></a><span>
</span><a name="line-173"></a><span>                        </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a name="local-6989586621681420465"><a href="#local-6989586621681420465"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621681420466"><a href="#local-6989586621681420466"><span class="hs-identifier">how</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="RnUnbound.html#qualsInScope"><span class="hs-identifier hs-var">qualsInScope</span></a><span> </span><a href="#local-6989586621681420462"><span class="hs-identifier hs-var">gre</span></a><span>
</span><a name="line-174"></a><span>                        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420467"><a href="#local-6989586621681420467"><span class="hs-identifier">rdr_qual</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mkRdrQual</span><span> </span><a href="#local-6989586621681420465"><span class="hs-identifier hs-var">mod</span></a><span> </span><a href="#local-6989586621681420464"><span class="hs-identifier hs-var">occ</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-175"></a><span>
</span><a name="line-176"></a><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420471"><span class="hs-identifier hs-var">rdr_unqual</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420474"><span class="hs-identifier hs-var">pair</span></a><span class="hs-special">)</span><span>
</span><a name="line-177"></a><span>                    </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621681420468"><a href="#local-6989586621681420468"><span class="hs-identifier">gre</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">globalRdrEnvElts</span><span> </span><a href="#local-6989586621681420461"><span class="hs-identifier hs-var">global_env</span></a><span>
</span><a name="line-178"></a><span>                    </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#isGreOk"><span class="hs-identifier hs-var">isGreOk</span></a><span> </span><a href="#local-6989586621681420424"><span class="hs-identifier hs-var">where_look</span></a><span> </span><a href="#local-6989586621681420468"><span class="hs-identifier hs-var">gre</span></a><span>
</span><a name="line-179"></a><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420469"><a href="#local-6989586621681420469"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">gre_name</span><span> </span><a href="#local-6989586621681420468"><span class="hs-identifier hs-var">gre</span></a><span>
</span><a name="line-180"></a><span>                          </span><a name="local-6989586621681420470"><a href="#local-6989586621681420470"><span class="hs-identifier">occ</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">nameOccName</span><span> </span><a href="#local-6989586621681420469"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-181"></a><span>                          </span><a name="local-6989586621681420471"><a href="#local-6989586621681420471"><span class="hs-identifier">rdr_unqual</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mkRdrUnqual</span><span> </span><a href="#local-6989586621681420470"><span class="hs-identifier hs-var">occ</span></a><span>
</span><a name="line-182"></a><span>                    </span><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420438"><span class="hs-identifier hs-var">correct_name_space</span></a><span> </span><a href="#local-6989586621681420470"><span class="hs-identifier hs-var">occ</span></a><span>
</span><a name="line-183"></a><span>                    </span><span class="hs-special">,</span><span> </span><a name="local-6989586621681420474"><a href="#local-6989586621681420474"><span class="hs-identifier">pair</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420442"><span class="hs-identifier hs-var">unquals_in_scope</span></a><span> </span><a href="#local-6989586621681420468"><span class="hs-identifier hs-var">gre</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420443"><span class="hs-identifier hs-var">quals_only</span></a><span> </span><a href="#local-6989586621681420468"><span class="hs-identifier hs-var">gre</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-184"></a><span>                                </span><span class="hs-special">(</span><a name="local-6989586621681420472"><a href="#local-6989586621681420472"><span class="hs-identifier">how</span></a></a><span class="hs-glyph">:</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420471"><span class="hs-identifier hs-var">rdr_unqual</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420472"><span class="hs-identifier hs-var">how</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><a name="line-185"></a><span>                                </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>    </span><a name="local-6989586621681420473"><a href="#local-6989586621681420473"><span class="hs-identifier">pr</span></a></a><span class="hs-glyph">:</span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><a href="#local-6989586621681420473"><span class="hs-identifier hs-var">pr</span></a><span> </span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- See Note [Only-quals]</span><span>
</span><a name="line-186"></a><span>                                </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><a name="line-187"></a><span>
</span><a name="line-188"></a><span>              </span><span class="hs-comment">-- Note [Only-quals]</span><span>
</span><a name="line-189"></a><span>              </span><span class="hs-comment">-- The second alternative returns those names with the same</span><span>
</span><a name="line-190"></a><span>              </span><span class="hs-comment">-- OccName as the one we tried, but live in *qualified* imports</span><span>
</span><a name="line-191"></a><span>              </span><span class="hs-comment">-- e.g. if you have:</span><span>
</span><a name="line-192"></a><span>              </span><span class="hs-comment">--</span><span>
</span><a name="line-193"></a><span>              </span><span class="hs-comment">-- &gt; import qualified Data.Map as Map</span><span>
</span><a name="line-194"></a><span>              </span><span class="hs-comment">-- &gt; foo :: Map</span><span>
</span><a name="line-195"></a><span>              </span><span class="hs-comment">--</span><span>
</span><a name="line-196"></a><span>              </span><span class="hs-comment">-- then we suggest @Map.Map@.</span><span>
</span><a name="line-197"></a><span>
</span><a name="line-198"></a><span>    </span><span class="hs-comment">--------------------</span><span>
</span><a name="line-199"></a><span>    </span><span class="hs-identifier">unquals_in_scope</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">GlobalRdrElt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="RnUnbound.html#HowInScope"><span class="hs-identifier hs-type">HowInScope</span></a><span class="hs-special">]</span><span>
</span><a name="line-200"></a><span>    </span><a name="local-6989586621681420442"><a href="#local-6989586621681420442"><span class="hs-identifier">unquals_in_scope</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">GRE</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">gre_name</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621681420475"><a href="#local-6989586621681420475"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">gre_lcl</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621681420476"><a href="#local-6989586621681420476"><span class="hs-identifier">lcl</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">gre_imp</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621681420477"><a href="#local-6989586621681420477"><span class="hs-identifier">is</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-201"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420476"><span class="hs-identifier hs-var">lcl</span></a><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">nameSrcSpan</span><span> </span><a href="#local-6989586621681420475"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><a name="line-202"></a><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><a href="#local-6989586621681420479"><span class="hs-identifier hs-var">ispec</span></a><span>
</span><a name="line-203"></a><span>                    </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621681420478"><a href="#local-6989586621681420478"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420477"><span class="hs-identifier hs-var">is</span></a><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420479"><a href="#local-6989586621681420479"><span class="hs-identifier">ispec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">is_decl</span><span> </span><a href="#local-6989586621681420478"><span class="hs-identifier hs-var">i</span></a><span>
</span><a name="line-204"></a><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">is_qual</span><span> </span><a href="#local-6989586621681420479"><span class="hs-identifier hs-var">ispec</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><a name="line-205"></a><span>
</span><a name="line-206"></a><span>
</span><a name="line-207"></a><span>    </span><span class="hs-comment">--------------------</span><span>
</span><a name="line-208"></a><span>    </span><span class="hs-identifier">quals_only</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">GlobalRdrElt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">RdrName</span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#HowInScope"><span class="hs-identifier hs-type">HowInScope</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-209"></a><span>    </span><span class="hs-comment">-- Ones for which *only* the qualified version is in scope</span><span>
</span><a name="line-210"></a><span>    </span><a name="local-6989586621681420443"><a href="#local-6989586621681420443"><span class="hs-identifier">quals_only</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">GRE</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">gre_name</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621681420480"><a href="#local-6989586621681420480"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">gre_imp</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621681420481"><a href="#local-6989586621681420481"><span class="hs-identifier">is</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-211"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mkRdrQual</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">is_as</span><span> </span><a href="#local-6989586621681420483"><span class="hs-identifier hs-var">ispec</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">nameOccName</span><span> </span><a href="#local-6989586621681420480"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><a href="#local-6989586621681420483"><span class="hs-identifier hs-var">ispec</span></a><span class="hs-special">)</span><span>
</span><a name="line-212"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621681420482"><a href="#local-6989586621681420482"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420481"><span class="hs-identifier hs-var">is</span></a><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420483"><a href="#local-6989586621681420483"><span class="hs-identifier">ispec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">is_decl</span><span> </span><a href="#local-6989586621681420482"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">is_qual</span><span> </span><a href="#local-6989586621681420483"><span class="hs-identifier hs-var">ispec</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-213"></a><span>
</span><a name="line-214"></a><span class="hs-comment">-- | Generate helpful suggestions if a qualified name Mod.foo is not in scope.</span><span>
</span><a name="line-215"></a><span class="hs-identifier">importSuggestions</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="RnUnbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a><span>
</span><a name="line-216"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">GlobalRdrEnv</span><span>
</span><a name="line-217"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">HomePackageTable</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Module</span><span>
</span><a name="line-218"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">ImportAvails</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-219"></a><a name="importSuggestions"><a href="RnUnbound.html#importSuggestions"><span class="hs-identifier">importSuggestions</span></a></a><span> </span><a name="local-6989586621681420486"><a href="#local-6989586621681420486"><span class="hs-identifier">where_look</span></a></a><span> </span><a name="local-6989586621681420487"><a href="#local-6989586621681420487"><span class="hs-identifier">global_env</span></a></a><span> </span><a name="local-6989586621681420488"><a href="#local-6989586621681420488"><span class="hs-identifier">hpt</span></a></a><span> </span><a name="local-6989586621681420489"><a href="#local-6989586621681420489"><span class="hs-identifier">currMod</span></a></a><span> </span><a name="local-6989586621681420490"><a href="#local-6989586621681420490"><span class="hs-identifier">imports</span></a></a><span> </span><a name="local-6989586621681420491"><a href="#local-6989586621681420491"><span class="hs-identifier">rdr_name</span></a></a><span>
</span><a name="line-220"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="RnUnbound.html#WL_LocalOnly"><span class="hs-identifier hs-var">WL_LocalOnly</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420486"><span class="hs-identifier hs-var">where_look</span></a><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Outputable.empty</span><span>
</span><a name="line-221"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">isQual</span><span> </span><a href="#local-6989586621681420491"><span class="hs-identifier hs-var">rdr_name</span></a><span> </span><span class="hs-operator hs-var">||</span><span> </span><span class="hs-identifier hs-var">isUnqual</span><span> </span><a href="#local-6989586621681420491"><span class="hs-identifier hs-var">rdr_name</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Outputable.empty</span><span>
</span><a name="line-222"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621681420495"><span class="hs-identifier hs-var">interesting_imports</span></a><span>
</span><a name="line-223"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621681420522"><a href="#local-6989586621681420522"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420493"><span class="hs-identifier hs-var">mod_name</span></a><span>
</span><a name="line-224"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420500"><span class="hs-identifier hs-var">show_not_imported_line</span></a><span> </span><a href="#local-6989586621681420522"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-225"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">hsep</span><span>
</span><a name="line-226"></a><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;No module named&quot;</span><span>
</span><a name="line-227"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420522"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-228"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;is imported.&quot;</span><span>
</span><a name="line-229"></a><span>      </span><span class="hs-special">]</span><span>
</span><a name="line-230"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420492"><span class="hs-identifier hs-var">is_qualified</span></a><span>
</span><a name="line-231"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621681420497"><span class="hs-identifier hs-var">helpful_imports</span></a><span>
</span><a name="line-232"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a name="local-6989586621681420523"><a href="#local-6989586621681420523"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420495"><span class="hs-identifier hs-var">interesting_imports</span></a><span>
</span><a name="line-233"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">hsep</span><span>
</span><a name="line-234"></a><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Module&quot;</span><span>
</span><a name="line-235"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420523"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span>
</span><a name="line-236"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;does not export&quot;</span><span>
</span><a name="line-237"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420494"><span class="hs-identifier hs-var">occ_name</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">dot</span><span>
</span><a name="line-238"></a><span>      </span><span class="hs-special">]</span><span>
</span><a name="line-239"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420492"><span class="hs-identifier hs-var">is_qualified</span></a><span>
</span><a name="line-240"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621681420497"><span class="hs-identifier hs-var">helpful_imports</span></a><span>
</span><a name="line-241"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621681420495"><span class="hs-identifier hs-var">interesting_imports</span></a><span class="hs-special">)</span><span>
</span><a name="line-242"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="local-6989586621681420524"><a href="#local-6989586621681420524"><span class="hs-identifier">mods</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">fst</span><span> </span><a href="#local-6989586621681420495"><span class="hs-identifier hs-var">interesting_imports</span></a><span>
</span><a name="line-243"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">hsep</span><span>
</span><a name="line-244"></a><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Neither&quot;</span><span>
</span><a name="line-245"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotedListWithNor</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420524"><span class="hs-identifier hs-var">mods</span></a><span class="hs-special">)</span><span>
</span><a name="line-246"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;exports&quot;</span><span>
</span><a name="line-247"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420494"><span class="hs-identifier hs-var">occ_name</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">dot</span><span>
</span><a name="line-248"></a><span>      </span><span class="hs-special">]</span><span>
</span><a name="line-249"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a name="local-6989586621681420525"><a href="#local-6989586621681420525"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><a name="local-6989586621681420526"><a href="#local-6989586621681420526"><span class="hs-identifier">imv</span></a></a><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420499"><span class="hs-identifier hs-var">helpful_imports_non_hiding</span></a><span>
</span><a name="line-250"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fsep</span><span>
</span><a name="line-251"></a><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Perhaps you want to add&quot;</span><span>
</span><a name="line-252"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420494"><span class="hs-identifier hs-var">occ_name</span></a><span class="hs-special">)</span><span>
</span><a name="line-253"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;to the import list&quot;</span><span>
</span><a name="line-254"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;in the import of&quot;</span><span>
</span><a name="line-255"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420525"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span>
</span><a name="line-256"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">parens</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imv_span</span><span> </span><a href="#local-6989586621681420526"><span class="hs-identifier hs-var">imv</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">dot</span><span>
</span><a name="line-257"></a><span>      </span><span class="hs-special">]</span><span>
</span><a name="line-258"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621681420499"><span class="hs-identifier hs-var">helpful_imports_non_hiding</span></a><span class="hs-special">)</span><span>
</span><a name="line-259"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fsep</span><span>
</span><a name="line-260"></a><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Perhaps you want to add&quot;</span><span>
</span><a name="line-261"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420494"><span class="hs-identifier hs-var">occ_name</span></a><span class="hs-special">)</span><span>
</span><a name="line-262"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;to one of these import lists:&quot;</span><span>
</span><a name="line-263"></a><span>      </span><span class="hs-special">]</span><span>
</span><a name="line-264"></a><span>    </span><span class="hs-operator hs-var">$$</span><span>
</span><a name="line-265"></a><span>    </span><span class="hs-identifier hs-var">nest</span><span> </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">vcat</span><span>
</span><a name="line-266"></a><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420527"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><span class="hs-identifier hs-var">parens</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imv_span</span><span> </span><a href="#local-6989586621681420528"><span class="hs-identifier hs-var">imv</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-267"></a><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-6989586621681420527"><a href="#local-6989586621681420527"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><a name="local-6989586621681420528"><a href="#local-6989586621681420528"><span class="hs-identifier">imv</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420499"><span class="hs-identifier hs-var">helpful_imports_non_hiding</span></a><span>
</span><a name="line-268"></a><span>        </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-269"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a name="local-6989586621681420529"><a href="#local-6989586621681420529"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><a name="local-6989586621681420530"><a href="#local-6989586621681420530"><span class="hs-identifier">imv</span></a></a><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420498"><span class="hs-identifier hs-var">helpful_imports_hiding</span></a><span>
</span><a name="line-270"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fsep</span><span>
</span><a name="line-271"></a><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Perhaps you want to remove&quot;</span><span>
</span><a name="line-272"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420494"><span class="hs-identifier hs-var">occ_name</span></a><span class="hs-special">)</span><span>
</span><a name="line-273"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;from the explicit hiding list&quot;</span><span>
</span><a name="line-274"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;in the import of&quot;</span><span>
</span><a name="line-275"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420529"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span>
</span><a name="line-276"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">parens</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imv_span</span><span> </span><a href="#local-6989586621681420530"><span class="hs-identifier hs-var">imv</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">dot</span><span>
</span><a name="line-277"></a><span>      </span><span class="hs-special">]</span><span>
</span><a name="line-278"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621681420498"><span class="hs-identifier hs-var">helpful_imports_hiding</span></a><span class="hs-special">)</span><span>
</span><a name="line-279"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fsep</span><span>
</span><a name="line-280"></a><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Perhaps you want to remove&quot;</span><span>
</span><a name="line-281"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420494"><span class="hs-identifier hs-var">occ_name</span></a><span class="hs-special">)</span><span>
</span><a name="line-282"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;from the hiding clauses&quot;</span><span>
</span><a name="line-283"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;in one of these imports:&quot;</span><span>
</span><a name="line-284"></a><span>      </span><span class="hs-special">]</span><span>
</span><a name="line-285"></a><span>    </span><span class="hs-operator hs-var">$$</span><span>
</span><a name="line-286"></a><span>    </span><span class="hs-identifier hs-var">nest</span><span> </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">vcat</span><span>
</span><a name="line-287"></a><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">quotes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621681420531"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;+&gt;</span><span> </span><span class="hs-identifier hs-var">parens</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imv_span</span><span> </span><a href="#local-6989586621681420532"><span class="hs-identifier hs-var">imv</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-288"></a><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-6989586621681420531"><a href="#local-6989586621681420531"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><a name="local-6989586621681420532"><a href="#local-6989586621681420532"><span class="hs-identifier">imv</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420498"><span class="hs-identifier hs-var">helpful_imports_hiding</span></a><span>
</span><a name="line-289"></a><span>        </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-290"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>
</span><a name="line-291"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Outputable.empty</span><span>
</span><a name="line-292"></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-293"></a><span>  </span><a name="local-6989586621681420492"><a href="#local-6989586621681420492"><span class="hs-identifier">is_qualified</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isQual</span><span> </span><a href="#local-6989586621681420491"><span class="hs-identifier hs-var">rdr_name</span></a><span>
</span><a name="line-294"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621681420493"><a href="#local-6989586621681420493"><span class="hs-identifier">mod_name</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621681420494"><a href="#local-6989586621681420494"><span class="hs-identifier">occ_name</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621681420491"><span class="hs-identifier hs-var">rdr_name</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-295"></a><span>    </span><span class="hs-identifier hs-var">Unqual</span><span> </span><a name="local-6989586621681420501"><a href="#local-6989586621681420501"><span class="hs-identifier">occ_name</span></a></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420501"><span class="hs-identifier hs-var">occ_name</span></a><span class="hs-special">)</span><span>
</span><a name="line-296"></a><span>    </span><span class="hs-identifier hs-var">Qual</span><span> </span><a name="local-6989586621681420502"><a href="#local-6989586621681420502"><span class="hs-identifier">mod_name</span></a></a><span> </span><a name="local-6989586621681420503"><a href="#local-6989586621681420503"><span class="hs-identifier">occ_name</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621681420502"><span class="hs-identifier hs-var">mod_name</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420503"><span class="hs-identifier hs-var">occ_name</span></a><span class="hs-special">)</span><span>
</span><a name="line-297"></a><span>    </span><span class="hs-identifier">_</span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-string">&quot;importSuggestions: dead code&quot;</span><span>
</span><a name="line-298"></a><span>
</span><a name="line-299"></a><span>
</span><a name="line-300"></a><span>  </span><span class="hs-comment">-- What import statements provide &quot;Mod&quot; at all</span><span>
</span><a name="line-301"></a><span>  </span><span class="hs-comment">-- or, if this is an unqualified name, are not qualified imports</span><span>
</span><a name="line-302"></a><span>  </span><a name="local-6989586621681420495"><a href="#local-6989586621681420495"><span class="hs-identifier">interesting_imports</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621681420504"><span class="hs-identifier hs-var">mod</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621681420506"><span class="hs-identifier hs-var">imp</span></a><span class="hs-special">)</span><span>
</span><a name="line-303"></a><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-6989586621681420504"><a href="#local-6989586621681420504"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621681420505"><a href="#local-6989586621681420505"><span class="hs-identifier">mod_imports</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">moduleEnvToList</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imp_mods</span><span> </span><a href="#local-6989586621681420490"><span class="hs-identifier hs-var">imports</span></a><span class="hs-special">)</span><span>
</span><a name="line-304"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621681420506"><a href="#local-6989586621681420506"><span class="hs-identifier">imp</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621681420496"><span class="hs-identifier hs-var">pick</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">importedByUser</span><span> </span><a href="#local-6989586621681420505"><span class="hs-identifier hs-var">mod_imports</span></a><span class="hs-special">)</span><span>
</span><a name="line-305"></a><span>    </span><span class="hs-special">]</span><span>
</span><a name="line-306"></a><span>
</span><a name="line-307"></a><span>  </span><span class="hs-comment">-- We want to keep only one for each original module; preferably one with an</span><span>
</span><a name="line-308"></a><span>  </span><span class="hs-comment">-- explicit import list (for no particularly good reason)</span><span>
</span><a name="line-309"></a><span>  </span><span class="hs-identifier">pick</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">ImportedModsVal</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">ImportedModsVal</span><span>
</span><a name="line-310"></a><span>  </span><a name="local-6989586621681420496"><a href="#local-6989586621681420496"><span class="hs-identifier">pick</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">listToMaybe</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">sortBy</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">compare</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">on</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621681420508"><span class="hs-identifier hs-var">prefer</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">filter</span><span> </span><a href="#local-6989586621681420507"><span class="hs-identifier hs-var">select</span></a><span>
</span><a name="line-311"></a><span>    </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621681420507"><a href="#local-6989586621681420507"><span class="hs-identifier">select</span></a></a><span> </span><a name="local-6989586621681420509"><a href="#local-6989586621681420509"><span class="hs-identifier">imv</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621681420493"><span class="hs-identifier hs-var">mod_name</span></a><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621681420510"><a href="#local-6989586621681420510"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">imv_name</span><span> </span><a href="#local-6989586621681420509"><span class="hs-identifier hs-var">imv</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="#local-6989586621681420510"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-312"></a><span>                                        </span><span class="hs-identifier hs-var">Nothing</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imv_qualified</span><span> </span><a href="#local-6989586621681420509"><span class="hs-identifier hs-var">imv</span></a><span class="hs-special">)</span><span>
</span><a name="line-313"></a><span>          </span><a name="local-6989586621681420508"><a href="#local-6989586621681420508"><span class="hs-identifier">prefer</span></a></a><span> </span><a name="local-6989586621681420511"><a href="#local-6989586621681420511"><span class="hs-identifier">imv</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imv_is_hiding</span><span> </span><a href="#local-6989586621681420511"><span class="hs-identifier hs-var">imv</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">imv_span</span><span> </span><a href="#local-6989586621681420511"><span class="hs-identifier hs-var">imv</span></a><span class="hs-special">)</span><span>
</span><a name="line-314"></a><span>
</span><a name="line-315"></a><span>  </span><span class="hs-comment">-- Which of these would export a 'foo'</span><span>
</span><a name="line-316"></a><span>  </span><span class="hs-comment">-- (all of these are restricted imports, because if they were not, we</span><span>
</span><a name="line-317"></a><span>  </span><span class="hs-comment">-- wouldn't have an out-of-scope error in the first place)</span><span>
</span><a name="line-318"></a><span>  </span><a name="local-6989586621681420497"><a href="#local-6989586621681420497"><span class="hs-identifier">helpful_imports</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">filter</span><span> </span><a href="#local-6989586621681420512"><span class="hs-identifier hs-var">helpful</span></a><span> </span><a href="#local-6989586621681420495"><span class="hs-identifier hs-var">interesting_imports</span></a><span>
</span><a name="line-319"></a><span>    </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621681420512"><a href="#local-6989586621681420512"><span class="hs-identifier">helpful</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><a name="local-6989586621681420513"><a href="#local-6989586621681420513"><span class="hs-identifier">imv</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-320"></a><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">lookupGlobalRdrEnv</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imv_all_exports</span><span> </span><a href="#local-6989586621681420513"><span class="hs-identifier hs-var">imv</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621681420494"><span class="hs-identifier hs-var">occ_name</span></a><span>
</span><a name="line-321"></a><span>
</span><a name="line-322"></a><span>  </span><span class="hs-comment">-- Which of these do that because of an explicit hiding list resp. an</span><span>
</span><a name="line-323"></a><span>  </span><span class="hs-comment">-- explicit import list</span><span>
</span><a name="line-324"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621681420498"><a href="#local-6989586621681420498"><span class="hs-identifier">helpful_imports_hiding</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621681420499"><a href="#local-6989586621681420499"><span class="hs-identifier">helpful_imports_non_hiding</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-325"></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">partition</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">imv_is_hiding</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">snd</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621681420497"><span class="hs-identifier hs-var">helpful_imports</span></a><span>
</span><a name="line-326"></a><span>
</span><a name="line-327"></a><span>  </span><span class="hs-comment">-- See note [When to show/hide the module-not-imported line]</span><span>
</span><a name="line-328"></a><span>  </span><span class="hs-identifier">show_not_imported_line</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">ModuleName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>                    </span><span class="hs-comment">-- #15611</span><span>
</span><a name="line-329"></a><span>  </span><a name="local-6989586621681420500"><a href="#local-6989586621681420500"><span class="hs-identifier">show_not_imported_line</span></a></a><span> </span><a name="local-6989586621681420514"><a href="#local-6989586621681420514"><span class="hs-identifier">modnam</span></a></a><span>
</span><a name="line-330"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420514"><span class="hs-identifier hs-var">modnam</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">elem</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621681420517"><span class="hs-identifier hs-var">globMods</span></a><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>    </span><span class="hs-comment">-- #14225     -- 1</span><span>
</span><a name="line-331"></a><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">moduleName</span><span> </span><a href="#local-6989586621681420489"><span class="hs-identifier hs-var">currMod</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="#local-6989586621681420514"><span class="hs-identifier hs-var">modnam</span></a><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>                  </span><span class="hs-comment">-- 2.1</span><span>
</span><a name="line-332"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420516"><span class="hs-identifier hs-var">is_last_loaded_mod</span></a><span> </span><a href="#local-6989586621681420514"><span class="hs-identifier hs-var">modnam</span></a><span> </span><a href="#local-6989586621681420515"><span class="hs-identifier hs-var">hpt_uniques</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>                  </span><span class="hs-comment">-- 2.2</span><span>
</span><a name="line-333"></a><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>                             </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-334"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-335"></a><span>      </span><a name="local-6989586621681420515"><a href="#local-6989586621681420515"><span class="hs-identifier">hpt_uniques</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">fst</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">udfmToList</span><span> </span><a href="#local-6989586621681420488"><span class="hs-identifier hs-var">hpt</span></a><span class="hs-special">)</span><span>
</span><a name="line-336"></a><span>      </span><a name="local-6989586621681420516"><a href="#local-6989586621681420516"><span class="hs-identifier">is_last_loaded_mod</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-337"></a><span>      </span><span class="hs-identifier">is_last_loaded_mod</span><span> </span><a name="local-6989586621681420518"><a href="#local-6989586621681420518"><span class="hs-identifier">modnam</span></a></a><span> </span><a name="local-6989586621681420519"><a href="#local-6989586621681420519"><span class="hs-identifier">uniqs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">last</span><span> </span><a href="#local-6989586621681420519"><span class="hs-identifier hs-var">uniqs</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">getUnique</span><span> </span><a href="#local-6989586621681420518"><span class="hs-identifier hs-var">modnam</span></a><span>
</span><a name="line-338"></a><span>      </span><a name="local-6989586621681420517"><a href="#local-6989586621681420517"><span class="hs-identifier">globMods</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">nub</span><span> </span><span class="hs-special">[</span><span> </span><a href="#local-6989586621681420521"><span class="hs-identifier hs-var">mod</span></a><span>
</span><a name="line-339"></a><span>                     </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621681420520"><a href="#local-6989586621681420520"><span class="hs-identifier">gre</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">globalRdrEnvElts</span><span> </span><a href="#local-6989586621681420487"><span class="hs-identifier hs-var">global_env</span></a><span>
</span><a name="line-340"></a><span>                     </span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#isGreOk"><span class="hs-identifier hs-var">isGreOk</span></a><span> </span><a href="#local-6989586621681420486"><span class="hs-identifier hs-var">where_look</span></a><span> </span><a href="#local-6989586621681420520"><span class="hs-identifier hs-var">gre</span></a><span>
</span><a name="line-341"></a><span>                     </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a name="local-6989586621681420521"><a href="#local-6989586621681420521"><span class="hs-identifier">mod</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="RnUnbound.html#qualsInScope"><span class="hs-identifier hs-var">qualsInScope</span></a><span> </span><a href="#local-6989586621681420520"><span class="hs-identifier hs-var">gre</span></a><span>
</span><a name="line-342"></a><span>                     </span><span class="hs-special">]</span><span>
</span><a name="line-343"></a><span>
</span><a name="line-344"></a><span class="hs-identifier">extensionSuggestions</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">RdrName</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-345"></a><a name="extensionSuggestions"><a href="RnUnbound.html#extensionSuggestions"><span class="hs-identifier">extensionSuggestions</span></a></a><span> </span><a name="local-6989586621681420533"><a href="#local-6989586621681420533"><span class="hs-identifier">rdrName</span></a></a><span>
</span><a name="line-346"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420533"><span class="hs-identifier hs-var">rdrName</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">mkUnqual</span><span> </span><span class="hs-identifier hs-var">varName</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fsLit</span><span> </span><span class="hs-string">&quot;mdo&quot;</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">||</span><span>
</span><a name="line-347"></a><span>    </span><a href="#local-6989586621681420533"><span class="hs-identifier hs-var">rdrName</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">mkUnqual</span><span> </span><span class="hs-identifier hs-var">varName</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fsLit</span><span> </span><span class="hs-string">&quot;rec&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-348"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">text</span><span> </span><span class="hs-string">&quot;Perhaps you meant to use RecursiveDo&quot;</span><span>
</span><a name="line-349"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Outputable.empty</span><span>
</span><a name="line-350"></a><span>
</span><a name="line-351"></a><span class="hs-identifier">qualsInScope</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">GlobalRdrElt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">ModuleName</span><span class="hs-special">,</span><span> </span><a href="RnUnbound.html#HowInScope"><span class="hs-identifier hs-type">HowInScope</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-352"></a><span class="hs-comment">-- Ones for which the qualified version is in scope</span><span>
</span><a name="line-353"></a><a name="qualsInScope"><a href="RnUnbound.html#qualsInScope"><span class="hs-identifier">qualsInScope</span></a></a><span> </span><span class="hs-identifier hs-var">GRE</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">gre_name</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621681420534"><a href="#local-6989586621681420534"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">gre_lcl</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621681420535"><a href="#local-6989586621681420535"><span class="hs-identifier">lcl</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">gre_imp</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621681420536"><a href="#local-6989586621681420536"><span class="hs-identifier">is</span></a></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-354"></a><span>      </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621681420535"><span class="hs-identifier hs-var">lcl</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier hs-var">nameModule_maybe</span><span> </span><a href="#local-6989586621681420534"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-355"></a><span>                </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-356"></a><span>                </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621681420537"><a href="#local-6989586621681420537"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier">moduleName</span><span> </span><a href="#local-6989586621681420537"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">nameSrcSpan</span><span> </span><a href="#local-6989586621681420534"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-357"></a><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">is_as</span><span> </span><a href="#local-6989586621681420539"><span class="hs-identifier hs-var">ispec</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><a href="#local-6989586621681420539"><span class="hs-identifier hs-var">ispec</span></a><span class="hs-special">)</span><span>
</span><a name="line-358"></a><span>                    </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621681420538"><a href="#local-6989586621681420538"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621681420536"><span class="hs-identifier hs-var">is</span></a><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621681420539"><a href="#local-6989586621681420539"><span class="hs-identifier">ispec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">is_decl</span><span> </span><a href="#local-6989586621681420538"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span class="hs-identifier">isGreOk</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="RnUnbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">GlobalRdrElt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-361"></a><a name="isGreOk"><a href="RnUnbound.html#isGreOk"><span class="hs-identifier">isGreOk</span></a></a><span> </span><a name="local-6989586621681420540"><a href="#local-6989586621681420540"><span class="hs-identifier">where_look</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621681420540"><span class="hs-identifier hs-var">where_look</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-362"></a><span>                         </span><a href="RnUnbound.html#WL_LocalTop"><span class="hs-identifier hs-var">WL_LocalTop</span></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">isLocalGRE</span><span>
</span><a name="line-363"></a><span>                         </span><a href="RnUnbound.html#WL_LocalOnly"><span class="hs-identifier hs-var">WL_LocalOnly</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">const</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-364"></a><span>                         </span><span class="hs-identifier">_</span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">const</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-365"></a><span>
</span><a name="line-366"></a><span class="hs-comment">{- Note [When to show/hide the module-not-imported line]           -- #15611
For the error message:
    Not in scope X.Y
    Module X does not export Y
    No module named &#8216;X&#8217; is imported:
there are 2 cases, where we hide the last &quot;no module is imported&quot; line:
1. If the module X has been imported.
2. If the module X is the current module. There are 2 subcases:
   2.1 If the unknown module name is in a input source file,
       then we can use the getModule function to get the current module name.
       (See test T15611a)
   2.2 If the unknown module name has been entered by the user in GHCi,
       then the getModule function returns something like &quot;interactive:Ghci1&quot;,
       and we have to check the current module in the last added entry of
       the HomePackageTable. (See test T15611b)
-}</span><span>
</span><a name="line-382"></a></pre></body></html>