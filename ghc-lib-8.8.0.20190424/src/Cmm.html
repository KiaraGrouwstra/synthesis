<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- Cmm representations using Hoopl's Graph CmmNode e x.</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><a name="line-3"></a><span>
</span><a name="line-4"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cmm</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-5"></a><span>     </span><span class="hs-comment">-- * Cmm top-level datatypes</span><span>
</span><a name="line-6"></a><span>     </span><a href="Cmm.html#CmmProgram"><span class="hs-identifier hs-type">CmmProgram</span></a><span class="hs-special">,</span><span> </span><a href="Cmm.html#CmmGroup"><span class="hs-identifier hs-type">CmmGroup</span></a><span class="hs-special">,</span><span> </span><a href="Cmm.html#GenCmmGroup"><span class="hs-identifier hs-type">GenCmmGroup</span></a><span class="hs-special">,</span><span>
</span><a name="line-7"></a><span>     </span><a href="Cmm.html#CmmDecl"><span class="hs-identifier hs-type">CmmDecl</span></a><span class="hs-special">,</span><span> </span><a href="Cmm.html#GenCmmDecl"><span class="hs-identifier hs-type">GenCmmDecl</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-8"></a><span>     </span><a href="Cmm.html#CmmGraph"><span class="hs-identifier hs-type">CmmGraph</span></a><span class="hs-special">,</span><span> </span><a href="Cmm.html#GenCmmGraph"><span class="hs-identifier hs-type">GenCmmGraph</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-9"></a><span>     </span><a href="Cmm.html#CmmBlock"><span class="hs-identifier hs-type">CmmBlock</span></a><span class="hs-special">,</span><span>
</span><a name="line-10"></a><span>     </span><a href="Cmm.html#RawCmmDecl"><span class="hs-identifier hs-type">RawCmmDecl</span></a><span class="hs-special">,</span><span> </span><a href="Cmm.html#RawCmmGroup"><span class="hs-identifier hs-type">RawCmmGroup</span></a><span class="hs-special">,</span><span>
</span><a name="line-11"></a><span>     </span><a href="Cmm.html#Section"><span class="hs-identifier hs-type">Section</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Cmm.html#SectionType"><span class="hs-identifier hs-type">SectionType</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Cmm.html#CmmStatics"><span class="hs-identifier hs-type">CmmStatics</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Cmm.html#CmmStatic"><span class="hs-identifier hs-type">CmmStatic</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-12"></a><span>     </span><a href="Cmm.html#isSecConstant"><span class="hs-identifier hs-var">isSecConstant</span></a><span class="hs-special">,</span><span>
</span><a name="line-13"></a><span>
</span><a name="line-14"></a><span>     </span><span class="hs-comment">-- ** Blocks containing lists</span><span>
</span><a name="line-15"></a><span>     </span><a href="Cmm.html#GenBasicBlock"><span class="hs-identifier hs-type">GenBasicBlock</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Cmm.html#blockId"><span class="hs-identifier hs-var">blockId</span></a><span class="hs-special">,</span><span>
</span><a name="line-16"></a><span>     </span><a href="Cmm.html#ListGraph"><span class="hs-identifier hs-type">ListGraph</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Cmm.html#pprBBlock"><span class="hs-identifier hs-var">pprBBlock</span></a><span class="hs-special">,</span><span>
</span><a name="line-17"></a><span>
</span><a name="line-18"></a><span>     </span><span class="hs-comment">-- * Info Tables</span><span>
</span><a name="line-19"></a><span>     </span><a href="Cmm.html#CmmTopInfo"><span class="hs-identifier hs-type">CmmTopInfo</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Cmm.html#CmmStackInfo"><span class="hs-identifier hs-type">CmmStackInfo</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Cmm.html#CmmInfoTable"><span class="hs-identifier hs-type">CmmInfoTable</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Cmm.html#topInfoTable"><span class="hs-identifier hs-var">topInfoTable</span></a><span class="hs-special">,</span><span>
</span><a name="line-20"></a><span>     </span><a href="SMRep.html#ClosureTypeInfo"><span class="hs-identifier hs-type">ClosureTypeInfo</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-21"></a><span>     </span><a href="Cmm.html#ProfilingInfo"><span class="hs-identifier hs-type">ProfilingInfo</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="SMRep.html#ConstrDescription"><span class="hs-identifier hs-type">ConstrDescription</span></a><span class="hs-special">,</span><span>
</span><a name="line-22"></a><span>
</span><a name="line-23"></a><span>     </span><span class="hs-comment">-- * Statements, expressions and types</span><span>
</span><a name="line-24"></a><span>     </span><span class="hs-keyword">module</span><span> </span><a href="CmmNode.html"><span class="hs-identifier">CmmNode</span></a><span class="hs-special">,</span><span>
</span><a name="line-25"></a><span>     </span><span class="hs-keyword">module</span><span> </span><a href="CmmExpr.html"><span class="hs-identifier">CmmExpr</span></a><span class="hs-special">,</span><span>
</span><a name="line-26"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-27"></a><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GhcPrelude</span><span>
</span><a name="line-29"></a><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Id</span><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">CostCentre</span><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><a href="CLabel.html"><span class="hs-identifier">CLabel</span></a><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><a href="BlockId.html"><span class="hs-identifier">BlockId</span></a><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span> </span><a href="CmmNode.html"><span class="hs-identifier">CmmNode</span></a><span>
</span><a name="line-35"></a><span class="hs-keyword">import</span><span> </span><a href="SMRep.html"><span class="hs-identifier">SMRep</span></a><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span> </span><a href="CmmExpr.html"><span class="hs-identifier">CmmExpr</span></a><span>
</span><a name="line-37"></a><span class="hs-keyword">import</span><span> </span><a href="Hoopl.Block.html"><span class="hs-identifier">Hoopl.Block</span></a><span>
</span><a name="line-38"></a><span class="hs-keyword">import</span><span> </span><a href="Hoopl.Collections.html"><span class="hs-identifier">Hoopl.Collections</span></a><span>
</span><a name="line-39"></a><span class="hs-keyword">import</span><span> </span><a href="Hoopl.Graph.html"><span class="hs-identifier">Hoopl.Graph</span></a><span>
</span><a name="line-40"></a><span class="hs-keyword">import</span><span> </span><a href="Hoopl.Label.html"><span class="hs-identifier">Hoopl.Label</span></a><span>
</span><a name="line-41"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Outputable</span><span>
</span><a name="line-42"></a><span>
</span><a name="line-43"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Word</span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Word8</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-44"></a><span>
</span><a name="line-45"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-46"></a><span class="hs-comment">--  Cmm, GenCmm</span><span>
</span><a name="line-47"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-48"></a><span>
</span><a name="line-49"></a><span class="hs-comment">-- A CmmProgram is a list of CmmGroups</span><span>
</span><a name="line-50"></a><span class="hs-comment">-- A CmmGroup is a list of top-level declarations</span><span>
</span><a name="line-51"></a><span>
</span><a name="line-52"></a><span class="hs-comment">-- When object-splitting is on, each group is compiled into a separate</span><span>
</span><a name="line-53"></a><span class="hs-comment">-- .o file. So typically we put closely related stuff in a CmmGroup.</span><span>
</span><a name="line-54"></a><span class="hs-comment">-- Section-splitting follows suit and makes one .text subsection for each</span><span>
</span><a name="line-55"></a><span class="hs-comment">-- CmmGroup.</span><span>
</span><a name="line-56"></a><span>
</span><a name="line-57"></a><span class="hs-keyword">type</span><span> </span><a name="CmmProgram"><a href="Cmm.html#CmmProgram"><span class="hs-identifier">CmmProgram</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Cmm.html#CmmGroup"><span class="hs-identifier hs-type">CmmGroup</span></a><span class="hs-special">]</span><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span class="hs-keyword">type</span><span> </span><a name="GenCmmGroup"><a href="Cmm.html#GenCmmGroup"><span class="hs-identifier">GenCmmGroup</span></a></a><span> </span><a name="local-6989586621680048025"><a href="#local-6989586621680048025"><span class="hs-identifier">d</span></a></a><span> </span><a name="local-6989586621680048026"><a href="#local-6989586621680048026"><span class="hs-identifier">h</span></a></a><span> </span><a name="local-6989586621680048027"><a href="#local-6989586621680048027"><span class="hs-identifier">g</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Cmm.html#GenCmmDecl"><span class="hs-identifier hs-type">GenCmmDecl</span></a><span> </span><a href="#local-6989586621680048025"><span class="hs-identifier hs-type">d</span></a><span> </span><a href="#local-6989586621680048026"><span class="hs-identifier hs-type">h</span></a><span> </span><a href="#local-6989586621680048027"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">]</span><span>
</span><a name="line-60"></a><span class="hs-keyword">type</span><span> </span><a name="CmmGroup"><a href="Cmm.html#CmmGroup"><span class="hs-identifier">CmmGroup</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Cmm.html#GenCmmGroup"><span class="hs-identifier hs-type">GenCmmGroup</span></a><span> </span><a href="Cmm.html#CmmStatics"><span class="hs-identifier hs-type">CmmStatics</span></a><span> </span><a href="Cmm.html#CmmTopInfo"><span class="hs-identifier hs-type">CmmTopInfo</span></a><span> </span><a href="Cmm.html#CmmGraph"><span class="hs-identifier hs-type">CmmGraph</span></a><span>
</span><a name="line-61"></a><span class="hs-keyword">type</span><span> </span><a name="RawCmmGroup"><a href="Cmm.html#RawCmmGroup"><span class="hs-identifier">RawCmmGroup</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Cmm.html#GenCmmGroup"><span class="hs-identifier hs-type">GenCmmGroup</span></a><span> </span><a href="Cmm.html#CmmStatics"><span class="hs-identifier hs-type">CmmStatics</span></a><span> </span><span class="hs-special">(</span><a href="Hoopl.Label.html#LabelMap"><span class="hs-identifier hs-type">LabelMap</span></a><span> </span><a href="Cmm.html#CmmStatics"><span class="hs-identifier hs-type">CmmStatics</span></a><span class="hs-special">)</span><span> </span><a href="Cmm.html#CmmGraph"><span class="hs-identifier hs-type">CmmGraph</span></a><span>
</span><a name="line-62"></a><span>
</span><a name="line-63"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-64"></a><span class="hs-comment">--  CmmDecl, GenCmmDecl</span><span>
</span><a name="line-65"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span class="hs-comment">-- GenCmmDecl is abstracted over</span><span>
</span><a name="line-68"></a><span class="hs-comment">--   d, the type of static data elements in CmmData</span><span>
</span><a name="line-69"></a><span class="hs-comment">--   h, the static info preceding the code of a CmmProc</span><span>
</span><a name="line-70"></a><span class="hs-comment">--   g, the control-flow graph of a CmmProc</span><span>
</span><a name="line-71"></a><span class="hs-comment">--</span><span>
</span><a name="line-72"></a><span class="hs-comment">-- We expect there to be two main instances of this type:</span><span>
</span><a name="line-73"></a><span class="hs-comment">--   (a) C--, i.e. populated with various C-- constructs</span><span>
</span><a name="line-74"></a><span class="hs-comment">--   (b) Native code, populated with data/instructions</span><span>
</span><a name="line-75"></a><span>
</span><a name="line-76"></a><span class="hs-comment">-- | A top-level chunk, abstracted over the type of the contents of</span><span>
</span><a name="line-77"></a><span class="hs-comment">-- the basic blocks (Cmm or instructions are the likely instantiations).</span><span>
</span><a name="line-78"></a><span class="hs-keyword">data</span><span> </span><a name="GenCmmDecl"><a href="Cmm.html#GenCmmDecl"><span class="hs-identifier">GenCmmDecl</span></a></a><span> </span><a name="local-6989586621680048022"><a href="#local-6989586621680048022"><span class="hs-identifier">d</span></a></a><span> </span><a name="local-6989586621680048023"><a href="#local-6989586621680048023"><span class="hs-identifier">h</span></a></a><span> </span><a name="local-6989586621680048024"><a href="#local-6989586621680048024"><span class="hs-identifier">g</span></a></a><span>
</span><a name="line-79"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="CmmProc"><a href="Cmm.html#CmmProc"><span class="hs-identifier">CmmProc</span></a></a><span>     </span><span class="hs-comment">-- A procedure</span><span>
</span><a name="line-80"></a><span>     </span><a href="#local-6989586621680048023"><span class="hs-identifier hs-type">h</span></a><span>                 </span><span class="hs-comment">-- Extra header such as the info table</span><span>
</span><a name="line-81"></a><span>     </span><a href="CLabel.html#CLabel"><span class="hs-identifier hs-type">CLabel</span></a><span>            </span><span class="hs-comment">-- Entry label</span><span>
</span><a name="line-82"></a><span>     </span><span class="hs-special">[</span><a href="CmmExpr.html#GlobalReg"><span class="hs-identifier hs-type">GlobalReg</span></a><span class="hs-special">]</span><span>       </span><span class="hs-comment">-- Registers live on entry. Note that the set of live</span><span>
</span><a name="line-83"></a><span>                       </span><span class="hs-comment">-- registers will be correct in generated C-- code, but</span><span>
</span><a name="line-84"></a><span>                       </span><span class="hs-comment">-- not in hand-written C-- code. However,</span><span>
</span><a name="line-85"></a><span>                       </span><span class="hs-comment">-- splitAtProcPoints calculates correct liveness</span><span>
</span><a name="line-86"></a><span>                       </span><span class="hs-comment">-- information for CmmProcs.</span><span>
</span><a name="line-87"></a><span>     </span><a href="#local-6989586621680048024"><span class="hs-identifier hs-type">g</span></a><span>                 </span><span class="hs-comment">-- Control-flow graph for the procedure's code</span><span>
</span><a name="line-88"></a><span>
</span><a name="line-89"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="CmmData"><a href="Cmm.html#CmmData"><span class="hs-identifier">CmmData</span></a></a><span>     </span><span class="hs-comment">-- Static data</span><span>
</span><a name="line-90"></a><span>        </span><a href="Cmm.html#Section"><span class="hs-identifier hs-type">Section</span></a><span>
</span><a name="line-91"></a><span>        </span><a href="#local-6989586621680048022"><span class="hs-identifier hs-type">d</span></a><span>
</span><a name="line-92"></a><span>
</span><a name="line-93"></a><span class="hs-keyword">type</span><span> </span><a name="CmmDecl"><a href="Cmm.html#CmmDecl"><span class="hs-identifier">CmmDecl</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Cmm.html#GenCmmDecl"><span class="hs-identifier hs-type">GenCmmDecl</span></a><span> </span><a href="Cmm.html#CmmStatics"><span class="hs-identifier hs-type">CmmStatics</span></a><span> </span><a href="Cmm.html#CmmTopInfo"><span class="hs-identifier hs-type">CmmTopInfo</span></a><span> </span><a href="Cmm.html#CmmGraph"><span class="hs-identifier hs-type">CmmGraph</span></a><span>
</span><a name="line-94"></a><span>
</span><a name="line-95"></a><span class="hs-keyword">type</span><span> </span><a name="RawCmmDecl"><a href="Cmm.html#RawCmmDecl"><span class="hs-identifier">RawCmmDecl</span></a></a><span>
</span><a name="line-96"></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Cmm.html#GenCmmDecl"><span class="hs-identifier hs-type">GenCmmDecl</span></a><span>
</span><a name="line-97"></a><span>        </span><a href="Cmm.html#CmmStatics"><span class="hs-identifier hs-type">CmmStatics</span></a><span>
</span><a name="line-98"></a><span>        </span><span class="hs-special">(</span><a href="Hoopl.Label.html#LabelMap"><span class="hs-identifier hs-type">LabelMap</span></a><span> </span><a href="Cmm.html#CmmStatics"><span class="hs-identifier hs-type">CmmStatics</span></a><span class="hs-special">)</span><span>
</span><a name="line-99"></a><span>        </span><a href="Cmm.html#CmmGraph"><span class="hs-identifier hs-type">CmmGraph</span></a><span>
</span><a name="line-100"></a><span>
</span><a name="line-101"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-102"></a><span class="hs-comment">--     Graphs</span><span>
</span><a name="line-103"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span class="hs-keyword">type</span><span> </span><a name="CmmGraph"><a href="Cmm.html#CmmGraph"><span class="hs-identifier">CmmGraph</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Cmm.html#GenCmmGraph"><span class="hs-identifier hs-type">GenCmmGraph</span></a><span> </span><a href="CmmNode.html#CmmNode"><span class="hs-identifier hs-type">CmmNode</span></a><span>
</span><a name="line-106"></a><span class="hs-keyword">data</span><span> </span><a name="GenCmmGraph"><a href="Cmm.html#GenCmmGraph"><span class="hs-identifier">GenCmmGraph</span></a></a><span> </span><a name="local-6989586621680048021"><a href="#local-6989586621680048021"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="CmmGraph"><a href="Cmm.html#CmmGraph"><span class="hs-identifier">CmmGraph</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="g_entry"><a href="Cmm.html#g_entry"><span class="hs-identifier">g_entry</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a><span class="hs-special">,</span><span> </span><a name="g_graph"><a href="Cmm.html#g_graph"><span class="hs-identifier">g_graph</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Hoopl.Graph.html#Graph"><span class="hs-identifier hs-type">Graph</span></a><span> </span><a href="#local-6989586621680048021"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="Hoopl.Block.html#C"><span class="hs-identifier hs-type">C</span></a><span> </span><a href="Hoopl.Block.html#C"><span class="hs-identifier hs-type">C</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-107"></a><span class="hs-keyword">type</span><span> </span><a name="CmmBlock"><a href="Cmm.html#CmmBlock"><span class="hs-identifier">CmmBlock</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Hoopl.Block.html#Block"><span class="hs-identifier hs-type">Block</span></a><span> </span><a href="CmmNode.html#CmmNode"><span class="hs-identifier hs-type">CmmNode</span></a><span> </span><a href="Hoopl.Block.html#C"><span class="hs-identifier hs-type">C</span></a><span> </span><a href="Hoopl.Block.html#C"><span class="hs-identifier hs-type">C</span></a><span>
</span><a name="line-108"></a><span>
</span><a name="line-109"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-110"></a><span class="hs-comment">--     Info Tables</span><span>
</span><a name="line-111"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-112"></a><span>
</span><a name="line-113"></a><span class="hs-keyword">data</span><span> </span><a name="CmmTopInfo"><a href="Cmm.html#CmmTopInfo"><span class="hs-identifier">CmmTopInfo</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a name="TopInfo"><a href="Cmm.html#TopInfo"><span class="hs-identifier">TopInfo</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="info_tbls"><a href="Cmm.html#info_tbls"><span class="hs-identifier">info_tbls</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="Hoopl.Label.html#LabelMap"><span class="hs-identifier hs-type">LabelMap</span></a><span> </span><a href="Cmm.html#CmmInfoTable"><span class="hs-identifier hs-type">CmmInfoTable</span></a><span>
</span><a name="line-114"></a><span>                            </span><span class="hs-special">,</span><span> </span><a name="stack_info"><a href="Cmm.html#stack_info"><span class="hs-identifier">stack_info</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Cmm.html#CmmStackInfo"><span class="hs-identifier hs-type">CmmStackInfo</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-115"></a><span>
</span><a name="line-116"></a><span class="hs-identifier">topInfoTable</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Cmm.html#GenCmmDecl"><span class="hs-identifier hs-type">GenCmmDecl</span></a><span> </span><a href="#local-6989586621680048033"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="Cmm.html#CmmTopInfo"><span class="hs-identifier hs-type">CmmTopInfo</span></a><span> </span><span class="hs-special">(</span><a href="Cmm.html#GenCmmGraph"><span class="hs-identifier hs-type">GenCmmGraph</span></a><span> </span><a href="#local-6989586621680048034"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="Cmm.html#CmmInfoTable"><span class="hs-identifier hs-type">CmmInfoTable</span></a><span>
</span><a name="line-117"></a><a name="topInfoTable"><a href="Cmm.html#topInfoTable"><span class="hs-identifier">topInfoTable</span></a></a><span> </span><span class="hs-special">(</span><a href="Cmm.html#CmmProc"><span class="hs-identifier hs-var">CmmProc</span></a><span> </span><a name="local-6989586621680048035"><a href="#local-6989586621680048035"><span class="hs-identifier">infos</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680048036"><a href="#local-6989586621680048036"><span class="hs-identifier">g</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Hoopl.Collections.html#mapLookup"><span class="hs-identifier hs-var">mapLookup</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">g_entry</span><span> </span><a href="#local-6989586621680048036"><span class="hs-identifier hs-var">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">info_tbls</span><span> </span><a href="#local-6989586621680048035"><span class="hs-identifier hs-var">infos</span></a><span class="hs-special">)</span><span>
</span><a name="line-118"></a><span class="hs-identifier">topInfoTable</span><span> </span><span class="hs-identifier">_</span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-119"></a><span>
</span><a name="line-120"></a><span class="hs-keyword">data</span><span> </span><a name="CmmStackInfo"><a href="Cmm.html#CmmStackInfo"><span class="hs-identifier">CmmStackInfo</span></a></a><span>
</span><a name="line-121"></a><span>   </span><span class="hs-glyph">=</span><span> </span><a name="StackInfo"><a href="Cmm.html#StackInfo"><span class="hs-identifier">StackInfo</span></a></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-122"></a><span>       </span><a name="arg_space"><a href="Cmm.html#arg_space"><span class="hs-identifier">arg_space</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="SMRep.html#ByteOff"><span class="hs-identifier hs-type">ByteOff</span></a><span class="hs-special">,</span><span>
</span><a name="line-123"></a><span>               </span><span class="hs-comment">-- number of bytes of arguments on the stack on entry to the</span><span>
</span><a name="line-124"></a><span>               </span><span class="hs-comment">-- the proc.  This is filled in by StgCmm.codeGen, and used</span><span>
</span><a name="line-125"></a><span>               </span><span class="hs-comment">-- by the stack allocator later.</span><span>
</span><a name="line-126"></a><span>       </span><a name="updfr_space"><a href="Cmm.html#updfr_space"><span class="hs-identifier">updfr_space</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="SMRep.html#ByteOff"><span class="hs-identifier hs-type">ByteOff</span></a><span class="hs-special">,</span><span>
</span><a name="line-127"></a><span>               </span><span class="hs-comment">-- XXX: this never contains anything useful, but it should.</span><span>
</span><a name="line-128"></a><span>               </span><span class="hs-comment">-- See comment in CmmLayoutStack.</span><span>
</span><a name="line-129"></a><span>       </span><a name="do_layout"><a href="Cmm.html#do_layout"><span class="hs-identifier">do_layout</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-130"></a><span>               </span><span class="hs-comment">-- Do automatic stack layout for this proc.  This is</span><span>
</span><a name="line-131"></a><span>               </span><span class="hs-comment">-- True for all code generated by the code generator,</span><span>
</span><a name="line-132"></a><span>               </span><span class="hs-comment">-- but is occasionally False for hand-written Cmm where</span><span>
</span><a name="line-133"></a><span>               </span><span class="hs-comment">-- we want to do the stack manipulation manually.</span><span>
</span><a name="line-134"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-135"></a><span>
</span><a name="line-136"></a><span class="hs-comment">-- | Info table as a haskell data type</span><span>
</span><a name="line-137"></a><span class="hs-keyword">data</span><span> </span><a name="CmmInfoTable"><a href="Cmm.html#CmmInfoTable"><span class="hs-identifier">CmmInfoTable</span></a></a><span>
</span><a name="line-138"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="CmmInfoTable"><a href="Cmm.html#CmmInfoTable"><span class="hs-identifier">CmmInfoTable</span></a></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-139"></a><span>      </span><a name="cit_lbl"><a href="Cmm.html#cit_lbl"><span class="hs-identifier">cit_lbl</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="CLabel.html#CLabel"><span class="hs-identifier hs-type">CLabel</span></a><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Info table label</span><span>
</span><a name="line-140"></a><span>      </span><a name="cit_rep"><a href="Cmm.html#cit_rep"><span class="hs-identifier">cit_rep</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="SMRep.html#SMRep"><span class="hs-identifier hs-type">SMRep</span></a><span class="hs-special">,</span><span>
</span><a name="line-141"></a><span>      </span><a name="cit_prof"><a href="Cmm.html#cit_prof"><span class="hs-identifier">cit_prof</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Cmm.html#ProfilingInfo"><span class="hs-identifier hs-type">ProfilingInfo</span></a><span class="hs-special">,</span><span>
</span><a name="line-142"></a><span>      </span><a name="cit_srt"><a href="Cmm.html#cit_srt"><span class="hs-identifier">cit_srt</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="CLabel.html#CLabel"><span class="hs-identifier hs-type">CLabel</span></a><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- empty, or a closure address</span><span>
</span><a name="line-143"></a><span>      </span><a name="cit_clo"><a href="Cmm.html#cit_clo"><span class="hs-identifier">cit_clo</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Id</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">CostCentreStack</span><span class="hs-special">)</span><span>
</span><a name="line-144"></a><span>        </span><span class="hs-comment">-- Just (id,ccs) &lt;=&gt; build a static closure later</span><span>
</span><a name="line-145"></a><span>        </span><span class="hs-comment">-- Nothing &lt;=&gt; don't build a static closure</span><span>
</span><a name="line-146"></a><span>        </span><span class="hs-comment">--</span><span>
</span><a name="line-147"></a><span>        </span><span class="hs-comment">-- Static closures for FUNs and THUNKs are *not* generated by</span><span>
</span><a name="line-148"></a><span>        </span><span class="hs-comment">-- the code generator, because we might want to add SRT</span><span>
</span><a name="line-149"></a><span>        </span><span class="hs-comment">-- entries to them later (for FUNs at least; THUNKs are</span><span>
</span><a name="line-150"></a><span>        </span><span class="hs-comment">-- treated the same for consistency). See Note [SRTs] in</span><span>
</span><a name="line-151"></a><span>        </span><span class="hs-comment">-- CmmBuildInfoTables, in particular the [FUN] optimisation.</span><span>
</span><a name="line-152"></a><span>        </span><span class="hs-comment">--</span><span>
</span><a name="line-153"></a><span>        </span><span class="hs-comment">-- This is strictly speaking not a part of the info table that</span><span>
</span><a name="line-154"></a><span>        </span><span class="hs-comment">-- will be finally generated, but it's the only convenient</span><span>
</span><a name="line-155"></a><span>        </span><span class="hs-comment">-- place to convey this information from the code generator to</span><span>
</span><a name="line-156"></a><span>        </span><span class="hs-comment">-- where we build the static closures in</span><span>
</span><a name="line-157"></a><span>        </span><span class="hs-comment">-- CmmBuildInfoTables.doSRTs.</span><span>
</span><a name="line-158"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-159"></a><span>
</span><a name="line-160"></a><span class="hs-keyword">data</span><span> </span><a name="ProfilingInfo"><a href="Cmm.html#ProfilingInfo"><span class="hs-identifier">ProfilingInfo</span></a></a><span>
</span><a name="line-161"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="NoProfilingInfo"><a href="Cmm.html#NoProfilingInfo"><span class="hs-identifier">NoProfilingInfo</span></a></a><span>
</span><a name="line-162"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="ProfilingInfo"><a href="Cmm.html#ProfilingInfo"><span class="hs-identifier">ProfilingInfo</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Word8</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Word8</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- closure_type, closure_desc</span><span>
</span><a name="line-163"></a><span>
</span><a name="line-164"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-165"></a><span class="hs-comment">--              Static Data</span><span>
</span><a name="line-166"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-167"></a><span>
</span><a name="line-168"></a><span class="hs-keyword">data</span><span> </span><a name="SectionType"><a href="Cmm.html#SectionType"><span class="hs-identifier">SectionType</span></a></a><span>
</span><a name="line-169"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="Text"><a href="Cmm.html#Text"><span class="hs-identifier">Text</span></a></a><span>
</span><a name="line-170"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Data"><a href="Cmm.html#Data"><span class="hs-identifier">Data</span></a></a><span>
</span><a name="line-171"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="ReadOnlyData"><a href="Cmm.html#ReadOnlyData"><span class="hs-identifier">ReadOnlyData</span></a></a><span>
</span><a name="line-172"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="RelocatableReadOnlyData"><a href="Cmm.html#RelocatableReadOnlyData"><span class="hs-identifier">RelocatableReadOnlyData</span></a></a><span>
</span><a name="line-173"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="UninitialisedData"><a href="Cmm.html#UninitialisedData"><span class="hs-identifier">UninitialisedData</span></a></a><span>
</span><a name="line-174"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="ReadOnlyData16"><a href="Cmm.html#ReadOnlyData16"><span class="hs-identifier">ReadOnlyData16</span></a></a><span>      </span><span class="hs-comment">-- .rodata.cst16 on x86_64, 16-byte aligned</span><span>
</span><a name="line-175"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="CString"><a href="Cmm.html#CString"><span class="hs-identifier">CString</span></a></a><span>
</span><a name="line-176"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="OtherSection"><a href="Cmm.html#OtherSection"><span class="hs-identifier">OtherSection</span></a></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-177"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-178"></a><span>
</span><a name="line-179"></a><span class="hs-comment">-- | Should a data in this section be considered constant</span><span>
</span><a name="line-180"></a><span class="hs-identifier">isSecConstant</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Cmm.html#Section"><span class="hs-identifier hs-type">Section</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-181"></a><a name="isSecConstant"><a href="Cmm.html#isSecConstant"><span class="hs-identifier">isSecConstant</span></a></a><span> </span><span class="hs-special">(</span><a href="Cmm.html#Section"><span class="hs-identifier hs-var">Section</span></a><span> </span><a name="local-6989586621680048037"><a href="#local-6989586621680048037"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680048037"><span class="hs-identifier hs-var">t</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-182"></a><span>    </span><a href="Cmm.html#Text"><span class="hs-identifier hs-var">Text</span></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-183"></a><span>    </span><a href="Cmm.html#ReadOnlyData"><span class="hs-identifier hs-var">ReadOnlyData</span></a><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-184"></a><span>    </span><a href="Cmm.html#RelocatableReadOnlyData"><span class="hs-identifier hs-var">RelocatableReadOnlyData</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-185"></a><span>    </span><a href="Cmm.html#ReadOnlyData16"><span class="hs-identifier hs-var">ReadOnlyData16</span></a><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-186"></a><span>    </span><a href="Cmm.html#CString"><span class="hs-identifier hs-var">CString</span></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-187"></a><span>    </span><a href="Cmm.html#Data"><span class="hs-identifier hs-var">Data</span></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-188"></a><span>    </span><a href="Cmm.html#UninitialisedData"><span class="hs-identifier hs-var">UninitialisedData</span></a><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-189"></a><span>    </span><span class="hs-special">(</span><a href="Cmm.html#OtherSection"><span class="hs-identifier hs-var">OtherSection</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-190"></a><span>
</span><a name="line-191"></a><span class="hs-keyword">data</span><span> </span><a name="Section"><a href="Cmm.html#Section"><span class="hs-identifier">Section</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Section"><a href="Cmm.html#Section"><span class="hs-identifier">Section</span></a></a><span> </span><a href="Cmm.html#SectionType"><span class="hs-identifier hs-type">SectionType</span></a><span> </span><a href="CLabel.html#CLabel"><span class="hs-identifier hs-type">CLabel</span></a><span>
</span><a name="line-192"></a><span>
</span><a name="line-193"></a><span class="hs-keyword">data</span><span> </span><a name="CmmStatic"><a href="Cmm.html#CmmStatic"><span class="hs-identifier">CmmStatic</span></a></a><span>
</span><a name="line-194"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="CmmStaticLit"><a href="Cmm.html#CmmStaticLit"><span class="hs-identifier">CmmStaticLit</span></a></a><span> </span><a href="CmmExpr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a><span>
</span><a name="line-195"></a><span>        </span><span class="hs-comment">-- a literal value, size given by cmmLitRep of the literal.</span><span>
</span><a name="line-196"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="CmmUninitialised"><a href="Cmm.html#CmmUninitialised"><span class="hs-identifier">CmmUninitialised</span></a></a><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-197"></a><span>        </span><span class="hs-comment">-- uninitialised data, N bytes long</span><span>
</span><a name="line-198"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="CmmString"><a href="Cmm.html#CmmString"><span class="hs-identifier">CmmString</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Word8</span><span class="hs-special">]</span><span>
</span><a name="line-199"></a><span>        </span><span class="hs-comment">-- string of 8-bit values only, not zero terminated.</span><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span class="hs-keyword">data</span><span> </span><a name="CmmStatics"><a href="Cmm.html#CmmStatics"><span class="hs-identifier">CmmStatics</span></a></a><span>
</span><a name="line-202"></a><span>   </span><span class="hs-glyph">=</span><span> </span><a name="Statics"><a href="Cmm.html#Statics"><span class="hs-identifier">Statics</span></a></a><span>
</span><a name="line-203"></a><span>       </span><a href="CLabel.html#CLabel"><span class="hs-identifier hs-type">CLabel</span></a><span>      </span><span class="hs-comment">-- Label of statics</span><span>
</span><a name="line-204"></a><span>       </span><span class="hs-special">[</span><a href="Cmm.html#CmmStatic"><span class="hs-identifier hs-type">CmmStatic</span></a><span class="hs-special">]</span><span> </span><span class="hs-comment">-- The static data itself</span><span>
</span><a name="line-205"></a><span>
</span><a name="line-206"></a><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><a name="line-207"></a><span class="hs-comment">-- Basic blocks consisting of lists</span><span>
</span><a name="line-208"></a><span>
</span><a name="line-209"></a><span class="hs-comment">-- These are used by the LLVM and NCG backends, when populating Cmm</span><span>
</span><a name="line-210"></a><span class="hs-comment">-- with lists of instructions.</span><span>
</span><a name="line-211"></a><span>
</span><a name="line-212"></a><span class="hs-keyword">data</span><span> </span><a name="GenBasicBlock"><a href="Cmm.html#GenBasicBlock"><span class="hs-identifier">GenBasicBlock</span></a></a><span> </span><a name="local-6989586621680048020"><a href="#local-6989586621680048020"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="BasicBlock"><a href="Cmm.html#BasicBlock"><span class="hs-identifier">BasicBlock</span></a></a><span> </span><a href="BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621680048020"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">]</span><span>
</span><a name="line-213"></a><span>
</span><a name="line-214"></a><span class="hs-comment">-- | The branch block id is that of the first block in</span><span>
</span><a name="line-215"></a><span class="hs-comment">-- the branch, which is that branch's entry point</span><span>
</span><a name="line-216"></a><span class="hs-identifier">blockId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Cmm.html#GenBasicBlock"><span class="hs-identifier hs-type">GenBasicBlock</span></a><span> </span><a href="#local-6989586621680048032"><span class="hs-identifier hs-type">i</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a><span>
</span><a name="line-217"></a><a name="blockId"><a href="Cmm.html#blockId"><span class="hs-identifier">blockId</span></a></a><span> </span><span class="hs-special">(</span><a href="Cmm.html#BasicBlock"><span class="hs-identifier hs-var">BasicBlock</span></a><span> </span><a name="local-6989586621680048038"><a href="#local-6989586621680048038"><span class="hs-identifier">blk_id</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680048038"><span class="hs-identifier hs-var">blk_id</span></a><span>
</span><a name="line-218"></a><span>
</span><a name="line-219"></a><span class="hs-keyword">newtype</span><span> </span><a name="ListGraph"><a href="Cmm.html#ListGraph"><span class="hs-identifier">ListGraph</span></a></a><span> </span><a name="local-6989586621680048019"><a href="#local-6989586621680048019"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="ListGraph"><a href="Cmm.html#ListGraph"><span class="hs-identifier">ListGraph</span></a></a><span> </span><span class="hs-special">[</span><a href="Cmm.html#GenBasicBlock"><span class="hs-identifier hs-type">GenBasicBlock</span></a><span> </span><a href="#local-6989586621680048019"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">]</span><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Outputable</span><span> </span><a href="#local-6989586621680048029"><span class="hs-identifier hs-type">instr</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Outputable</span><span> </span><span class="hs-special">(</span><a href="Cmm.html#ListGraph"><span class="hs-identifier hs-type">ListGraph</span></a><span> </span><a href="#local-6989586621680048029"><span class="hs-identifier hs-type">instr</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-222"></a><span>    </span><a name="local-8214565720323806217"><span class="hs-identifier">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Cmm.html#ListGraph"><span class="hs-identifier hs-var">ListGraph</span></a><span> </span><a name="local-6989586621680048030"><a href="#local-6989586621680048030"><span class="hs-identifier">blocks</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">vcat</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621680048030"><span class="hs-identifier hs-var">blocks</span></a><span class="hs-special">)</span><span>
</span><a name="line-223"></a><span>
</span><a name="line-224"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Outputable</span><span> </span><a href="#local-6989586621680048028"><span class="hs-identifier hs-type">instr</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Outputable</span><span> </span><span class="hs-special">(</span><a href="Cmm.html#GenBasicBlock"><span class="hs-identifier hs-type">GenBasicBlock</span></a><span> </span><a href="#local-6989586621680048028"><span class="hs-identifier hs-type">instr</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-225"></a><span>    </span><a name="local-8214565720323806217"><span class="hs-identifier">ppr</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Cmm.html#pprBBlock"><span class="hs-identifier hs-var">pprBBlock</span></a><span>
</span><a name="line-226"></a><span>
</span><a name="line-227"></a><span class="hs-identifier">pprBBlock</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Outputable</span><span> </span><a href="#local-6989586621680048031"><span class="hs-identifier hs-type">stmt</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Cmm.html#GenBasicBlock"><span class="hs-identifier hs-type">GenBasicBlock</span></a><span> </span><a href="#local-6989586621680048031"><span class="hs-identifier hs-type">stmt</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SDoc</span><span>
</span><a name="line-228"></a><a name="pprBBlock"><a href="Cmm.html#pprBBlock"><span class="hs-identifier">pprBBlock</span></a></a><span> </span><span class="hs-special">(</span><a href="Cmm.html#BasicBlock"><span class="hs-identifier hs-var">BasicBlock</span></a><span> </span><a name="local-6989586621680048039"><a href="#local-6989586621680048039"><span class="hs-identifier">ident</span></a></a><span> </span><a name="local-6989586621680048040"><a href="#local-6989586621680048040"><span class="hs-identifier">stmts</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-229"></a><span>    </span><span class="hs-identifier hs-var">hang</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621680048039"><span class="hs-identifier hs-var">ident</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">colon</span><span class="hs-special">)</span><span> </span><span class="hs-number">4</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">vcat</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">ppr</span><span> </span><a href="#local-6989586621680048040"><span class="hs-identifier hs-var">stmts</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-230"></a><span>
</span><a name="line-231"></a></pre></body></html>