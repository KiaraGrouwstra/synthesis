<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-missing-fields #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE DeriveFunctor #-}</span><span>
</span><a name="line-3"></a><span>
</span><a name="line-4"></a><span class="hs-comment">{-|

`d`, `dd`, and `dump` are aliases of the same `QuasiQuoter`. you can choose to
imort just one of them:

@
import Debug.Dump (dd)
@

Example usage:

@
{&amp;#45;\# LANGUAGE QuasiQuotes \#&amp;#45;}

import Debug.Dump

main = print [d|a, a+1, map (+a) [1..3]|]
  where a = 2
@

which prints:

@
(a) = 2   (a+1) = 3       (map (+a) [1..3]) = [3,4,5]
@

by turnint this String

@
&quot;a, a+1, map (+a) [1..3]&quot;
@

into this expression

@
( &quot;(a) = &quot; ++ show (a)            ++ &quot;\t  &quot; ++
  &quot;(a+1) = &quot; ++ show (a + 1)      ++ &quot;\t  &quot; ++
  &quot;(map (+a) [1..3]) = &quot; ++ show (map (+ a) [1 .. 3])
)
@

-}</span><span>
</span><a name="line-46"></a><span>
</span><a name="line-47"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Debug.Dump</span><span> </span><span class="hs-special">(</span><a href="Debug.Dump.html#d"><span class="hs-identifier hs-var">d</span></a><span class="hs-special">,</span><span> </span><a href="Debug.Dump.html#dd"><span class="hs-identifier hs-var">dd</span></a><span class="hs-special">,</span><span> </span><a href="Debug.Dump.html#dump"><span class="hs-identifier hs-var">dump</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-48"></a><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span> </span><a href="Internal.Utils.html"><span class="hs-identifier">Internal.Utils</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="Internal.Utils.html#%24%3E"><span class="hs-operator hs-var">$&gt;</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-50"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="Internal.Utils.html"><span class="hs-identifier">Internal.Utils</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Utils</span><span>
</span><a name="line-51"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="Internal.Parser.html"><span class="hs-identifier">Internal.Parser</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Parser</span><span>
</span><a name="line-52"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.List</span><span>
</span><a name="line-53"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Debug.Trace</span><span>
</span><a name="line-54"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Language.Haskell.TH</span><span>
</span><a name="line-55"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Language.Haskell.TH.Quote</span><span>
</span><a name="line-56"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Language.Haskell.Meta.Parse</span><span>
</span><a name="line-57"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Text.InterpolatedString.Perl6</span><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span class="hs-comment">-- | This is the main `QuasiQuoter`.</span><span>
</span><a name="line-60"></a><span class="hs-identifier">dump</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">QuasiQuoter</span><span>
</span><a name="line-61"></a><a name="dump"><a href="Debug.Dump.html#dump"><span class="hs-identifier">dump</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">QuasiQuoter</span><span> </span><span class="hs-special">{</span><span class="hs-identifier">quoteExp</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Debug.Dump.html#process"><span class="hs-identifier hs-var">process</span></a><span class="hs-special">}</span><span>
</span><a name="line-62"></a><span>
</span><a name="line-63"></a><span class="hs-comment">-- | Shorthand for `dump`.</span><span>
</span><a name="line-64"></a><a name="d"><a href="Debug.Dump.html#d"><span class="hs-identifier">d</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Debug.Dump.html#dump"><span class="hs-identifier hs-var">dump</span></a><span>
</span><a name="line-65"></a><span>
</span><a name="line-66"></a><span class="hs-comment">-- | Shorthand for `dump`.</span><span>
</span><a name="line-67"></a><a name="dd"><a href="Debug.Dump.html#dd"><span class="hs-identifier">dd</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Debug.Dump.html#dump"><span class="hs-identifier hs-var">dump</span></a><span>
</span><a name="line-68"></a><span>
</span><a name="line-69"></a><span>
</span><a name="line-70"></a><span class="hs-keyword">newtype</span><span> </span><a name="HsExp"><a href="Debug.Dump.html#HsExp"><span class="hs-identifier">HsExp</span></a></a><span> </span><a name="local-6989586621679038940"><a href="#local-6989586621679038940"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="HsExp"><a href="Debug.Dump.html#HsExp"><span class="hs-identifier">HsExp</span></a></a><span> </span><a href="#local-6989586621679038940"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Functor</span><span class="hs-special">)</span><span>
</span><a name="line-71"></a><a name="unHsExp"><a href="Debug.Dump.html#unHsExp"><span class="hs-identifier">unHsExp</span></a></a><span> </span><span class="hs-special">(</span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-var">HsExp</span></a><span> </span><a name="local-6989586621679048195"><a href="#local-6989586621679048195"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679048195"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-74"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-var">HsExp</span></a><span>
</span><a name="line-75"></a><span>  </span><span class="hs-special">(</span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-var">HsExp</span></a><span> </span><a name="local-6989586621679038941"><a href="#local-6989586621679038941"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><span class="hs-special">(</span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-var">HsExp</span></a><span> </span><a name="local-6989586621679038942"><a href="#local-6989586621679038942"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-var">HsExp</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679038941"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679038942"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span class="hs-identifier">process</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Q</span><span> </span><span class="hs-identifier hs-type">Exp</span><span>
</span><a name="line-78"></a><a name="process"><a href="Debug.Dump.html#process"><span class="hs-identifier">process</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-79"></a><span>  </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><a href="Debug.Dump.html#splitOnCommas"><span class="hs-identifier hs-var">splitOnCommas</span></a><span>
</span><a name="line-80"></a><span>  </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><span class="hs-identifier hs-var">map</span><span> </span><a href="Debug.Dump.html#nameAndValue"><span class="hs-identifier hs-var">nameAndValue</span></a><span>
</span><a name="line-81"></a><span>  </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><a href="Debug.Dump.html#joinAsColumns"><span class="hs-identifier hs-var">joinAsColumns</span></a><span>
</span><a name="line-82"></a><span>  </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><a href="Debug.Dump.html#wrapInParens"><span class="hs-identifier hs-var">wrapInParens</span></a><span>
</span><a name="line-83"></a><span>  </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><a href="Debug.Dump.html#parseHsStrToQQExp"><span class="hs-identifier hs-var">parseHsStrToQQExp</span></a><span>
</span><a name="line-84"></a><span>  </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><span class="hs-identifier hs-var">return</span><span>
</span><a name="line-85"></a><span>
</span><a name="line-86"></a><span class="hs-identifier">splitOnCommas</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-87"></a><a name="splitOnCommas"><a href="Debug.Dump.html#splitOnCommas"><span class="hs-identifier">splitOnCommas</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Internal.Parser.html#splitOnCommas"><span class="hs-identifier hs-var">Parser.splitOnCommas</span></a><span> </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><span class="hs-identifier hs-var">map</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-var">HsExp</span></a><span>
</span><a name="line-88"></a><span>
</span><a name="line-89"></a><span class="hs-identifier">nameAndValue</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-90"></a><a name="nameAndValue"><a href="Debug.Dump.html#nameAndValue"><span class="hs-identifier">nameAndValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679048196"><a href="#local-6989586621679048196"><span class="hs-identifier">str</span></a></a><span class="hs-glyph">-&gt;</span><span> </span><span class="">[qq|&quot;({Utils.strip str}) = &quot; ++ show ($str)|]</span><span>
</span><a name="line-91"></a><span>
</span><a name="line-92"></a><span class="hs-identifier">joinAsColumns</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-93"></a><a name="joinAsColumns"><a href="Debug.Dump.html#joinAsColumns"><span class="hs-identifier">joinAsColumns</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">sequenceA</span><span> </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">intercalate</span><span> </span><span class="">[q| ++ &quot;\t  &quot; ++ |]</span><span class="hs-special">)</span><span>
</span><a name="line-94"></a><span>
</span><a name="line-95"></a><span class="hs-identifier">wrapInParens</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-96"></a><a name="wrapInParens"><a href="Debug.Dump.html#wrapInParens"><span class="hs-identifier">wrapInParens</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><a href="Internal.Utils.html#wrapInParens"><span class="hs-identifier hs-var">Utils.wrapInParens</span></a><span>
</span><a name="line-97"></a><span>
</span><a name="line-98"></a><span class="hs-identifier">parseHsStrToQQExp</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Debug.Dump.html#HsExp"><span class="hs-identifier hs-type">HsExp</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Exp</span><span>
</span><a name="line-99"></a><a name="parseHsStrToQQExp"><a href="Debug.Dump.html#parseHsStrToQQExp"><span class="hs-identifier">parseHsStrToQQExp</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Debug.Dump.html#unHsExp"><span class="hs-identifier hs-var">unHsExp</span></a><span> </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><span class="hs-identifier hs-var">parseExp</span><span> </span><a href="Internal.Utils.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span> </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-100"></a><span>
</span><a name="line-101"></a><span>
</span><a name="line-102"></a></pre></body></html>