<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Distribution.Simple.SrcDist</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Distribution.Simple.SrcDist.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Cabal-2.4.1.0: A framework for packaging Haskell software</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Simon Marlow 2004</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>cabal-devel@haskell.org</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Distribution.Simple.SrcDist</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">The top level action</a><ul><li><a href="#g:2">Parts of <code>sdist</code></a></li><li><a href="#g:3">Snapshots</a></li></ul></li><li><a href="#g:4">Extracting the source files</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This handles the <code>sdist</code> command. The module exports an <code><a href="Distribution-Simple-SrcDist.html#v:sdist" title="Distribution.Simple.SrcDist">sdist</a></code> action but
 also some of the phases that make it up so that other tools can use just the
 bits they need. In particular the preparation of the tree of files to go
 into the source tarball is separated from actually building the source
 tarball.</p><p>The <code><a href="Distribution-Simple-SrcDist.html#v:createArchive" title="Distribution.Simple.SrcDist">createArchive</a></code> action uses the external <code>tar</code> program and assumes that
 it accepts the <code>-z</code> flag. Neither of these assumptions are valid on Windows.
 The <code><a href="Distribution-Simple-SrcDist.html#v:sdist" title="Distribution.Simple.SrcDist">sdist</a></code> action now also does some distribution QA checks.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:sdist">sdist</a> :: <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-Setup.html#t:SDistFlags" title="Distribution.Simple.Setup">SDistFlags</a> -&gt; (<a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a>) -&gt; [<a href="Distribution-Simple-PreProcess.html#t:PPSuffixHandler" title="Distribution.Simple.PreProcess">PPSuffixHandler</a>] -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ()</li><li class="src short"><a href="#v:printPackageProblems">printPackageProblems</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ()</li><li class="src short"><a href="#v:prepareTree">prepareTree</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; [<a href="Distribution-Simple-PreProcess.html#t:PPSuffixHandler" title="Distribution.Simple.PreProcess">PPSuffixHandler</a>] -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ()</li><li class="src short"><a href="#v:createArchive">createArchive</a> :: CreateArchiveFun</li><li class="src short"><a href="#v:prepareSnapshotTree">prepareSnapshotTree</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; [<a href="Distribution-Simple-PreProcess.html#t:PPSuffixHandler" title="Distribution.Simple.PreProcess">PPSuffixHandler</a>] -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ()</li><li class="src short"><a href="#v:snapshotPackage">snapshotPackage</a> :: <a href="../time-1.8.0.2/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a></li><li class="src short"><a href="#v:snapshotVersion">snapshotVersion</a> :: <a href="../time-1.8.0.2/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a> -&gt; <a href="Distribution-Types-Version.html#t:Version" title="Distribution.Types.Version">Version</a> -&gt; <a href="Distribution-Types-Version.html#t:Version" title="Distribution.Types.Version">Version</a></li><li class="src short"><a href="#v:dateToSnapshotNumber">dateToSnapshotNumber</a> :: <a href="../time-1.8.0.2/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a></li><li class="src short"><a href="#v:listPackageSources">listPackageSources</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; [<a href="Distribution-Simple-PreProcess.html#t:PPSuffixHandler" title="Distribution.Simple.PreProcess">PPSuffixHandler</a>] -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ([<a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a>], [<a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a>])</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>The top level action</h1></a><div class="top"><p class="src"><a id="v:sdist" class="def">sdist</a> <a href="src/Distribution.Simple.SrcDist.html#sdist" class="link">Source</a> <a href="#v:sdist" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a></td><td class="doc"><p>information from the tarball</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></td><td class="doc"><p>Information from configure</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-Setup.html#t:SDistFlags" title="Distribution.Simple.Setup">SDistFlags</a></td><td class="doc"><p>verbosity &amp; snapshot</p></td></tr><tr><td class="src">-&gt; (<a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a>)</td><td class="doc"><p>build prefix (temp dir)</p></td></tr><tr><td class="src">-&gt; [<a href="Distribution-Simple-PreProcess.html#t:PPSuffixHandler" title="Distribution.Simple.PreProcess">PPSuffixHandler</a>]</td><td class="doc"><p>extra preprocessors (includes suffixes)</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create a source distribution.</p></div></div><a href="#g:2" id="g:2"><h2>Parts of <code><a href="Distribution-Simple-SrcDist.html#v:sdist" title="Distribution.Simple.SrcDist">sdist</a></code></h2></a><div class="top"><p class="src"><a id="v:printPackageProblems" class="def">printPackageProblems</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> () <a href="src/Distribution.Simple.SrcDist.html#printPackageProblems" class="link">Source</a> <a href="#v:printPackageProblems" class="selflink">#</a></p><div class="doc"><p>Note: must be called with the CWD set to the directory containing
 the '.cabal' file.</p></div></div><div class="top"><p class="src"><a id="v:prepareTree" class="def">prepareTree</a> <a href="src/Distribution.Simple.SrcDist.html#prepareTree" class="link">Source</a> <a href="#v:prepareTree" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a></td><td class="doc"><p>verbosity</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a></td><td class="doc"><p>info from the cabal file</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>source tree to populate</p></td></tr><tr><td class="src">-&gt; [<a href="Distribution-Simple-PreProcess.html#t:PPSuffixHandler" title="Distribution.Simple.PreProcess">PPSuffixHandler</a>]</td><td class="doc"><p>extra preprocessors (includes suffixes)</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Prepare a directory tree of source files.</p></div></div><div class="top"><p class="src"><a id="v:createArchive" class="def">createArchive</a> :: CreateArchiveFun <a href="src/Distribution.Simple.SrcDist.html#createArchive" class="link">Source</a> <a href="#v:createArchive" class="selflink">#</a></p><div class="doc"><p>Create an archive from a tree of source files, and clean up the tree.</p></div></div><a href="#g:3" id="g:3"><h2>Snapshots</h2></a><div class="top"><p class="src"><a id="v:prepareSnapshotTree" class="def">prepareSnapshotTree</a> <a href="src/Distribution.Simple.SrcDist.html#prepareSnapshotTree" class="link">Source</a> <a href="#v:prepareSnapshotTree" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a></td><td class="doc"><p>verbosity</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a></td><td class="doc"><p>info from the cabal file</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>source tree to populate</p></td></tr><tr><td class="src">-&gt; [<a href="Distribution-Simple-PreProcess.html#t:PPSuffixHandler" title="Distribution.Simple.PreProcess">PPSuffixHandler</a>]</td><td class="doc"><p>extra preprocessors (includes
 suffixes)</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Prepare a directory tree of source files for a snapshot version.
 It is expected that the appropriate snapshot version has already been set
 in the package description, eg using <code><a href="Distribution-Simple-SrcDist.html#v:snapshotPackage" title="Distribution.Simple.SrcDist">snapshotPackage</a></code> or <code><a href="Distribution-Simple-SrcDist.html#v:snapshotVersion" title="Distribution.Simple.SrcDist">snapshotVersion</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:snapshotPackage" class="def">snapshotPackage</a> :: <a href="../time-1.8.0.2/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> <a href="src/Distribution.Simple.SrcDist.html#snapshotPackage" class="link">Source</a> <a href="#v:snapshotPackage" class="selflink">#</a></p><div class="doc"><p>Modifies a <code><a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a></code> by appending a snapshot number
 corresponding to the given date.</p></div></div><div class="top"><p class="src"><a id="v:snapshotVersion" class="def">snapshotVersion</a> :: <a href="../time-1.8.0.2/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a> -&gt; <a href="Distribution-Types-Version.html#t:Version" title="Distribution.Types.Version">Version</a> -&gt; <a href="Distribution-Types-Version.html#t:Version" title="Distribution.Types.Version">Version</a> <a href="src/Distribution.Simple.SrcDist.html#snapshotVersion" class="link">Source</a> <a href="#v:snapshotVersion" class="selflink">#</a></p><div class="doc"><p>Modifies a <code><a href="Distribution-Types-Version.html#t:Version" title="Distribution.Types.Version">Version</a></code> by appending a snapshot number corresponding
 to the given date.</p></div></div><div class="top"><p class="src"><a id="v:dateToSnapshotNumber" class="def">dateToSnapshotNumber</a> :: <a href="../time-1.8.0.2/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> <a href="src/Distribution.Simple.SrcDist.html#dateToSnapshotNumber" class="link">Source</a> <a href="#v:dateToSnapshotNumber" class="selflink">#</a></p><div class="doc"><p>Given a date produce a corresponding integer representation.
 For example given a date <code>18<em>03</em>2008</code> produce the number <code>20080318</code>.</p></div></div><a href="#g:4" id="g:4"><h1>Extracting the source files</h1></a><div class="top"><p class="src"><a id="v:listPackageSources" class="def">listPackageSources</a> <a href="src/Distribution.Simple.SrcDist.html#listPackageSources" class="link">Source</a> <a href="#v:listPackageSources" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a></td><td class="doc"><p>verbosity</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a></td><td class="doc"><p>info from the cabal file</p></td></tr><tr><td class="src">-&gt; [<a href="Distribution-Simple-PreProcess.html#t:PPSuffixHandler" title="Distribution.Simple.PreProcess">PPSuffixHandler</a>]</td><td class="doc"><p>extra preprocessors (include
 suffixes)</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ([<a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a>], [<a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a>])</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>List all source files of a package. Returns a tuple of lists: first
 component is a list of ordinary files, second one is a list of those files
 that may be executable.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>