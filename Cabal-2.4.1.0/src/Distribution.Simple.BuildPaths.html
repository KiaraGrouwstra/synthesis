<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><a name="line-3"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-4"></a><span class="hs-comment">-- |</span><span>
</span><a name="line-5"></a><span class="hs-comment">-- Module      :  Distribution.Simple.BuildPaths</span><span>
</span><a name="line-6"></a><span class="hs-comment">-- Copyright   :  Isaac Jones 2003-2004,</span><span>
</span><a name="line-7"></a><span class="hs-comment">--                Duncan Coutts 2008</span><span>
</span><a name="line-8"></a><span class="hs-comment">-- License     :  BSD3</span><span>
</span><a name="line-9"></a><span class="hs-comment">--</span><span>
</span><a name="line-10"></a><span class="hs-comment">-- Maintainer  :  cabal-devel@haskell.org</span><span>
</span><a name="line-11"></a><span class="hs-comment">-- Portability :  portable</span><span>
</span><a name="line-12"></a><span class="hs-comment">--</span><span>
</span><a name="line-13"></a><span class="hs-comment">-- A bunch of dirs, paths and file names used for intermediate build steps.</span><span>
</span><a name="line-14"></a><span class="hs-comment">--</span><span>
</span><a name="line-15"></a><span>
</span><a name="line-16"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Distribution.Simple.BuildPaths</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-17"></a><span>    </span><a href="Distribution.Simple.Setup.html#defaultDistPref"><span class="hs-identifier hs-var">defaultDistPref</span></a><span class="hs-special">,</span><span> </span><a href="Distribution.Simple.BuildPaths.html#srcPref"><span class="hs-identifier hs-var">srcPref</span></a><span class="hs-special">,</span><span>
</span><a name="line-18"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#haddockDirName"><span class="hs-identifier hs-var">haddockDirName</span></a><span class="hs-special">,</span><span> </span><a href="Distribution.Simple.BuildPaths.html#hscolourPref"><span class="hs-identifier hs-var">hscolourPref</span></a><span class="hs-special">,</span><span> </span><a href="Distribution.Simple.BuildPaths.html#haddockPref"><span class="hs-identifier hs-var">haddockPref</span></a><span class="hs-special">,</span><span>
</span><a name="line-19"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#autogenModulesDir"><span class="hs-identifier hs-var">autogenModulesDir</span></a><span class="hs-special">,</span><span>
</span><a name="line-20"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#autogenPackageModulesDir"><span class="hs-identifier hs-var">autogenPackageModulesDir</span></a><span class="hs-special">,</span><span>
</span><a name="line-21"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#autogenComponentModulesDir"><span class="hs-identifier hs-var">autogenComponentModulesDir</span></a><span class="hs-special">,</span><span>
</span><a name="line-22"></a><span>
</span><a name="line-23"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#autogenModuleName"><span class="hs-identifier hs-var">autogenModuleName</span></a><span class="hs-special">,</span><span>
</span><a name="line-24"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#autogenPathsModuleName"><span class="hs-identifier hs-var">autogenPathsModuleName</span></a><span class="hs-special">,</span><span>
</span><a name="line-25"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#cppHeaderName"><span class="hs-identifier hs-var">cppHeaderName</span></a><span class="hs-special">,</span><span>
</span><a name="line-26"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#haddockName"><span class="hs-identifier hs-var">haddockName</span></a><span class="hs-special">,</span><span>
</span><a name="line-27"></a><span>
</span><a name="line-28"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#mkGenericStaticLibName"><span class="hs-identifier hs-var">mkGenericStaticLibName</span></a><span class="hs-special">,</span><span>
</span><a name="line-29"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#mkLibName"><span class="hs-identifier hs-var">mkLibName</span></a><span class="hs-special">,</span><span>
</span><a name="line-30"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#mkProfLibName"><span class="hs-identifier hs-var">mkProfLibName</span></a><span class="hs-special">,</span><span>
</span><a name="line-31"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#mkGenericSharedLibName"><span class="hs-identifier hs-var">mkGenericSharedLibName</span></a><span class="hs-special">,</span><span>
</span><a name="line-32"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#mkSharedLibName"><span class="hs-identifier hs-var">mkSharedLibName</span></a><span class="hs-special">,</span><span>
</span><a name="line-33"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#mkStaticLibName"><span class="hs-identifier hs-var">mkStaticLibName</span></a><span class="hs-special">,</span><span>
</span><a name="line-34"></a><span>
</span><a name="line-35"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier hs-var">exeExtension</span></a><span class="hs-special">,</span><span>
</span><a name="line-36"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier hs-var">objExtension</span></a><span class="hs-special">,</span><span>
</span><a name="line-37"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#dllExtension"><span class="hs-identifier hs-var">dllExtension</span></a><span class="hs-special">,</span><span>
</span><a name="line-38"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#staticLibExtension"><span class="hs-identifier hs-var">staticLibExtension</span></a><span class="hs-special">,</span><span>
</span><a name="line-39"></a><span>    </span><span class="hs-comment">-- * Source files &amp; build directories</span><span>
</span><a name="line-40"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#getSourceFiles"><span class="hs-identifier hs-var">getSourceFiles</span></a><span class="hs-special">,</span><span> </span><a href="Distribution.Simple.BuildPaths.html#getLibSourceFiles"><span class="hs-identifier hs-var">getLibSourceFiles</span></a><span class="hs-special">,</span><span> </span><a href="Distribution.Simple.BuildPaths.html#getExeSourceFiles"><span class="hs-identifier hs-var">getExeSourceFiles</span></a><span class="hs-special">,</span><span>
</span><a name="line-41"></a><span>    </span><a href="Distribution.Simple.BuildPaths.html#getFLibSourceFiles"><span class="hs-identifier hs-var">getFLibSourceFiles</span></a><span class="hs-special">,</span><span> </span><a href="Distribution.Simple.BuildPaths.html#exeBuildDir"><span class="hs-identifier hs-var">exeBuildDir</span></a><span class="hs-special">,</span><span> </span><a href="Distribution.Simple.BuildPaths.html#flibBuildDir"><span class="hs-identifier hs-var">flibBuildDir</span></a><span class="hs-special">,</span><span>
</span><a name="line-42"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-43"></a><span>
</span><a name="line-44"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-45"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Compat.Prelude.html"><span class="hs-identifier">Distribution.Compat.Prelude</span></a><span>
</span><a name="line-46"></a><span>
</span><a name="line-47"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Types.ForeignLib.html"><span class="hs-identifier">Distribution.Types.ForeignLib</span></a><span>
</span><a name="line-48"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Types.UnqualComponentName.html"><span class="hs-identifier">Distribution.Types.UnqualComponentName</span></a><span> </span><span class="hs-special">(</span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a><span class="hs-special">)</span><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Package.html"><span class="hs-identifier">Distribution.Package</span></a><span>
</span><a name="line-50"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.ModuleName.html"><span class="hs-identifier">Distribution.ModuleName</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">ModuleName</span><span>
</span><a name="line-51"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Compiler.html"><span class="hs-identifier">Distribution.Compiler</span></a><span>
</span><a name="line-52"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.PackageDescription.html"><span class="hs-identifier">Distribution.PackageDescription</span></a><span>
</span><a name="line-53"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Simple.LocalBuildInfo.html"><span class="hs-identifier">Distribution.Simple.LocalBuildInfo</span></a><span>
</span><a name="line-54"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Simple.Setup.html"><span class="hs-identifier">Distribution.Simple.Setup</span></a><span>
</span><a name="line-55"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Text.html"><span class="hs-identifier">Distribution.Text</span></a><span>
</span><a name="line-56"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.System.html"><span class="hs-identifier">Distribution.System</span></a><span>
</span><a name="line-57"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Verbosity.html"><span class="hs-identifier">Distribution.Verbosity</span></a><span>
</span><a name="line-58"></a><span class="hs-keyword">import</span><span> </span><a href="Distribution.Simple.Utils.html"><span class="hs-identifier">Distribution.Simple.Utils</span></a><span>
</span><a name="line-59"></a><span>
</span><a name="line-60"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.FilePath</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;/&gt;</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;.&gt;</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">normalise</span><span class="hs-special">)</span><span>
</span><a name="line-61"></a><span>
</span><a name="line-62"></a><span class="hs-comment">-- ---------------------------------------------------------------------------</span><span>
</span><a name="line-63"></a><span class="hs-comment">-- Build directories and files</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span class="hs-identifier">srcPref</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-66"></a><a name="srcPref"><a href="Distribution.Simple.BuildPaths.html#srcPref"><span class="hs-identifier">srcPref</span></a></a><span> </span><a name="local-6989586621679449463"><a href="#local-6989586621679449463"><span class="hs-identifier">distPref</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679449463"><span class="hs-identifier hs-var">distPref</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><span class="hs-string">&quot;src&quot;</span><span>
</span><a name="line-67"></a><span>
</span><a name="line-68"></a><span class="hs-identifier">hscolourPref</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Simple.Setup.html#HaddockTarget"><span class="hs-identifier hs-type">HaddockTarget</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-69"></a><a name="hscolourPref"><a href="Distribution.Simple.BuildPaths.html#hscolourPref"><span class="hs-identifier">hscolourPref</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#haddockPref"><span class="hs-identifier hs-var">haddockPref</span></a><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span class="hs-comment">-- | This is the name of the directory in which the generated haddocks</span><span>
</span><a name="line-72"></a><span class="hs-comment">-- should be stored. It does not include the @&lt;dist&gt;/doc/html@ prefix.</span><span>
</span><a name="line-73"></a><span class="hs-identifier">haddockDirName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Simple.Setup.html#HaddockTarget"><span class="hs-identifier hs-type">HaddockTarget</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-74"></a><a name="haddockDirName"><a href="Distribution.Simple.BuildPaths.html#haddockDirName"><span class="hs-identifier">haddockDirName</span></a></a><span> </span><a href="Distribution.Simple.Setup.html#ForDevelopment"><span class="hs-identifier hs-var">ForDevelopment</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Distribution.Package.html#packageName"><span class="hs-identifier hs-var">packageName</span></a><span>
</span><a name="line-75"></a><span class="hs-identifier">haddockDirName</span><span> </span><a href="Distribution.Simple.Setup.html#ForHackage"><span class="hs-identifier hs-var">ForHackage</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;-docs&quot;</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Distribution.Package.html#packageId"><span class="hs-identifier hs-var">packageId</span></a><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span class="hs-comment">-- | The directory to which generated haddock documentation should be written.</span><span>
</span><a name="line-78"></a><span class="hs-identifier">haddockPref</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Simple.Setup.html#HaddockTarget"><span class="hs-identifier hs-type">HaddockTarget</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-79"></a><a name="haddockPref"><a href="Distribution.Simple.BuildPaths.html#haddockPref"><span class="hs-identifier">haddockPref</span></a></a><span> </span><a name="local-6989586621679449464"><a href="#local-6989586621679449464"><span class="hs-identifier">haddockTarget</span></a></a><span> </span><a name="local-6989586621679449465"><a href="#local-6989586621679449465"><span class="hs-identifier">distPref</span></a></a><span> </span><a name="local-6989586621679449466"><a href="#local-6989586621679449466"><span class="hs-identifier">pkg_descr</span></a></a><span>
</span><a name="line-80"></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679449465"><span class="hs-identifier hs-var">distPref</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><span class="hs-string">&quot;doc&quot;</span><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><span class="hs-string">&quot;html&quot;</span><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><a href="Distribution.Simple.BuildPaths.html#haddockDirName"><span class="hs-identifier hs-var">haddockDirName</span></a><span> </span><a href="#local-6989586621679449464"><span class="hs-identifier hs-var">haddockTarget</span></a><span> </span><a href="#local-6989586621679449466"><span class="hs-identifier hs-var">pkg_descr</span></a><span>
</span><a name="line-81"></a><span>
</span><a name="line-82"></a><span class="hs-comment">-- | The directory in which we put auto-generated modules for EVERY</span><span>
</span><a name="line-83"></a><span class="hs-comment">-- component in the package.  See deprecation notice.</span><span>
</span><a name="line-84"></a><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">autogenModulesDir</span><span> </span><span class="hs-pragma">&quot;If you can, use 'autogenComponentModulesDir' instead, but if you really wanted package-global generated modules, use 'autogenPackageModulesDir'.  In Cabal 2.0, we avoid using autogenerated files which apply to all components, because the information you often want in these files, e.g., dependency information, is best specified per component, so that reconfiguring a different component (e.g., enabling tests) doesn't force the entire to be rebuilt.  'autogenPackageModulesDir' still provides a place to put files you want to apply to the entire package, but most users of 'autogenModulesDir' should seriously consider 'autogenComponentModulesDir' if you really wanted the module to apply to one component.&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-85"></a><span class="hs-identifier">autogenModulesDir</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-86"></a><a name="autogenModulesDir"><a href="Distribution.Simple.BuildPaths.html#autogenModulesDir"><span class="hs-identifier">autogenModulesDir</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#autogenPackageModulesDir"><span class="hs-identifier hs-var">autogenPackageModulesDir</span></a><span>
</span><a name="line-87"></a><span>
</span><a name="line-88"></a><span class="hs-comment">-- | The directory in which we put auto-generated modules for EVERY</span><span>
</span><a name="line-89"></a><span class="hs-comment">-- component in the package.</span><span>
</span><a name="line-90"></a><span class="hs-identifier">autogenPackageModulesDir</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-91"></a><a name="autogenPackageModulesDir"><a href="Distribution.Simple.BuildPaths.html#autogenPackageModulesDir"><span class="hs-identifier">autogenPackageModulesDir</span></a></a><span> </span><a name="local-6989586621679449467"><a href="#local-6989586621679449467"><span class="hs-identifier">lbi</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">buildDir</span><span> </span><a href="#local-6989586621679449467"><span class="hs-identifier hs-var">lbi</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><span class="hs-string">&quot;global-autogen&quot;</span><span>
</span><a name="line-92"></a><span>
</span><a name="line-93"></a><span class="hs-comment">-- | The directory in which we put auto-generated modules for a</span><span>
</span><a name="line-94"></a><span class="hs-comment">-- particular component.</span><span>
</span><a name="line-95"></a><span class="hs-identifier">autogenComponentModulesDir</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-96"></a><a name="autogenComponentModulesDir"><a href="Distribution.Simple.BuildPaths.html#autogenComponentModulesDir"><span class="hs-identifier">autogenComponentModulesDir</span></a></a><span> </span><a name="local-6989586621679449468"><a href="#local-6989586621679449468"><span class="hs-identifier">lbi</span></a></a><span> </span><a name="local-6989586621679449469"><a href="#local-6989586621679449469"><span class="hs-identifier">clbi</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.LocalBuildInfo.html#componentBuildDir"><span class="hs-identifier hs-var">componentBuildDir</span></a><span> </span><a href="#local-6989586621679449468"><span class="hs-identifier hs-var">lbi</span></a><span> </span><a href="#local-6989586621679449469"><span class="hs-identifier hs-var">clbi</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><span class="hs-string">&quot;autogen&quot;</span><span>
</span><a name="line-97"></a><span class="hs-comment">-- NB: Look at 'checkForeignDeps' for where a simplified version of this</span><span>
</span><a name="line-98"></a><span class="hs-comment">-- has been copy-pasted.</span><span>
</span><a name="line-99"></a><span>
</span><a name="line-100"></a><span class="hs-identifier">cppHeaderName</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-101"></a><a name="cppHeaderName"><a href="Distribution.Simple.BuildPaths.html#cppHeaderName"><span class="hs-identifier">cppHeaderName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;cabal_macros.h&quot;</span><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">autogenModuleName</span><span> </span><span class="hs-pragma">&quot;Use autogenPathsModuleName instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-104"></a><span class="hs-comment">-- |The name of the auto-generated module associated with a package</span><span>
</span><a name="line-105"></a><span class="hs-identifier">autogenModuleName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a><span>
</span><a name="line-106"></a><a name="autogenModuleName"><a href="Distribution.Simple.BuildPaths.html#autogenModuleName"><span class="hs-identifier">autogenModuleName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#autogenPathsModuleName"><span class="hs-identifier hs-var">autogenPathsModuleName</span></a><span>
</span><a name="line-107"></a><span>
</span><a name="line-108"></a><span class="hs-comment">-- | The name of the auto-generated Paths_* module associated with a package</span><span>
</span><a name="line-109"></a><span class="hs-identifier">autogenPathsModuleName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a><span>
</span><a name="line-110"></a><a name="autogenPathsModuleName"><a href="Distribution.Simple.BuildPaths.html#autogenPathsModuleName"><span class="hs-identifier">autogenPathsModuleName</span></a></a><span> </span><a name="local-6989586621679449470"><a href="#local-6989586621679449470"><span class="hs-identifier">pkg_descr</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-111"></a><span>  </span><span class="hs-identifier hs-var">ModuleName.fromString</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-112"></a><span>    </span><span class="hs-string">&quot;Paths_&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><a href="#local-6989586621679449471"><span class="hs-identifier hs-var">fixchar</span></a><span> </span><span class="hs-special">(</span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><span class="hs-special">(</span><a href="Distribution.Package.html#packageName"><span class="hs-identifier hs-var">packageName</span></a><span> </span><a href="#local-6989586621679449470"><span class="hs-identifier hs-var">pkg_descr</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-113"></a><span>  </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679449471"><a href="#local-6989586621679449471"><span class="hs-identifier">fixchar</span></a></a><span> </span><span class="hs-char">'-'</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-char">'_'</span><span>
</span><a name="line-114"></a><span>        </span><span class="hs-identifier">fixchar</span><span> </span><a name="local-6989586621679449472"><a href="#local-6989586621679449472"><span class="hs-identifier">c</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679449472"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-115"></a><span>
</span><a name="line-116"></a><span class="hs-identifier">haddockName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.PackageDescription.html#PackageDescription"><span class="hs-identifier hs-type">PackageDescription</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-117"></a><a name="haddockName"><a href="Distribution.Simple.BuildPaths.html#haddockName"><span class="hs-identifier">haddockName</span></a></a><span> </span><a name="local-6989586621679449473"><a href="#local-6989586621679449473"><span class="hs-identifier">pkg_descr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><span class="hs-special">(</span><a href="Distribution.Package.html#packageName"><span class="hs-identifier hs-var">packageName</span></a><span> </span><a href="#local-6989586621679449473"><span class="hs-identifier hs-var">pkg_descr</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;.&gt;</span><span> </span><span class="hs-string">&quot;haddock&quot;</span><span>
</span><a name="line-118"></a><span>
</span><a name="line-119"></a><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><a name="line-120"></a><span class="hs-comment">-- Source File helper</span><span>
</span><a name="line-121"></a><span>
</span><a name="line-122"></a><span class="hs-identifier">getLibSourceFiles</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a><span>
</span><a name="line-123"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a><span>
</span><a name="line-124"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.Library.html#Library"><span class="hs-identifier hs-type">Library</span></a><span>
</span><a name="line-125"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a><span>
</span><a name="line-126"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Compat.Prelude.html#IO"><span class="hs-identifier hs-type">IO</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName.ModuleName</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-127"></a><a name="getLibSourceFiles"><a href="Distribution.Simple.BuildPaths.html#getLibSourceFiles"><span class="hs-identifier">getLibSourceFiles</span></a></a><span> </span><a name="local-6989586621679449474"><a href="#local-6989586621679449474"><span class="hs-identifier">verbosity</span></a></a><span> </span><a name="local-6989586621679449475"><a href="#local-6989586621679449475"><span class="hs-identifier">lbi</span></a></a><span> </span><a name="local-6989586621679449476"><a href="#local-6989586621679449476"><span class="hs-identifier">lib</span></a></a><span> </span><a name="local-6989586621679449477"><a href="#local-6989586621679449477"><span class="hs-identifier">clbi</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#getSourceFiles"><span class="hs-identifier hs-var">getSourceFiles</span></a><span> </span><a href="#local-6989586621679449474"><span class="hs-identifier hs-var">verbosity</span></a><span> </span><a href="#local-6989586621679449480"><span class="hs-identifier hs-var">searchpaths</span></a><span> </span><a href="#local-6989586621679449479"><span class="hs-identifier hs-var">modules</span></a><span>
</span><a name="line-128"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-129"></a><span>    </span><a name="local-6989586621679449478"><a href="#local-6989586621679449478"><span class="hs-identifier">bi</span></a></a><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">libBuildInfo</span><span> </span><a href="#local-6989586621679449476"><span class="hs-identifier hs-var">lib</span></a><span>
</span><a name="line-130"></a><span>    </span><a name="local-6989586621679449479"><a href="#local-6989586621679449479"><span class="hs-identifier">modules</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.LocalBuildInfo.html#allLibModules"><span class="hs-identifier hs-var">allLibModules</span></a><span> </span><a href="#local-6989586621679449476"><span class="hs-identifier hs-var">lib</span></a><span> </span><a href="#local-6989586621679449477"><span class="hs-identifier hs-var">clbi</span></a><span>
</span><a name="line-131"></a><span>    </span><a name="local-6989586621679449480"><a href="#local-6989586621679449480"><span class="hs-identifier">searchpaths</span></a></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.LocalBuildInfo.html#componentBuildDir"><span class="hs-identifier hs-var">componentBuildDir</span></a><span> </span><a href="#local-6989586621679449475"><span class="hs-identifier hs-var">lbi</span></a><span> </span><a href="#local-6989586621679449477"><span class="hs-identifier hs-var">clbi</span></a><span> </span><span class="hs-glyph">:</span><span> </span><span class="hs-identifier">hsSourceDirs</span><span> </span><a href="#local-6989586621679449478"><span class="hs-identifier hs-var">bi</span></a><span> </span><span class="hs-operator hs-var">++</span><span>
</span><a name="line-132"></a><span>                     </span><span class="hs-special">[</span><span> </span><a href="Distribution.Simple.BuildPaths.html#autogenComponentModulesDir"><span class="hs-identifier hs-var">autogenComponentModulesDir</span></a><span> </span><a href="#local-6989586621679449475"><span class="hs-identifier hs-var">lbi</span></a><span> </span><a href="#local-6989586621679449477"><span class="hs-identifier hs-var">clbi</span></a><span>
</span><a name="line-133"></a><span>                     </span><span class="hs-special">,</span><span> </span><a href="Distribution.Simple.BuildPaths.html#autogenPackageModulesDir"><span class="hs-identifier hs-var">autogenPackageModulesDir</span></a><span> </span><a href="#local-6989586621679449475"><span class="hs-identifier hs-var">lbi</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-134"></a><span>
</span><a name="line-135"></a><span class="hs-identifier">getExeSourceFiles</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a><span>
</span><a name="line-136"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a><span>
</span><a name="line-137"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a><span>
</span><a name="line-138"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a><span>
</span><a name="line-139"></a><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Compat.Prelude.html#IO"><span class="hs-identifier hs-type">IO</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName.ModuleName</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-140"></a><a name="getExeSourceFiles"><a href="Distribution.Simple.BuildPaths.html#getExeSourceFiles"><span class="hs-identifier">getExeSourceFiles</span></a></a><span> </span><a name="local-6989586621679449481"><a href="#local-6989586621679449481"><span class="hs-identifier">verbosity</span></a></a><span> </span><a name="local-6989586621679449482"><a href="#local-6989586621679449482"><span class="hs-identifier">lbi</span></a></a><span> </span><a name="local-6989586621679449483"><a href="#local-6989586621679449483"><span class="hs-identifier">exe</span></a></a><span> </span><a name="local-6989586621679449484"><a href="#local-6989586621679449484"><span class="hs-identifier">clbi</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-141"></a><span>    </span><a name="local-6989586621679449488"><a href="#local-6989586621679449488"><span class="hs-identifier">moduleFiles</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Distribution.Simple.BuildPaths.html#getSourceFiles"><span class="hs-identifier hs-var">getSourceFiles</span></a><span> </span><a href="#local-6989586621679449481"><span class="hs-identifier hs-var">verbosity</span></a><span> </span><a href="#local-6989586621679449487"><span class="hs-identifier hs-var">searchpaths</span></a><span> </span><a href="#local-6989586621679449486"><span class="hs-identifier hs-var">modules</span></a><span>
</span><a name="line-142"></a><span>    </span><a name="local-6989586621679449489"><a href="#local-6989586621679449489"><span class="hs-identifier">srcMainPath</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Distribution.Simple.Utils.html#findFile"><span class="hs-identifier hs-var">findFile</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">hsSourceDirs</span><span> </span><a href="#local-6989586621679449485"><span class="hs-identifier hs-var">bi</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">modulePath</span><span> </span><a href="#local-6989586621679449483"><span class="hs-identifier hs-var">exe</span></a><span class="hs-special">)</span><span>
</span><a name="line-143"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="Distribution.ModuleName.html#main"><span class="hs-identifier hs-var">ModuleName.main</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679449489"><span class="hs-identifier hs-var">srcMainPath</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679449488"><span class="hs-identifier hs-var">moduleFiles</span></a><span class="hs-special">)</span><span>
</span><a name="line-144"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-145"></a><span>    </span><a name="local-6989586621679449485"><a href="#local-6989586621679449485"><span class="hs-identifier">bi</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">buildInfo</span><span> </span><a href="#local-6989586621679449483"><span class="hs-identifier hs-var">exe</span></a><span>
</span><a name="line-146"></a><span>    </span><a name="local-6989586621679449486"><a href="#local-6989586621679449486"><span class="hs-identifier">modules</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">otherModules</span><span> </span><a href="#local-6989586621679449485"><span class="hs-identifier hs-var">bi</span></a><span>
</span><a name="line-147"></a><span>    </span><a name="local-6989586621679449487"><a href="#local-6989586621679449487"><span class="hs-identifier">searchpaths</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#autogenComponentModulesDir"><span class="hs-identifier hs-var">autogenComponentModulesDir</span></a><span> </span><a href="#local-6989586621679449482"><span class="hs-identifier hs-var">lbi</span></a><span> </span><a href="#local-6989586621679449484"><span class="hs-identifier hs-var">clbi</span></a><span>
</span><a name="line-148"></a><span>                </span><span class="hs-glyph">:</span><span> </span><a href="Distribution.Simple.BuildPaths.html#autogenPackageModulesDir"><span class="hs-identifier hs-var">autogenPackageModulesDir</span></a><span> </span><a href="#local-6989586621679449482"><span class="hs-identifier hs-var">lbi</span></a><span>
</span><a name="line-149"></a><span>                </span><span class="hs-glyph">:</span><span> </span><a href="Distribution.Simple.BuildPaths.html#exeBuildDir"><span class="hs-identifier hs-var">exeBuildDir</span></a><span> </span><a href="#local-6989586621679449482"><span class="hs-identifier hs-var">lbi</span></a><span> </span><a href="#local-6989586621679449483"><span class="hs-identifier hs-var">exe</span></a><span> </span><span class="hs-glyph">:</span><span> </span><span class="hs-identifier">hsSourceDirs</span><span> </span><a href="#local-6989586621679449485"><span class="hs-identifier hs-var">bi</span></a><span>
</span><a name="line-150"></a><span>
</span><a name="line-151"></a><span class="hs-identifier">getFLibSourceFiles</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a><span>
</span><a name="line-152"></a><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a><span>
</span><a name="line-153"></a><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a><span>
</span><a name="line-154"></a><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.ComponentLocalBuildInfo.html#ComponentLocalBuildInfo"><span class="hs-identifier hs-type">ComponentLocalBuildInfo</span></a><span>
</span><a name="line-155"></a><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Compat.Prelude.html#IO"><span class="hs-identifier hs-type">IO</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName.ModuleName</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-156"></a><a name="getFLibSourceFiles"><a href="Distribution.Simple.BuildPaths.html#getFLibSourceFiles"><span class="hs-identifier">getFLibSourceFiles</span></a></a><span> </span><a name="local-6989586621679449490"><a href="#local-6989586621679449490"><span class="hs-identifier">verbosity</span></a></a><span> </span><a name="local-6989586621679449491"><a href="#local-6989586621679449491"><span class="hs-identifier">lbi</span></a></a><span> </span><a name="local-6989586621679449492"><a href="#local-6989586621679449492"><span class="hs-identifier">flib</span></a></a><span> </span><a name="local-6989586621679449493"><a href="#local-6989586621679449493"><span class="hs-identifier">clbi</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#getSourceFiles"><span class="hs-identifier hs-var">getSourceFiles</span></a><span> </span><a href="#local-6989586621679449490"><span class="hs-identifier hs-var">verbosity</span></a><span> </span><a href="#local-6989586621679449496"><span class="hs-identifier hs-var">searchpaths</span></a><span> </span><a href="#local-6989586621679449495"><span class="hs-identifier hs-var">modules</span></a><span>
</span><a name="line-157"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-158"></a><span>    </span><a name="local-6989586621679449494"><a href="#local-6989586621679449494"><span class="hs-identifier">bi</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">foreignLibBuildInfo</span><span> </span><a href="#local-6989586621679449492"><span class="hs-identifier hs-var">flib</span></a><span>
</span><a name="line-159"></a><span>    </span><a name="local-6989586621679449495"><a href="#local-6989586621679449495"><span class="hs-identifier">modules</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">otherModules</span><span> </span><a href="#local-6989586621679449494"><span class="hs-identifier hs-var">bi</span></a><span>
</span><a name="line-160"></a><span>    </span><a name="local-6989586621679449496"><a href="#local-6989586621679449496"><span class="hs-identifier">searchpaths</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#autogenComponentModulesDir"><span class="hs-identifier hs-var">autogenComponentModulesDir</span></a><span> </span><a href="#local-6989586621679449491"><span class="hs-identifier hs-var">lbi</span></a><span> </span><a href="#local-6989586621679449493"><span class="hs-identifier hs-var">clbi</span></a><span>
</span><a name="line-161"></a><span>                </span><span class="hs-glyph">:</span><span> </span><a href="Distribution.Simple.BuildPaths.html#autogenPackageModulesDir"><span class="hs-identifier hs-var">autogenPackageModulesDir</span></a><span> </span><a href="#local-6989586621679449491"><span class="hs-identifier hs-var">lbi</span></a><span>
</span><a name="line-162"></a><span>                </span><span class="hs-glyph">:</span><span> </span><a href="Distribution.Simple.BuildPaths.html#flibBuildDir"><span class="hs-identifier hs-var">flibBuildDir</span></a><span> </span><a href="#local-6989586621679449491"><span class="hs-identifier hs-var">lbi</span></a><span> </span><a href="#local-6989586621679449492"><span class="hs-identifier hs-var">flib</span></a><span> </span><span class="hs-glyph">:</span><span> </span><span class="hs-identifier">hsSourceDirs</span><span> </span><a href="#local-6989586621679449494"><span class="hs-identifier hs-var">bi</span></a><span>
</span><a name="line-163"></a><span>
</span><a name="line-164"></a><span class="hs-identifier">getSourceFiles</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">]</span><span>
</span><a name="line-165"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName.ModuleName</span></a><span class="hs-special">]</span><span>
</span><a name="line-166"></a><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Compat.Prelude.html#IO"><span class="hs-identifier hs-type">IO</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a href="Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName.ModuleName</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-167"></a><a name="getSourceFiles"><a href="Distribution.Simple.BuildPaths.html#getSourceFiles"><span class="hs-identifier">getSourceFiles</span></a></a><span> </span><a name="local-6989586621679449497"><a href="#local-6989586621679449497"><span class="hs-identifier">verbosity</span></a></a><span> </span><a name="local-6989586621679449498"><a href="#local-6989586621679449498"><span class="hs-identifier">dirs</span></a></a><span> </span><a name="local-6989586621679449499"><a href="#local-6989586621679449499"><span class="hs-identifier">modules</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-identifier hs-var">traverse</span><span> </span><a href="#local-6989586621679449499"><span class="hs-identifier hs-var">modules</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679449502"><a href="#local-6989586621679449502"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679449502"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-168"></a><span>    </span><a href="Distribution.Simple.Utils.html#findFileWithExtension"><span class="hs-identifier hs-var">findFileWithExtension</span></a><span> </span><span class="hs-special">[</span><span class="hs-string">&quot;hs&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;lhs&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;hsig&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;lhsig&quot;</span><span class="hs-special">]</span><span> </span><a href="#local-6989586621679449498"><span class="hs-identifier hs-var">dirs</span></a><span> </span><span class="hs-special">(</span><a href="Distribution.ModuleName.html#toFilePath"><span class="hs-identifier hs-var">ModuleName.toFilePath</span></a><span> </span><a href="#local-6989586621679449502"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-169"></a><span>      </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679449500"><span class="hs-identifier hs-var">notFound</span></a><span> </span><a href="#local-6989586621679449502"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">normalise</span><span class="hs-special">)</span><span>
</span><a name="line-170"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-171"></a><span>    </span><a name="local-6989586621679449500"><a href="#local-6989586621679449500"><span class="hs-identifier">notFound</span></a></a><span> </span><a name="local-6989586621679449501"><a href="#local-6989586621679449501"><span class="hs-identifier">module_</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.Utils.html#die%27"><span class="hs-identifier hs-var">die'</span></a><span> </span><a href="#local-6989586621679449497"><span class="hs-identifier hs-var">verbosity</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;can't find source for module &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><a href="#local-6989586621679449501"><span class="hs-identifier hs-var">module_</span></a><span>
</span><a name="line-172"></a><span>
</span><a name="line-173"></a><span class="hs-comment">-- | The directory where we put build results for an executable</span><span>
</span><a name="line-174"></a><span class="hs-identifier">exeBuildDir</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.Executable.html#Executable"><span class="hs-identifier hs-type">Executable</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-175"></a><a name="exeBuildDir"><a href="Distribution.Simple.BuildPaths.html#exeBuildDir"><span class="hs-identifier">exeBuildDir</span></a></a><span> </span><a name="local-6989586621679449503"><a href="#local-6989586621679449503"><span class="hs-identifier">lbi</span></a></a><span> </span><a name="local-6989586621679449504"><a href="#local-6989586621679449504"><span class="hs-identifier">exe</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">buildDir</span><span> </span><a href="#local-6989586621679449503"><span class="hs-identifier hs-var">lbi</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><a href="#local-6989586621679449505"><span class="hs-identifier hs-var">nm</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><a href="#local-6989586621679449505"><span class="hs-identifier hs-var">nm</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;-tmp&quot;</span><span>
</span><a name="line-176"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-177"></a><span>    </span><a name="local-6989586621679449505"><a href="#local-6989586621679449505"><span class="hs-identifier">nm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">exeName</span><span> </span><a href="#local-6989586621679449504"><span class="hs-identifier hs-var">exe</span></a><span>
</span><a name="line-178"></a><span>
</span><a name="line-179"></a><span class="hs-comment">-- | The directory where we put build results for a foreign library</span><span>
</span><a name="line-180"></a><span class="hs-identifier">flibBuildDir</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-181"></a><a name="flibBuildDir"><a href="Distribution.Simple.BuildPaths.html#flibBuildDir"><span class="hs-identifier">flibBuildDir</span></a></a><span> </span><a name="local-6989586621679449506"><a href="#local-6989586621679449506"><span class="hs-identifier">lbi</span></a></a><span> </span><a name="local-6989586621679449507"><a href="#local-6989586621679449507"><span class="hs-identifier">flib</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">buildDir</span><span> </span><a href="#local-6989586621679449506"><span class="hs-identifier hs-var">lbi</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><a href="#local-6989586621679449508"><span class="hs-identifier hs-var">nm</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><a href="#local-6989586621679449508"><span class="hs-identifier hs-var">nm</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;-tmp&quot;</span><span>
</span><a name="line-182"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-183"></a><span>    </span><a name="local-6989586621679449508"><a href="#local-6989586621679449508"><span class="hs-identifier">nm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">foreignLibName</span><span> </span><a href="#local-6989586621679449507"><span class="hs-identifier hs-var">flib</span></a><span>
</span><a name="line-184"></a><span>
</span><a name="line-185"></a><span class="hs-comment">-- ---------------------------------------------------------------------------</span><span>
</span><a name="line-186"></a><span class="hs-comment">-- Library file names</span><span>
</span><a name="line-187"></a><span>
</span><a name="line-188"></a><span class="hs-comment">-- | Create a library name for a static library from a given name.</span><span>
</span><a name="line-189"></a><span class="hs-comment">-- Prepends 'lib' and appends the static library extension ('.a').</span><span>
</span><a name="line-190"></a><span class="hs-identifier">mkGenericStaticLibName</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-191"></a><a name="mkGenericStaticLibName"><a href="Distribution.Simple.BuildPaths.html#mkGenericStaticLibName"><span class="hs-identifier">mkGenericStaticLibName</span></a></a><span> </span><a name="local-6989586621679449509"><a href="#local-6989586621679449509"><span class="hs-identifier">lib</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;lib&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679449509"><span class="hs-identifier hs-var">lib</span></a><span> </span><span class="hs-operator hs-var">&lt;.&gt;</span><span> </span><span class="hs-string">&quot;a&quot;</span><span>
</span><a name="line-192"></a><span>
</span><a name="line-193"></a><span class="hs-identifier">mkLibName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.UnitId.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-194"></a><a name="mkLibName"><a href="Distribution.Simple.BuildPaths.html#mkLibName"><span class="hs-identifier">mkLibName</span></a></a><span> </span><a name="local-6989586621679449510"><a href="#local-6989586621679449510"><span class="hs-identifier">lib</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#mkGenericStaticLibName"><span class="hs-identifier hs-var">mkGenericStaticLibName</span></a><span> </span><span class="hs-special">(</span><a href="Distribution.Types.UnitId.html#getHSLibraryName"><span class="hs-identifier hs-var">getHSLibraryName</span></a><span> </span><a href="#local-6989586621679449510"><span class="hs-identifier hs-var">lib</span></a><span class="hs-special">)</span><span>
</span><a name="line-195"></a><span>
</span><a name="line-196"></a><span class="hs-identifier">mkProfLibName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.Types.UnitId.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-197"></a><a name="mkProfLibName"><a href="Distribution.Simple.BuildPaths.html#mkProfLibName"><span class="hs-identifier">mkProfLibName</span></a></a><span> </span><a name="local-6989586621679449511"><a href="#local-6989586621679449511"><span class="hs-identifier">lib</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><a href="Distribution.Simple.BuildPaths.html#mkGenericStaticLibName"><span class="hs-identifier hs-var">mkGenericStaticLibName</span></a><span> </span><span class="hs-special">(</span><a href="Distribution.Types.UnitId.html#getHSLibraryName"><span class="hs-identifier hs-var">getHSLibraryName</span></a><span> </span><a href="#local-6989586621679449511"><span class="hs-identifier hs-var">lib</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;_p&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-198"></a><span>
</span><a name="line-199"></a><span class="hs-comment">-- | Create a library name for a shared lirbary from a given name.</span><span>
</span><a name="line-200"></a><span class="hs-comment">-- Prepends 'lib' and appends the '-&lt;compilerFlavour&gt;&lt;compilerVersion&gt;'</span><span>
</span><a name="line-201"></a><span class="hs-comment">-- as well as the shared library extension.</span><span>
</span><a name="line-202"></a><span class="hs-identifier">mkGenericSharedLibName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-type">CompilerId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-203"></a><a name="mkGenericSharedLibName"><a href="Distribution.Simple.BuildPaths.html#mkGenericSharedLibName"><span class="hs-identifier">mkGenericSharedLibName</span></a></a><span> </span><a name="local-6989586621679449512"><a href="#local-6989586621679449512"><span class="hs-identifier">platform</span></a></a><span> </span><span class="hs-special">(</span><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-var">CompilerId</span></a><span> </span><a name="local-6989586621679449513"><a href="#local-6989586621679449513"><span class="hs-identifier">compilerFlavor</span></a></a><span> </span><a name="local-6989586621679449514"><a href="#local-6989586621679449514"><span class="hs-identifier">compilerVersion</span></a></a><span class="hs-special">)</span><span> </span><a name="local-6989586621679449515"><a href="#local-6989586621679449515"><span class="hs-identifier">lib</span></a></a><span>
</span><a name="line-204"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mconcat</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;lib&quot;</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679449515"><span class="hs-identifier hs-var">lib</span></a><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;-&quot;</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679449516"><span class="hs-identifier hs-var">comp</span></a><span> </span><span class="hs-operator hs-var">&lt;.&gt;</span><span> </span><a href="Distribution.Simple.BuildPaths.html#dllExtension"><span class="hs-identifier hs-var">dllExtension</span></a><span> </span><a href="#local-6989586621679449512"><span class="hs-identifier hs-var">platform</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-205"></a><span>  </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679449516"><a href="#local-6989586621679449516"><span class="hs-identifier">comp</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><a href="#local-6989586621679449513"><span class="hs-identifier hs-var">compilerFlavor</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><a href="#local-6989586621679449514"><span class="hs-identifier hs-var">compilerVersion</span></a><span>
</span><a name="line-206"></a><span>
</span><a name="line-207"></a><span class="hs-comment">-- Implement proper name mangling for dynamical shared objects</span><span>
</span><a name="line-208"></a><span class="hs-comment">-- libHS&lt;packagename&gt;-&lt;compilerFlavour&gt;&lt;compilerVersion&gt;</span><span>
</span><a name="line-209"></a><span class="hs-comment">-- e.g. libHSbase-2.1-ghc6.6.1.so</span><span>
</span><a name="line-210"></a><span class="hs-identifier">mkSharedLibName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-type">CompilerId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.UnitId.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-211"></a><a name="mkSharedLibName"><a href="Distribution.Simple.BuildPaths.html#mkSharedLibName"><span class="hs-identifier">mkSharedLibName</span></a></a><span> </span><a name="local-6989586621679449517"><a href="#local-6989586621679449517"><span class="hs-identifier">platform</span></a></a><span> </span><a name="local-6989586621679449518"><a href="#local-6989586621679449518"><span class="hs-identifier">comp</span></a></a><span> </span><a name="local-6989586621679449519"><a href="#local-6989586621679449519"><span class="hs-identifier">lib</span></a></a><span>
</span><a name="line-212"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Simple.BuildPaths.html#mkGenericSharedLibName"><span class="hs-identifier hs-var">mkGenericSharedLibName</span></a><span> </span><a href="#local-6989586621679449517"><span class="hs-identifier hs-var">platform</span></a><span> </span><a href="#local-6989586621679449518"><span class="hs-identifier hs-var">comp</span></a><span> </span><span class="hs-special">(</span><a href="Distribution.Types.UnitId.html#getHSLibraryName"><span class="hs-identifier hs-var">getHSLibraryName</span></a><span> </span><a href="#local-6989586621679449519"><span class="hs-identifier hs-var">lib</span></a><span class="hs-special">)</span><span>
</span><a name="line-213"></a><span>
</span><a name="line-214"></a><span class="hs-comment">-- Static libs are named the same as shared libraries, only with</span><span>
</span><a name="line-215"></a><span class="hs-comment">-- a different extension.</span><span>
</span><a name="line-216"></a><span class="hs-identifier">mkStaticLibName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-type">CompilerId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Distribution.Types.UnitId.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-217"></a><a name="mkStaticLibName"><a href="Distribution.Simple.BuildPaths.html#mkStaticLibName"><span class="hs-identifier">mkStaticLibName</span></a></a><span> </span><a name="local-6989586621679449520"><a href="#local-6989586621679449520"><span class="hs-identifier">platform</span></a></a><span> </span><span class="hs-special">(</span><a href="Distribution.Compiler.html#CompilerId"><span class="hs-identifier hs-var">CompilerId</span></a><span> </span><a name="local-6989586621679449521"><a href="#local-6989586621679449521"><span class="hs-identifier">compilerFlavor</span></a></a><span> </span><a name="local-6989586621679449522"><a href="#local-6989586621679449522"><span class="hs-identifier">compilerVersion</span></a></a><span class="hs-special">)</span><span> </span><a name="local-6989586621679449523"><a href="#local-6989586621679449523"><span class="hs-identifier">lib</span></a></a><span>
</span><a name="line-218"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;lib&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="Distribution.Types.UnitId.html#getHSLibraryName"><span class="hs-identifier hs-var">getHSLibraryName</span></a><span> </span><a href="#local-6989586621679449523"><span class="hs-identifier hs-var">lib</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;-&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679449524"><span class="hs-identifier hs-var">comp</span></a><span> </span><span class="hs-operator hs-var">&lt;.&gt;</span><span> </span><a href="Distribution.Simple.BuildPaths.html#staticLibExtension"><span class="hs-identifier hs-var">staticLibExtension</span></a><span> </span><a href="#local-6989586621679449520"><span class="hs-identifier hs-var">platform</span></a><span>
</span><a name="line-219"></a><span>  </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679449524"><a href="#local-6989586621679449524"><span class="hs-identifier">comp</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><a href="#local-6989586621679449521"><span class="hs-identifier hs-var">compilerFlavor</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="Distribution.Text.html#display"><span class="hs-identifier hs-var">display</span></a><span> </span><a href="#local-6989586621679449522"><span class="hs-identifier hs-var">compilerVersion</span></a><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span class="hs-comment">-- ------------------------------------------------------------</span><span>
</span><a name="line-222"></a><span class="hs-comment">-- * Platform file extensions</span><span>
</span><a name="line-223"></a><span class="hs-comment">-- ------------------------------------------------------------</span><span>
</span><a name="line-224"></a><span>
</span><a name="line-225"></a><span class="hs-comment">-- | Default extension for executable files on the current platform.</span><span>
</span><a name="line-226"></a><span class="hs-comment">-- (typically @\&quot;\&quot;@ on Unix and @\&quot;exe\&quot;@ on Windows or OS\/2)</span><span>
</span><a name="line-227"></a><span class="hs-identifier">exeExtension</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-228"></a><a name="exeExtension"><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier">exeExtension</span></a></a><span> </span><span class="hs-special">(</span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-var">Platform</span></a><span> </span><a name="local-6989586621679449525"><a href="#local-6989586621679449525"><span class="hs-identifier">_arch</span></a></a><span> </span><a name="local-6989586621679449526"><a href="#local-6989586621679449526"><span class="hs-identifier">os</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679449526"><span class="hs-identifier hs-var">os</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-229"></a><span>                   </span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;exe&quot;</span><span>
</span><a name="line-230"></a><span>                   </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;&quot;</span><span>
</span><a name="line-231"></a><span>
</span><a name="line-232"></a><span class="hs-comment">-- | Extension for object files. For GHC the extension is @\&quot;o\&quot;@.</span><span>
</span><a name="line-233"></a><span class="hs-identifier">objExtension</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-234"></a><a name="objExtension"><a href="Distribution.Simple.BuildPaths.html#objExtension"><span class="hs-identifier">objExtension</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;o&quot;</span><span>
</span><a name="line-235"></a><span>
</span><a name="line-236"></a><span class="hs-comment">-- | Extension for dynamically linked (or shared) libraries</span><span>
</span><a name="line-237"></a><span class="hs-comment">-- (typically @\&quot;so\&quot;@ on Unix and @\&quot;dll\&quot;@ on Windows)</span><span>
</span><a name="line-238"></a><span class="hs-identifier">dllExtension</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-239"></a><a name="dllExtension"><a href="Distribution.Simple.BuildPaths.html#dllExtension"><span class="hs-identifier">dllExtension</span></a></a><span> </span><span class="hs-special">(</span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-var">Platform</span></a><span> </span><a name="local-6989586621679449527"><a href="#local-6989586621679449527"><span class="hs-identifier">_arch</span></a></a><span> </span><a name="local-6989586621679449528"><a href="#local-6989586621679449528"><span class="hs-identifier">os</span></a></a><span class="hs-special">)</span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679449528"><span class="hs-identifier hs-var">os</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-240"></a><span>                   </span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;dll&quot;</span><span>
</span><a name="line-241"></a><span>                   </span><a href="Distribution.System.html#OSX"><span class="hs-identifier hs-var">OSX</span></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;dylib&quot;</span><span>
</span><a name="line-242"></a><span>                   </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;so&quot;</span><span>
</span><a name="line-243"></a><span>
</span><a name="line-244"></a><span class="hs-comment">-- | Extension for static libraries</span><span>
</span><a name="line-245"></a><span class="hs-comment">--</span><span>
</span><a name="line-246"></a><span class="hs-comment">-- TODO: Here, as well as in dllExtension, it's really the target OS that we're</span><span>
</span><a name="line-247"></a><span class="hs-comment">-- interested in, not the build OS.</span><span>
</span><a name="line-248"></a><span class="hs-identifier">staticLibExtension</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-249"></a><a name="staticLibExtension"><a href="Distribution.Simple.BuildPaths.html#staticLibExtension"><span class="hs-identifier">staticLibExtension</span></a></a><span> </span><span class="hs-special">(</span><a href="Distribution.System.html#Platform"><span class="hs-identifier hs-var">Platform</span></a><span> </span><a name="local-6989586621679449529"><a href="#local-6989586621679449529"><span class="hs-identifier">_arch</span></a></a><span> </span><a name="local-6989586621679449530"><a href="#local-6989586621679449530"><span class="hs-identifier">os</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679449530"><span class="hs-identifier hs-var">os</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-250"></a><span>                       </span><a href="Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;lib&quot;</span><span>
</span><a name="line-251"></a><span>                       </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;a&quot;</span><span>
</span><a name="line-252"></a></pre></body></html>