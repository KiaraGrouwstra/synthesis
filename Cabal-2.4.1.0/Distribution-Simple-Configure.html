<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Distribution.Simple.Configure</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Distribution.Simple.Configure.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Cabal-2.4.1.0: A framework for packaging Haskell software</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Isaac Jones 2003-2005</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>cabal-devel@haskell.org</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Distribution.Simple.Configure</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This deals with the <em>configure</em> phase. It provides the <code><a href="Distribution-Simple-Configure.html#v:configure" title="Distribution.Simple.Configure">configure</a></code> action
 which is given the package description and configure flags. It then tries
 to: configure the compiler; resolves any conditionals in the package
 description; resolve the package dependencies; check if all the extensions
 used by this package are supported by the compiler; check that all the build
 tools are available (including version checks if appropriate); checks for
 any required <code>pkg-config</code> packages (updating the <code><a href="Distribution-Types-BuildInfo.html#t:BuildInfo" title="Distribution.Types.BuildInfo">BuildInfo</a></code> with the
 results)</p><p>Then based on all this it saves the info in the <code><a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></code> and writes
 it out to the <code>dist/setup-config</code> file. It also displays various details to
 the user, the amount of information displayed depending on the verbosity
 level.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:configure">configure</a> :: (<a href="Distribution-Types-GenericPackageDescription.html#t:GenericPackageDescription" title="Distribution.Types.GenericPackageDescription">GenericPackageDescription</a>, <a href="Distribution-Types-HookedBuildInfo.html#t:HookedBuildInfo" title="Distribution.Types.HookedBuildInfo">HookedBuildInfo</a>) -&gt; <a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></li><li class="src short"><a href="#v:writePersistBuildConfig">writePersistBuildConfig</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:NoCallStackIO" title="Distribution.Compat.Prelude.Internal">NoCallStackIO</a> ()</li><li class="src short"><a href="#v:getConfigStateFile">getConfigStateFile</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></li><li class="src short"><a href="#v:getPersistBuildConfig">getPersistBuildConfig</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></li><li class="src short"><a href="#v:checkPersistBuildConfigOutdated">checkPersistBuildConfigOutdated</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:NoCallStackIO" title="Distribution.Compat.Prelude.Internal">NoCallStackIO</a> <a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:tryGetPersistBuildConfig">tryGetPersistBuildConfig</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a>)</li><li class="src short"><a href="#v:maybeGetPersistBuildConfig">maybeGetPersistBuildConfig</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a>)</li><li class="src short"><a href="#v:findDistPref">findDistPref</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Simple-Flag.html#t:Flag" title="Distribution.Simple.Flag">Flag</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:NoCallStackIO" title="Distribution.Compat.Prelude.Internal">NoCallStackIO</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></li><li class="src short"><a href="#v:findDistPrefOrDefault">findDistPrefOrDefault</a> :: <a href="Distribution-Simple-Flag.html#t:Flag" title="Distribution.Simple.Flag">Flag</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:NoCallStackIO" title="Distribution.Compat.Prelude.Internal">NoCallStackIO</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></li><li class="src short"><a href="#v:getInternalPackages">getInternalPackages</a> :: <a href="Distribution-Types-GenericPackageDescription.html#t:GenericPackageDescription" title="Distribution.Types.GenericPackageDescription">GenericPackageDescription</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a> <a href="Distribution-Types-PackageName.html#t:PackageName" title="Distribution.Types.PackageName">PackageName</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName" title="Distribution.Types.UnqualComponentName">UnqualComponentName</a>)</li><li class="src short"><a href="#v:computeComponentId">computeComponentId</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> -&gt; <a href="Distribution-Simple-Flag.html#t:Flag" title="Distribution.Simple.Flag">Flag</a> <a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> -&gt; <a href="Distribution-Simple-Flag.html#t:Flag" title="Distribution.Simple.Flag">Flag</a> <a href="Distribution-Types-ComponentId.html#t:ComponentId" title="Distribution.Types.ComponentId">ComponentId</a> -&gt; <a href="Distribution-Types-PackageId.html#t:PackageIdentifier" title="Distribution.Types.PackageId">PackageIdentifier</a> -&gt; <a href="Distribution-Types-ComponentName.html#t:ComponentName" title="Distribution.Types.ComponentName">ComponentName</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> ([<a href="Distribution-Types-ComponentId.html#t:ComponentId" title="Distribution.Types.ComponentId">ComponentId</a>], <a href="Distribution-Types-GenericPackageDescription.html#t:FlagAssignment" title="Distribution.Types.GenericPackageDescription">FlagAssignment</a>) -&gt; <a href="Distribution-Types-ComponentId.html#t:ComponentId" title="Distribution.Types.ComponentId">ComponentId</a></li><li class="src short"><a href="#v:computeCompatPackageKey">computeCompatPackageKey</a> :: <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Types-MungedPackageName.html#t:MungedPackageName" title="Distribution.Types.MungedPackageName">MungedPackageName</a> -&gt; <a href="Distribution-Types-Version.html#t:Version" title="Distribution.Types.Version">Version</a> -&gt; <a href="Distribution-Types-UnitId.html#t:UnitId" title="Distribution.Types.UnitId">UnitId</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a></li><li class="src short"><a href="#v:computeCompatPackageName">computeCompatPackageName</a> :: <a href="Distribution-Types-PackageName.html#t:PackageName" title="Distribution.Types.PackageName">PackageName</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName" title="Distribution.Types.UnqualComponentName">UnqualComponentName</a> -&gt; <a href="Distribution-Types-MungedPackageName.html#t:MungedPackageName" title="Distribution.Types.MungedPackageName">MungedPackageName</a></li><li class="src short"><a href="#v:localBuildInfoFile">localBuildInfoFile</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></li><li class="src short"><a href="#v:getInstalledPackages">getInstalledPackages</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack" title="Distribution.Simple.Compiler">PackageDBStack</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex" title="Distribution.Simple.PackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:getInstalledPackagesMonitorFiles">getInstalledPackagesMonitorFiles</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack" title="Distribution.Simple.Compiler">PackageDBStack</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-System.html#t:Platform" title="Distribution.System">Platform</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> [<a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a>]</li><li class="src short"><a href="#v:getPackageDBContents">getPackageDBContents</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDB" title="Distribution.Simple.Compiler">PackageDB</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex" title="Distribution.Simple.PackageIndex">InstalledPackageIndex</a></li><li class="src short"><a href="#v:configCompiler">configCompiler</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compiler.html#t:CompilerFlavor" title="Distribution.Compiler">CompilerFlavor</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>, <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a>)</li><li class="src short"><a href="#v:configCompilerAux">configCompilerAux</a> :: <a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>, <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a>)</li><li class="src short"><a href="#v:configCompilerEx">configCompilerEx</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compiler.html#t:CompilerFlavor" title="Distribution.Compiler">CompilerFlavor</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>, <a href="Distribution-System.html#t:Platform" title="Distribution.System">Platform</a>, <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a>)</li><li class="src short"><a href="#v:configCompilerAuxEx">configCompilerAuxEx</a> :: <a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>, <a href="Distribution-System.html#t:Platform" title="Distribution.System">Platform</a>, <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a>)</li><li class="src short"><a href="#v:computeEffectiveProfiling">computeEffectiveProfiling</a> :: <a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a> -&gt; (<a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a>, <a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a>)</li><li class="src short"><a href="#v:ccLdOptionsBuildInfo">ccLdOptionsBuildInfo</a> :: [<a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a>] -&gt; [<a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a>] -&gt; <a href="Distribution-Types-BuildInfo.html#t:BuildInfo" title="Distribution.Types.BuildInfo">BuildInfo</a></li><li class="src short"><a href="#v:checkForeignDeps">checkForeignDeps</a> :: <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> ()</li><li class="src short"><a href="#v:interpretPackageDbFlags">interpretPackageDbFlags</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> -&gt; [<a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Simple-Compiler.html#t:PackageDB" title="Distribution.Simple.Compiler">PackageDB</a>] -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack" title="Distribution.Simple.Compiler">PackageDBStack</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ConfigStateFileError">ConfigStateFileError</a><ul class="subs"><li>= <a href="#v:ConfigStateFileNoHeader">ConfigStateFileNoHeader</a></li><li>| <a href="#v:ConfigStateFileBadHeader">ConfigStateFileBadHeader</a></li><li>| <a href="#v:ConfigStateFileNoParse">ConfigStateFileNoParse</a></li><li>| <a href="#v:ConfigStateFileMissing">ConfigStateFileMissing</a></li><li>| <a href="#v:ConfigStateFileBadVersion">ConfigStateFileBadVersion</a> <a href="Distribution-Types-PackageId.html#t:PackageIdentifier" title="Distribution.Types.PackageId">PackageIdentifier</a> <a href="Distribution-Types-PackageId.html#t:PackageIdentifier" title="Distribution.Types.PackageId">PackageIdentifier</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a>)</li></ul></li><li class="src short"><a href="#v:tryGetConfigStateFile">tryGetConfigStateFile</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a>)</li><li class="src short"><a href="#v:platformDefines">platformDefines</a> :: <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; [<a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a>]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:configure" class="def">configure</a> :: (<a href="Distribution-Types-GenericPackageDescription.html#t:GenericPackageDescription" title="Distribution.Types.GenericPackageDescription">GenericPackageDescription</a>, <a href="Distribution-Types-HookedBuildInfo.html#t:HookedBuildInfo" title="Distribution.Types.HookedBuildInfo">HookedBuildInfo</a>) -&gt; <a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> <a href="src/Distribution.Simple.Configure.html#configure" class="link">Source</a> <a href="#v:configure" class="selflink">#</a></p><div class="doc"><p>Perform the &quot;<code>./setup configure</code>&quot; action.
 Returns the <code>.setup-config</code> file.</p></div></div><div class="top"><p class="src"><a id="v:writePersistBuildConfig" class="def">writePersistBuildConfig</a> <a href="src/Distribution.Simple.Configure.html#writePersistBuildConfig" class="link">Source</a> <a href="#v:writePersistBuildConfig" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>The <code>dist</code> directory path.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></td><td class="doc"><p>The <code><a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></code> to write.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:NoCallStackIO" title="Distribution.Compat.Prelude.Internal">NoCallStackIO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>After running configure, output the <code><a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></code> to the
 <code><a href="Distribution-Simple-Configure.html#v:localBuildInfoFile" title="Distribution.Simple.Configure">localBuildInfoFile</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:getConfigStateFile" class="def">getConfigStateFile</a> <a href="src/Distribution.Simple.Configure.html#getConfigStateFile" class="link">Source</a> <a href="#v:getConfigStateFile" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>The file path of the <code>setup-config</code> file.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Read the <code><a href="Distribution-Simple-Configure.html#v:localBuildInfoFile" title="Distribution.Simple.Configure">localBuildInfoFile</a></code>.  Throw an exception if the file is
 missing, if the file cannot be read, or if the file was created by an older
 version of Cabal.</p></div></div><div class="top"><p class="src"><a id="v:getPersistBuildConfig" class="def">getPersistBuildConfig</a> <a href="src/Distribution.Simple.Configure.html#getPersistBuildConfig" class="link">Source</a> <a href="#v:getPersistBuildConfig" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>The <code>dist</code> directory path.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Read the <code><a href="Distribution-Simple-Configure.html#v:localBuildInfoFile" title="Distribution.Simple.Configure">localBuildInfoFile</a></code>. Throw an exception if the file is
 missing, if the file cannot be read, or if the file was created by an older
 version of Cabal.</p></div></div><div class="top"><p class="src"><a id="v:checkPersistBuildConfigOutdated" class="def">checkPersistBuildConfigOutdated</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:NoCallStackIO" title="Distribution.Compat.Prelude.Internal">NoCallStackIO</a> <a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="src/Distribution.Simple.Configure.html#checkPersistBuildConfigOutdated" class="link">Source</a> <a href="#v:checkPersistBuildConfigOutdated" class="selflink">#</a></p><div class="doc"><p>Check that localBuildInfoFile is up-to-date with respect to the
 .cabal file.</p></div></div><div class="top"><p class="src"><a id="v:tryGetPersistBuildConfig" class="def">tryGetPersistBuildConfig</a> <a href="src/Distribution.Simple.Configure.html#tryGetPersistBuildConfig" class="link">Source</a> <a href="#v:tryGetPersistBuildConfig" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>The <code>dist</code> directory path.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Try to read the <code><a href="Distribution-Simple-Configure.html#v:localBuildInfoFile" title="Distribution.Simple.Configure">localBuildInfoFile</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:maybeGetPersistBuildConfig" class="def">maybeGetPersistBuildConfig</a> <a href="src/Distribution.Simple.Configure.html#maybeGetPersistBuildConfig" class="link">Source</a> <a href="#v:maybeGetPersistBuildConfig" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>The <code>dist</code> directory path.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Try to read the <code><a href="Distribution-Simple-Configure.html#v:localBuildInfoFile" title="Distribution.Simple.Configure">localBuildInfoFile</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:findDistPref" class="def">findDistPref</a> <a href="src/Distribution.Simple.Configure.html#findDistPref" class="link">Source</a> <a href="#v:findDistPref" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>default &quot;dist&quot; prefix</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-Flag.html#t:Flag" title="Distribution.Simple.Flag">Flag</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>override &quot;dist&quot; prefix</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:NoCallStackIO" title="Distribution.Compat.Prelude.Internal">NoCallStackIO</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Return the &quot;dist/&quot; prefix, or the default prefix. The prefix is taken
 from (in order of highest to lowest preference) the override prefix, the
 &quot;CABAL_BUILDDIR&quot; environment variable, or the default prefix.</p></div></div><div class="top"><p class="src"><a id="v:findDistPrefOrDefault" class="def">findDistPrefOrDefault</a> <a href="src/Distribution.Simple.Configure.html#findDistPrefOrDefault" class="link">Source</a> <a href="#v:findDistPrefOrDefault" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Simple-Flag.html#t:Flag" title="Distribution.Simple.Flag">Flag</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>override &quot;dist&quot; prefix</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:NoCallStackIO" title="Distribution.Compat.Prelude.Internal">NoCallStackIO</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Return the &quot;dist/&quot; prefix, or the default prefix. The prefix is taken
 from (in order of highest to lowest preference) the override prefix, the
 &quot;CABAL_BUILDDIR&quot; environment variable, or <code><a href="Distribution-Simple-Setup.html#v:defaultDistPref" title="Distribution.Simple.Setup">defaultDistPref</a></code> is used. Call
 this function to resolve a <code>*DistPref</code> flag whenever it is not known to be
 set. (The <code>*DistPref</code> flags are always set to a definite value before
 invoking <code>UserHooks</code>.)</p></div></div><div class="top"><p class="src"><a id="v:getInternalPackages" class="def">getInternalPackages</a> :: <a href="Distribution-Types-GenericPackageDescription.html#t:GenericPackageDescription" title="Distribution.Types.GenericPackageDescription">GenericPackageDescription</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Map" title="Distribution.Compat.Prelude.Internal">Map</a> <a href="Distribution-Types-PackageName.html#t:PackageName" title="Distribution.Types.PackageName">PackageName</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName" title="Distribution.Types.UnqualComponentName">UnqualComponentName</a>) <a href="src/Distribution.Simple.Configure.html#getInternalPackages" class="link">Source</a> <a href="#v:getInternalPackages" class="selflink">#</a></p><div class="doc"><p>Create a PackageIndex that makes *any libraries that might be*
 defined internally to this package look like installed packages, in
 case an executable should refer to any of them as dependencies.</p><p>It must be *any libraries that might be* defined rather than the
 actual definitions, because these depend on conditionals in the .cabal
 file, and we haven't resolved them yet.  finalizePD
 does the resolution of conditionals, and it takes internalPackageSet
 as part of its input.</p></div></div><div class="top"><p class="src"><a id="v:computeComponentId" class="def">computeComponentId</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> -&gt; <a href="Distribution-Simple-Flag.html#t:Flag" title="Distribution.Simple.Flag">Flag</a> <a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> -&gt; <a href="Distribution-Simple-Flag.html#t:Flag" title="Distribution.Simple.Flag">Flag</a> <a href="Distribution-Types-ComponentId.html#t:ComponentId" title="Distribution.Types.ComponentId">ComponentId</a> -&gt; <a href="Distribution-Types-PackageId.html#t:PackageIdentifier" title="Distribution.Types.PackageId">PackageIdentifier</a> -&gt; <a href="Distribution-Types-ComponentName.html#t:ComponentName" title="Distribution.Types.ComponentName">ComponentName</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> ([<a href="Distribution-Types-ComponentId.html#t:ComponentId" title="Distribution.Types.ComponentId">ComponentId</a>], <a href="Distribution-Types-GenericPackageDescription.html#t:FlagAssignment" title="Distribution.Types.GenericPackageDescription">FlagAssignment</a>) -&gt; <a href="Distribution-Types-ComponentId.html#t:ComponentId" title="Distribution.Types.ComponentId">ComponentId</a> <a href="src/Distribution.Backpack.Id.html#computeComponentId" class="link">Source</a> <a href="#v:computeComponentId" class="selflink">#</a></p><div class="doc"><p>This method computes a default, &quot;good enough&quot; <code><a href="Distribution-Types-ComponentId.html#t:ComponentId" title="Distribution.Types.ComponentId">ComponentId</a></code>
 for a package.  The intent is that cabal-install (or the user) will
 specify a more detailed IPID via the <code>--ipid</code> flag if necessary.</p></div></div><div class="top"><p class="src"><a id="v:computeCompatPackageKey" class="def">computeCompatPackageKey</a> :: <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Types-MungedPackageName.html#t:MungedPackageName" title="Distribution.Types.MungedPackageName">MungedPackageName</a> -&gt; <a href="Distribution-Types-Version.html#t:Version" title="Distribution.Types.Version">Version</a> -&gt; <a href="Distribution-Types-UnitId.html#t:UnitId" title="Distribution.Types.UnitId">UnitId</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="src/Distribution.Backpack.Id.html#computeCompatPackageKey" class="link">Source</a> <a href="#v:computeCompatPackageKey" class="selflink">#</a></p><div class="doc"><p>In GHC 8.0, the string we pass to GHC to use for symbol
 names for a package can be an arbitrary, IPID-compatible string.
 However, prior to GHC 8.0 there are some restrictions on what
 format this string can be (due to how ghc-pkg parsed the key):</p><ol><li>In GHC 7.10, the string had either be of the form
      foo_ABCD, where foo is a non-semantic alphanumeric/hyphenated
      prefix and ABCD is two base-64 encoded 64-bit integers,
      or a GHC 7.8 style identifier.</li><li>In GHC 7.8, the string had to be a valid package identifier
      like foo-0.1.</li></ol><p>So, the problem is that Cabal, in general, has a general IPID,
 but needs to figure out a package key / package ID that the
 old ghc-pkg will actually accept.  But there's an EVERY WORSE
 problem: if ghc-pkg decides to parse an identifier foo-0.1-xxx
 as if it were a package identifier, which means it will SILENTLY
 DROP the &quot;xxx&quot; (because it's a tag, and Cabal does not allow tags.)
 So we must CONNIVE to ensure that we don't pick something that
 looks like this.</p><p>So this function attempts to define a mapping into the old formats.</p><p>The mapping for GHC 7.8 and before:</p><ul><li>We use the *compatibility* package name and version.  For
        public libraries this is just the package identifier; for
        internal libraries, it's something like &quot;z-pkgname-z-libname-0.1&quot;.
        See <code><a href="Distribution-Simple-Configure.html#v:computeCompatPackageName" title="Distribution.Simple.Configure">computeCompatPackageName</a></code> for more details.</li></ul><p>The mapping for GHC 7.10:</p><ul><li><p>For CLibName:
          If the IPID is of the form foo-0.1-ABCDEF where foo_ABCDEF would
          validly parse as a package key, we pass <a href="ABCDEF.html">ABCDEF</a>.  (NB: not
          all hashes parse this way, because GHC 7.10 mandated that
          these hashes be two base-62 encoded 64 bit integers),
          but hashes that Cabal generated using <code><a href="Distribution-Simple-Configure.html#v:computeComponentId" title="Distribution.Simple.Configure">computeComponentId</a></code>
          are guaranteed to have this form.</p><p>If it is not of this form, we rehash the IPID into the
correct form and pass that.</p></li><li>For sub-components, we rehash the IPID into the correct format
        and pass that.</li></ul></div></div><div class="top"><p class="src"><a id="v:computeCompatPackageName" class="def">computeCompatPackageName</a> :: <a href="Distribution-Types-PackageName.html#t:PackageName" title="Distribution.Types.PackageName">PackageName</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Types-UnqualComponentName.html#t:UnqualComponentName" title="Distribution.Types.UnqualComponentName">UnqualComponentName</a> -&gt; <a href="Distribution-Types-MungedPackageName.html#t:MungedPackageName" title="Distribution.Types.MungedPackageName">MungedPackageName</a> <a href="src/Distribution.Types.MungedPackageName.html#computeCompatPackageName" class="link">Source</a> <a href="#v:computeCompatPackageName" class="selflink">#</a></p><div class="doc"><p>Computes the package name for a library.  If this is the public
 library, it will just be the original package name; otherwise,
 it will be a munged package name recording the original package
 name as well as the name of the internal library.</p><p>A lot of tooling in the Haskell ecosystem assumes that if something
 is installed to the package database with the package name <code>foo</code>,
 then it actually is an entry for the (only public) library in package
 <code>foo</code>.  With internal packages, this is not necessarily true:
 a public library as well as arbitrarily many internal libraries may
 come from the same package.  To prevent tools from getting confused
 in this case, the package name of these internal libraries is munged
 so that they do not conflict the public library proper.  A particular
 case where this matters is ghc-pkg: if we don't munge the package
 name, the inplace registration will OVERRIDE a different internal
 library.</p><p>We munge into a reserved namespace, &quot;z-&quot;, and encode both the
 component name and the package name of an internal library using the
 following format:</p><p>compat-pkg-name ::= &quot;z-&quot; package-name &quot;-z-&quot; library-name</p><p>where package-name and library-name have &quot;-&quot; ( &quot;z&quot; + ) &quot;-&quot;
 segments encoded by adding an extra &quot;z&quot;.</p><p>When we have the public library, the compat-pkg-name is just the
 package-name, no surprises there!</p></div></div><div class="top"><p class="src"><a id="v:localBuildInfoFile" class="def">localBuildInfoFile</a> <a href="src/Distribution.Simple.Configure.html#localBuildInfoFile" class="link">Source</a> <a href="#v:localBuildInfoFile" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>The <code>dist</code> directory path.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Get the path of <code>dist/setup-config</code>.</p></div></div><div class="top"><p class="src"><a id="v:getInstalledPackages" class="def">getInstalledPackages</a> <a href="src/Distribution.Simple.Configure.html#getInstalledPackages" class="link">Source</a> <a href="#v:getInstalledPackages" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack" title="Distribution.Simple.Compiler">PackageDBStack</a></td><td class="doc"><p>The stack of package databases.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex" title="Distribution.Simple.PackageIndex">InstalledPackageIndex</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>List all installed packages in the given package databases.
 Non-existent package databases do not cause errors, they just get skipped
 with a warning and treated as empty ones, since technically they do not
 contain any package.</p></div></div><div class="top"><p class="src"><a id="v:getInstalledPackagesMonitorFiles" class="def">getInstalledPackagesMonitorFiles</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack" title="Distribution.Simple.Compiler">PackageDBStack</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-System.html#t:Platform" title="Distribution.System">Platform</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> [<a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a>] <a href="src/Distribution.Simple.Configure.html#getInstalledPackagesMonitorFiles" class="link">Source</a> <a href="#v:getInstalledPackagesMonitorFiles" class="selflink">#</a></p><div class="doc"><p>A set of files (or directories) that can be monitored to detect when
 there might have been a change in the installed packages.</p></div></div><div class="top"><p class="src"><a id="v:getPackageDBContents" class="def">getPackageDBContents</a> :: <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDB" title="Distribution.Simple.Compiler">PackageDB</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> <a href="Distribution-Simple-PackageIndex.html#t:InstalledPackageIndex" title="Distribution.Simple.PackageIndex">InstalledPackageIndex</a> <a href="src/Distribution.Simple.Configure.html#getPackageDBContents" class="link">Source</a> <a href="#v:getPackageDBContents" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Distribution-Simple-Configure.html#v:getInstalledPackages" title="Distribution.Simple.Configure">getInstalledPackages</a></code>, but for a single package DB.</p><p>NB: Why isn't this always a fall through to <code><a href="Distribution-Simple-Configure.html#v:getInstalledPackages" title="Distribution.Simple.Configure">getInstalledPackages</a></code>?
 That is because <code><a href="Distribution-Simple-Configure.html#v:getInstalledPackages" title="Distribution.Simple.Configure">getInstalledPackages</a></code> performs some sanity checks
 on the package database stack in question.  However, when sandboxes
 are involved these sanity checks are not desirable.</p></div></div><div class="top"><p class="src"><a id="v:configCompiler" class="def">configCompiler</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compiler.html#t:CompilerFlavor" title="Distribution.Compiler">CompilerFlavor</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>, <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a>) <a href="src/Distribution.Simple.Configure.html#configCompiler" class="link">Source</a> <a href="#v:configCompiler" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: <code><a href="Distribution-Simple-Configure.html#v:configCompiler" title="Distribution.Simple.Configure">configCompiler</a></code> is deprecated. Use <code><a href="Distribution-Simple-Configure.html#v:configCompilerEx" title="Distribution.Simple.Configure">configCompilerEx</a></code> instead.</p></div></div></div><div class="top"><p class="src"><a id="v:configCompilerAux" class="def">configCompilerAux</a> :: <a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>, <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a>) <a href="src/Distribution.Simple.Configure.html#configCompilerAux" class="link">Source</a> <a href="#v:configCompilerAux" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: configCompilerAux is deprecated. Use <code><a href="Distribution-Simple-Configure.html#v:configCompilerAuxEx" title="Distribution.Simple.Configure">configCompilerAuxEx</a></code> instead.</p></div></div></div><div class="top"><p class="src"><a id="v:configCompilerEx" class="def">configCompilerEx</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compiler.html#t:CompilerFlavor" title="Distribution.Compiler">CompilerFlavor</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a> -&gt; <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a> -&gt; <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>, <a href="Distribution-System.html#t:Platform" title="Distribution.System">Platform</a>, <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a>) <a href="src/Distribution.Simple.Configure.html#configCompilerEx" class="link">Source</a> <a href="#v:configCompilerEx" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:configCompilerAuxEx" class="def">configCompilerAuxEx</a> :: <a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>, <a href="Distribution-System.html#t:Platform" title="Distribution.System">Platform</a>, <a href="Distribution-Simple-Program-Db.html#t:ProgramDb" title="Distribution.Simple.Program.Db">ProgramDb</a>) <a href="src/Distribution.Simple.Configure.html#configCompilerAuxEx" class="link">Source</a> <a href="#v:configCompilerAuxEx" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:computeEffectiveProfiling" class="def">computeEffectiveProfiling</a> :: <a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a> -&gt; (<a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a>, <a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a>) <a href="src/Distribution.Simple.Configure.html#computeEffectiveProfiling" class="link">Source</a> <a href="#v:computeEffectiveProfiling" class="selflink">#</a></p><div class="doc"><p>Compute the effective value of the profiling flags
 <code>--enable-library-profiling</code> and <code>--enable-executable-profiling</code>
 from the specified <code><a href="Distribution-Simple-Setup.html#t:ConfigFlags" title="Distribution.Simple.Setup">ConfigFlags</a></code>.  This may be useful for
 external Cabal tools which need to interact with Setup in
 a backwards-compatible way: the most predictable mechanism
 for enabling profiling across many legacy versions is to
 NOT use <code>--enable-profiling</code> and use those two flags instead.</p><p>Note that <code>--enable-executable-profiling</code> also affects profiling
 of benchmarks and (non-detailed) test suites.</p></div></div><div class="top"><p class="src"><a id="v:ccLdOptionsBuildInfo" class="def">ccLdOptionsBuildInfo</a> :: [<a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a>] -&gt; [<a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a>] -&gt; <a href="Distribution-Types-BuildInfo.html#t:BuildInfo" title="Distribution.Types.BuildInfo">BuildInfo</a> <a href="src/Distribution.Simple.Configure.html#ccLdOptionsBuildInfo" class="link">Source</a> <a href="#v:ccLdOptionsBuildInfo" class="selflink">#</a></p><div class="doc"><p>Makes a <code><a href="Distribution-Types-BuildInfo.html#t:BuildInfo" title="Distribution.Types.BuildInfo">BuildInfo</a></code> from C compiler and linker flags.</p><p>This can be used with the output from configuration programs like pkg-config
 and similar package-specific programs like mysql-config, freealut-config etc.
 For example:</p><pre>ccflags &lt;- getDbProgramOutput verbosity prog progdb [&quot;--cflags&quot;]
ldflags &lt;- getDbProgramOutput verbosity prog progdb [&quot;--libs&quot;]
return (ccldOptionsBuildInfo (words ccflags) (words ldflags))</pre></div></div><div class="top"><p class="src"><a id="v:checkForeignDeps" class="def">checkForeignDeps</a> :: <a href="Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Verbosity.html#t:Verbosity" title="Distribution.Verbosity">Verbosity</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> () <a href="src/Distribution.Simple.Configure.html#checkForeignDeps" class="link">Source</a> <a href="#v:checkForeignDeps" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:interpretPackageDbFlags" class="def">interpretPackageDbFlags</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> -&gt; [<a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Simple-Compiler.html#t:PackageDB" title="Distribution.Simple.Compiler">PackageDB</a>] -&gt; <a href="Distribution-Simple-Compiler.html#t:PackageDBStack" title="Distribution.Simple.Compiler">PackageDBStack</a> <a href="src/Distribution.Simple.Configure.html#interpretPackageDbFlags" class="link">Source</a> <a href="#v:interpretPackageDbFlags" class="selflink">#</a></p><div class="doc"><p>The user interface specifies the package dbs to use with a combination of
 <code>--global</code>, <code>--user</code> and <code>--package-db=global|user|clear|$file</code>.
 This function combines the global/user flag and interprets the package-db
 flag into a single package db stack.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConfigStateFileError" class="def">ConfigStateFileError</a> <a href="src/Distribution.Simple.Configure.html#ConfigStateFileError" class="link">Source</a> <a href="#t:ConfigStateFileError" class="selflink">#</a></p><div class="doc"><p>The errors that can be thrown when reading the <code>setup-config</code> file.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ConfigStateFileNoHeader" class="def">ConfigStateFileNoHeader</a></td><td class="doc"><p>No header found.</p></td></tr><tr><td class="src"><a id="v:ConfigStateFileBadHeader" class="def">ConfigStateFileBadHeader</a></td><td class="doc"><p>Incorrect header.</p></td></tr><tr><td class="src"><a id="v:ConfigStateFileNoParse" class="def">ConfigStateFileNoParse</a></td><td class="doc"><p>Cannot parse file contents.</p></td></tr><tr><td class="src"><a id="v:ConfigStateFileMissing" class="def">ConfigStateFileMissing</a></td><td class="doc"><p>No file!</p></td></tr><tr><td class="src"><a id="v:ConfigStateFileBadVersion" class="def">ConfigStateFileBadVersion</a> <a href="Distribution-Types-PackageId.html#t:PackageIdentifier" title="Distribution.Types.PackageId">PackageIdentifier</a> <a href="Distribution-Types-PackageId.html#t:PackageIdentifier" title="Distribution.Types.PackageId">PackageIdentifier</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a>)</td><td class="doc"><p>Mismatched version.</p></td></tr></table></div><div class="subs instances"><details id="i:ConfigStateFileError" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ConfigStateFileError:Show:1"></span> <a href="Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a></span> <a href="src/Distribution.Simple.Configure.html#line-183" class="link">Source</a> <a href="#t:ConfigStateFileError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ConfigStateFileError:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Distribution-Simple-Configure.html">Distribution.Simple.Configure</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> -&gt; <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a>] -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ConfigStateFileError:Exception:2"></span> <a href="../base-4.12.0.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a></span> <a href="src/Distribution.Simple.Configure.html#line-186" class="link">Source</a> <a href="#t:ConfigStateFileError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ConfigStateFileError:Exception:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Distribution-Simple-Configure.html">Distribution.Simple.Configure</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> -&gt; <a href="../base-4.12.0.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.12.0.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> -&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:tryGetConfigStateFile" class="def">tryGetConfigStateFile</a> <a href="src/Distribution.Simple.Configure.html#tryGetConfigStateFile" class="link">Source</a> <a href="#v:tryGetConfigStateFile" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Compat-Prelude-Internal.html#t:FilePath" title="Distribution.Compat.Prelude.Internal">FilePath</a></td><td class="doc"><p>The file path of the <code>setup-config</code> file.</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Compat-Prelude-Internal.html#t:IO" title="Distribution.Compat.Prelude.Internal">IO</a> (<a href="Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Distribution-Simple-Configure.html#t:ConfigStateFileError" title="Distribution.Simple.Configure">ConfigStateFileError</a> <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Read the <code><a href="Distribution-Simple-Configure.html#v:localBuildInfoFile" title="Distribution.Simple.Configure">localBuildInfoFile</a></code>, returning either an error or the local build
 info.</p></div></div><div class="top"><p class="src"><a id="v:platformDefines" class="def">platformDefines</a> :: <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; [<a href="Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a>] <a href="src/Distribution.Simple.PreProcess.html#platformDefines" class="link">Source</a> <a href="#v:platformDefines" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>