<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>MkIface</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/MkIface.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.6.5: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">MkIface</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Module for constructing <code>ModIface</code> values (interface files),
 writing them to disk and comparing two versions to see if
 recompilation is required.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:mkIface">mkIface</a> :: <a href="HscTypes.html#t:HscEnv" title="HscTypes">HscEnv</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Fingerprint.html#t:Fingerprint" title="Fingerprint">Fingerprint</a> -&gt; <a href="HscTypes.html#t:ModDetails" title="HscTypes">ModDetails</a> -&gt; <a href="HscTypes.html#t:ModGuts" title="HscTypes">ModGuts</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a>, <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</li><li class="src short"><a href="#v:mkIfaceTc">mkIfaceTc</a> :: <a href="HscTypes.html#t:HscEnv" title="HscTypes">HscEnv</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Fingerprint.html#t:Fingerprint" title="Fingerprint">Fingerprint</a> -&gt; <a href="DynFlags.html#t:SafeHaskellMode" title="DynFlags">SafeHaskellMode</a> -&gt; <a href="HscTypes.html#t:ModDetails" title="HscTypes">ModDetails</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv" title="TcRnTypes">TcGblEnv</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a>, <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</li><li class="src short"><a href="#v:writeIfaceFile">writeIfaceFile</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:checkOldIface">checkOldIface</a> :: <a href="HscTypes.html#t:HscEnv" title="HscTypes">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary" title="HscTypes">ModSummary</a> -&gt; <a href="HscTypes.html#t:SourceModified" title="HscTypes">SourceModified</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a>, <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:RecompileRequired">RecompileRequired</a><ul class="subs"><li>= <a href="#v:UpToDate">UpToDate</a></li><li>| <a href="#v:MustCompile">MustCompile</a></li><li>| <a href="#v:RecompBecause">RecompBecause</a> <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li></ul></li><li class="src short"><a href="#v:recompileRequired">recompileRequired</a> :: <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:mkIfaceExports">mkIfaceExports</a> :: [<a href="Avail.html#t:AvailInfo" title="Avail">AvailInfo</a>] -&gt; [<a href="HscTypes.html#t:IfaceExport" title="HscTypes">IfaceExport</a>]</li><li class="src short"><a href="#v:tyThingToIfaceDecl">tyThingToIfaceDecl</a> :: <a href="Type.html#t:TyThing" title="Type">TyThing</a> -&gt; <a href="IfaceSyn.html#t:IfaceDecl" title="IfaceSyn">IfaceDecl</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:mkIface" class="def">mkIface</a> :: <a href="HscTypes.html#t:HscEnv" title="HscTypes">HscEnv</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Fingerprint.html#t:Fingerprint" title="Fingerprint">Fingerprint</a> -&gt; <a href="HscTypes.html#t:ModDetails" title="HscTypes">ModDetails</a> -&gt; <a href="HscTypes.html#t:ModGuts" title="HscTypes">ModGuts</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a>, <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="src/MkIface.html#mkIface" class="link">Source</a> <a href="#v:mkIface" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkIfaceTc" class="def">mkIfaceTc</a> :: <a href="HscTypes.html#t:HscEnv" title="HscTypes">HscEnv</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Fingerprint.html#t:Fingerprint" title="Fingerprint">Fingerprint</a> -&gt; <a href="DynFlags.html#t:SafeHaskellMode" title="DynFlags">SafeHaskellMode</a> -&gt; <a href="HscTypes.html#t:ModDetails" title="HscTypes">ModDetails</a> -&gt; <a href="TcRnTypes.html#t:TcGblEnv" title="TcRnTypes">TcGblEnv</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a>, <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="src/MkIface.html#mkIfaceTc" class="link">Source</a> <a href="#v:mkIfaceTc" class="selflink">#</a></p><div class="doc"><p>make an interface from the results of typechecking only.  Useful
 for non-optimising compilation, or where we aren't generating any
 object code at all (<code><a href="DynFlags.html#v:HscNothing" title="DynFlags">HscNothing</a></code>).</p></div></div><div class="top"><p class="src"><a id="v:writeIfaceFile" class="def">writeIfaceFile</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/MkIface.html#writeIfaceFile" class="link">Source</a> <a href="#v:writeIfaceFile" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkOldIface" class="def">checkOldIface</a> :: <a href="HscTypes.html#t:HscEnv" title="HscTypes">HscEnv</a> -&gt; <a href="HscTypes.html#t:ModSummary" title="HscTypes">ModSummary</a> -&gt; <a href="HscTypes.html#t:SourceModified" title="HscTypes">SourceModified</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a>, <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="HscTypes.html#t:ModIface" title="HscTypes">ModIface</a>) <a href="src/MkIface.html#checkOldIface" class="link">Source</a> <a href="#v:checkOldIface" class="selflink">#</a></p><div class="doc"><p>Top level function to check if the version of an old interface file
 is equivalent to the current source file the user asked us to compile.
 If the same, we can avoid recompilation. We return a tuple where the
 first element is a bool saying if we should recompile the object file
 and the second is maybe the interface file, where Nothng means to
 rebuild the interface file not use the exisitng one.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RecompileRequired" class="def">RecompileRequired</a> <a href="src/MkIface.html#RecompileRequired" class="link">Source</a> <a href="#t:RecompileRequired" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UpToDate" class="def">UpToDate</a></td><td class="doc"><p>everything is up to date, recompilation is not required</p></td></tr><tr><td class="src"><a id="v:MustCompile" class="def">MustCompile</a></td><td class="doc"><p>The .hs file has been touched, or the .o/.hi file does not exist</p></td></tr><tr><td class="src"><a id="v:RecompBecause" class="def">RecompBecause</a> <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>The .o/.hi files are up to date, but something else has changed
 to force recompilation; the String says what (one-line summary)</p></td></tr></table></div><div class="subs instances"><details id="i:RecompileRequired" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RecompileRequired:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a></span> <a href="#t:RecompileRequired" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RecompileRequired:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="MkIface.html">MkIface</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RecompileRequired:Semigroup:2"></span> <a href="../base-4.12.0.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a></span> <a href="#t:RecompileRequired" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RecompileRequired:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="MkIface.html">MkIface</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> <a href="../base-4.12.0.0/src/GHC-Base.html#%3C%3E" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> <a href="../base-4.12.0.0/src/GHC-Base.html#sconcat" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> <a href="../base-4.12.0.0/src/GHC-Base.html#stimes" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RecompileRequired:Monoid:3"></span> <a href="../base-4.12.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a></span> <a href="#t:RecompileRequired" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RecompileRequired:Monoid:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="MkIface.html">MkIface</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> <a href="../base-4.12.0.0/src/GHC-Base.html#mempty" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> <a href="../base-4.12.0.0/src/GHC-Base.html#mappend" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a>] -&gt; <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> <a href="../base-4.12.0.0/src/GHC-Base.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:recompileRequired" class="def">recompileRequired</a> :: <a href="MkIface.html#t:RecompileRequired" title="MkIface">RecompileRequired</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/MkIface.html#recompileRequired" class="link">Source</a> <a href="#v:recompileRequired" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkIfaceExports" class="def">mkIfaceExports</a> :: [<a href="Avail.html#t:AvailInfo" title="Avail">AvailInfo</a>] -&gt; [<a href="HscTypes.html#t:IfaceExport" title="HscTypes">IfaceExport</a>] <a href="src/MkIface.html#mkIfaceExports" class="link">Source</a> <a href="#v:mkIfaceExports" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:tyThingToIfaceDecl" class="def">tyThingToIfaceDecl</a> :: <a href="Type.html#t:TyThing" title="Type">TyThing</a> -&gt; <a href="IfaceSyn.html#t:IfaceDecl" title="IfaceSyn">IfaceDecl</a> <a href="src/MkIface.html#tyThingToIfaceDecl" class="link">Source</a> <a href="#v:tyThingToIfaceDecl" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>