<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CoreSubst</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/CoreSubst.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.6.5: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">CoreSubst</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Main data types</a><ul><li><a href="#g:2">Substituting into expressions and related types</a></li><li><a href="#g:3">Operations on substitutions</a></li><li><a href="#g:4">Substituting and cloning binders</a></li></ul></li></ul></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Subst">Subst</a> = <a href="#v:Subst">Subst</a> <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> <a href="CoreSubst.html#t:IdSubstEnv" title="CoreSubst">IdSubstEnv</a> <a href="CoreSubst.html#t:TvSubstEnv" title="CoreSubst">TvSubstEnv</a> <a href="Coercion.html#t:CvSubstEnv" title="Coercion">CvSubstEnv</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:TvSubstEnv">TvSubstEnv</a> = <a href="VarEnv.html#t:TyVarEnv" title="VarEnv">TyVarEnv</a> <a href="Type.html#t:Type" title="Type">Type</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:IdSubstEnv">IdSubstEnv</a> = <a href="VarEnv.html#t:IdEnv" title="VarEnv">IdEnv</a> <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:InScopeSet">InScopeSet</a></li><li class="src short"><a href="#v:deShadowBinds">deShadowBinds</a> :: <a href="CoreSyn.html#t:CoreProgram" title="CoreSyn">CoreProgram</a> -&gt; <a href="CoreSyn.html#t:CoreProgram" title="CoreSyn">CoreProgram</a></li><li class="src short"><a href="#v:substSpec">substSpec</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="IdInfo.html#t:RuleInfo" title="IdInfo">RuleInfo</a> -&gt; <a href="IdInfo.html#t:RuleInfo" title="IdInfo">RuleInfo</a></li><li class="src short"><a href="#v:substRulesForImportedIds">substRulesForImportedIds</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="CoreSyn.html#t:CoreRule" title="CoreSyn">CoreRule</a>] -&gt; [<a href="CoreSyn.html#t:CoreRule" title="CoreSyn">CoreRule</a>]</li><li class="src short"><a href="#v:substTy">substTy</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a></li><li class="src short"><a href="#v:substCo">substCo</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Coercion.html#t:Coercion" title="Coercion">Coercion</a> -&gt; <a href="Coercion.html#t:Coercion" title="Coercion">Coercion</a></li><li class="src short"><a href="#v:substExpr">substExpr</a> :: <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></li><li class="src short"><a href="#v:substExprSC">substExprSC</a> :: <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></li><li class="src short"><a href="#v:substBind">substBind</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a>)</li><li class="src short"><a href="#v:substBindSC">substBindSC</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a>)</li><li class="src short"><a href="#v:substUnfolding">substUnfolding</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:Unfolding" title="CoreSyn">Unfolding</a> -&gt; <a href="CoreSyn.html#t:Unfolding" title="CoreSyn">Unfolding</a></li><li class="src short"><a href="#v:substUnfoldingSC">substUnfoldingSC</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:Unfolding" title="CoreSyn">Unfolding</a> -&gt; <a href="CoreSyn.html#t:Unfolding" title="CoreSyn">Unfolding</a></li><li class="src short"><a href="#v:lookupIdSubst">lookupIdSubst</a> :: <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></li><li class="src short"><a href="#v:lookupTCvSubst">lookupTCvSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:TyVar" title="Var">TyVar</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a></li><li class="src short"><a href="#v:substIdOcc">substIdOcc</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a></li><li class="src short"><a href="#v:substTickish">substTickish</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:Tickish" title="CoreSyn">Tickish</a> <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="CoreSyn.html#t:Tickish" title="CoreSyn">Tickish</a> <a href="Var.html#t:Id" title="Var">Id</a></li><li class="src short"><a href="#v:substDVarSet">substDVarSet</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="VarSet.html#t:DVarSet" title="VarSet">DVarSet</a> -&gt; <a href="VarSet.html#t:DVarSet" title="VarSet">DVarSet</a></li><li class="src short"><a href="#v:substIdInfo">substIdInfo</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="IdInfo.html#t:IdInfo" title="IdInfo">IdInfo</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="IdInfo.html#t:IdInfo" title="IdInfo">IdInfo</a></li><li class="src short"><a href="#v:emptySubst">emptySubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:mkEmptySubst">mkEmptySubst</a> :: <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:mkSubst">mkSubst</a> :: <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; <a href="CoreSubst.html#t:TvSubstEnv" title="CoreSubst">TvSubstEnv</a> -&gt; <a href="Coercion.html#t:CvSubstEnv" title="Coercion">CvSubstEnv</a> -&gt; <a href="CoreSubst.html#t:IdSubstEnv" title="CoreSubst">IdSubstEnv</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:mkOpenSubst">mkOpenSubst</a> :: <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; [(<a href="Var.html#t:Var" title="Var">Var</a>, <a href="CoreSyn.html#t:CoreArg" title="CoreSyn">CoreArg</a>)] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:substInScope">substInScope</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a></li><li class="src short"><a href="#v:isEmptySubst">isEmptySubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:extendIdSubst">extendIdSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendIdSubstList">extendIdSubstList</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [(<a href="Var.html#t:Id" title="Var">Id</a>, <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a>)] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendTCvSubst">extendTCvSubst</a> :: <a href="Type.html#t:TCvSubst" title="Type">TCvSubst</a> -&gt; <a href="Var.html#t:TyCoVar" title="Var">TyCoVar</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> -&gt; <a href="Type.html#t:TCvSubst" title="Type">TCvSubst</a></li><li class="src short"><a href="#v:extendTvSubstList">extendTvSubstList</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [(<a href="Var.html#t:TyVar" title="Var">TyVar</a>, <a href="Type.html#t:Type" title="Type">Type</a>)] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendSubst">extendSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSyn.html#t:CoreArg" title="CoreSyn">CoreArg</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendSubstList">extendSubstList</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [(<a href="Var.html#t:Var" title="Var">Var</a>, <a href="CoreSyn.html#t:CoreArg" title="CoreSyn">CoreArg</a>)] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendSubstWithVar">extendSubstWithVar</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:zapSubstEnv">zapSubstEnv</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:addInScopeSet">addInScopeSet</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="VarSet.html#t:VarSet" title="VarSet">VarSet</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendInScope">extendInScope</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendInScopeList">extendInScopeList</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Var" title="Var">Var</a>] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendInScopeIds">extendInScopeIds</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Id" title="Var">Id</a>] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:isInScope">isInScope</a> :: <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:setInScope">setInScope</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:getTCvSubst">getTCvSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Type.html#t:TCvSubst" title="Type">TCvSubst</a></li><li class="src short"><a href="#v:extendTvSubst">extendTvSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:TyVar" title="Var">TyVar</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:extendCvSubst">extendCvSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:CoVar" title="Var">CoVar</a> -&gt; <a href="Coercion.html#t:Coercion" title="Coercion">Coercion</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:delBndr">delBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:delBndrs">delBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Var" title="Var">Var</a>] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></li><li class="src short"><a href="#v:substBndr">substBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:Var" title="Var">Var</a>)</li><li class="src short"><a href="#v:substBndrs">substBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Var" title="Var">Var</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Var" title="Var">Var</a>])</li><li class="src short"><a href="#v:substRecBndrs">substRecBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Id" title="Var">Id</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Id" title="Var">Id</a>])</li><li class="src short"><a href="#v:substTyVarBndr">substTyVarBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:TyVar" title="Var">TyVar</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:TyVar" title="Var">TyVar</a>)</li><li class="src short"><a href="#v:substCoVarBndr">substCoVarBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:TyVar" title="Var">TyVar</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:TyVar" title="Var">TyVar</a>)</li><li class="src short"><a href="#v:cloneBndr">cloneBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Unique.html#t:Unique" title="Unique">Unique</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:Var" title="Var">Var</a>)</li><li class="src short"><a href="#v:cloneBndrs">cloneBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="UniqSupply.html#t:UniqSupply" title="UniqSupply">UniqSupply</a> -&gt; [<a href="Var.html#t:Var" title="Var">Var</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Var" title="Var">Var</a>])</li><li class="src short"><a href="#v:cloneIdBndr">cloneIdBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="UniqSupply.html#t:UniqSupply" title="UniqSupply">UniqSupply</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:Id" title="Var">Id</a>)</li><li class="src short"><a href="#v:cloneIdBndrs">cloneIdBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="UniqSupply.html#t:UniqSupply" title="UniqSupply">UniqSupply</a> -&gt; [<a href="Var.html#t:Id" title="Var">Id</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Id" title="Var">Id</a>])</li><li class="src short"><a href="#v:cloneRecIdBndrs">cloneRecIdBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="UniqSupply.html#t:UniqSupply" title="UniqSupply">UniqSupply</a> -&gt; [<a href="Var.html#t:Id" title="Var">Id</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Id" title="Var">Id</a>])</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Main data types</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Subst" class="def">Subst</a> <a href="src/CoreSubst.html#Subst" class="link">Source</a> <a href="#t:Subst" class="selflink">#</a></p><div class="doc"><p>A substitution environment, containing <code><a href="Var.html#t:Id" title="Var">Id</a></code>, <code><a href="Var.html#t:TyVar" title="Var">TyVar</a></code>, and <code><a href="Var.html#t:CoVar" title="Var">CoVar</a></code>
 substitutions.</p><p>Some invariants apply to how you use the substitution:</p><ol><li>Note [The substitution invariant] in TyCoRep</li><li>Note [Substitutions apply only once] in TyCoRep</li></ol></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Subst" class="def">Subst</a> <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> <a href="CoreSubst.html#t:IdSubstEnv" title="CoreSubst">IdSubstEnv</a> <a href="CoreSubst.html#t:TvSubstEnv" title="CoreSubst">TvSubstEnv</a> <a href="Coercion.html#t:CvSubstEnv" title="Coercion">CvSubstEnv</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:Subst" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Subst:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></span> <a href="#t:Subst" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Subst:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="CoreSubst.html">CoreSubst</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TvSubstEnv" class="def">TvSubstEnv</a> = <a href="VarEnv.html#t:TyVarEnv" title="VarEnv">TyVarEnv</a> <a href="Type.html#t:Type" title="Type">Type</a> <a href="src/TyCoRep.html#TvSubstEnv" class="link">Source</a> <a href="#t:TvSubstEnv" class="selflink">#</a></p><div class="doc"><p>A substitution of <code><a href="Type.html#t:Type" title="Type">Type</a></code>s for <code><a href="Var.html#t:TyVar" title="Var">TyVar</a></code>s
                 and <code><a href="Kind.html#t:Kind" title="Kind">Kind</a></code>s for <code><a href="Var.html#t:KindVar" title="Var">KindVar</a></code>s</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IdSubstEnv" class="def">IdSubstEnv</a> = <a href="VarEnv.html#t:IdEnv" title="VarEnv">IdEnv</a> <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> <a href="src/CoreSubst.html#IdSubstEnv" class="link">Source</a> <a href="#t:IdSubstEnv" class="selflink">#</a></p><div class="doc"><p>An environment for substituting for <code><a href="Var.html#t:Id" title="Var">Id</a></code>s</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:InScopeSet" class="def">InScopeSet</a> <a href="src/VarEnv.html#InScopeSet" class="link">Source</a> <a href="#t:InScopeSet" class="selflink">#</a></p><div class="doc"><p>A set of variables that are in scope at some point
 &quot;Secrets of the Glasgow Haskell Compiler inliner&quot; Section 3.2 provides
 the motivation for this abstraction.</p></div><div class="subs instances"><details id="i:InScopeSet" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:InScopeSet:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a></span> <a href="#t:InScopeSet" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:InScopeSet:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="VarEnv.html">VarEnv</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h2>Substituting into expressions and related types</h2></a><div class="top"><p class="src"><a id="v:deShadowBinds" class="def">deShadowBinds</a> :: <a href="CoreSyn.html#t:CoreProgram" title="CoreSyn">CoreProgram</a> -&gt; <a href="CoreSyn.html#t:CoreProgram" title="CoreSyn">CoreProgram</a> <a href="src/CoreSubst.html#deShadowBinds" class="link">Source</a> <a href="#v:deShadowBinds" class="selflink">#</a></p><div class="doc"><p>De-shadowing the program is sometimes a useful pre-pass. It can be done simply
 by running over the bindings with an empty substitution, because substitution
 returns a result that has no-shadowing guaranteed.</p><p>(Actually, within a single <em>type</em> there might still be shadowing, because
 <code><a href="CoreSubst.html#v:substTy" title="CoreSubst">substTy</a></code> is a no-op for the empty substitution, but that's probably OK.)</p><dl><dt>Aug 09</dt><dd>This function is not used in GHC at the moment, but seems so
          short and simple that I'm going to leave it here</dd></dl></div></div><div class="top"><p class="src"><a id="v:substSpec" class="def">substSpec</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="IdInfo.html#t:RuleInfo" title="IdInfo">RuleInfo</a> -&gt; <a href="IdInfo.html#t:RuleInfo" title="IdInfo">RuleInfo</a> <a href="src/CoreSubst.html#substSpec" class="link">Source</a> <a href="#v:substSpec" class="selflink">#</a></p><div class="doc"><p>Substitutes for the <code><a href="Var.html#t:Id" title="Var">Id</a></code>s within the <code>WorkerInfo</code> given the new function <code><a href="Var.html#t:Id" title="Var">Id</a></code></p></div></div><div class="top"><p class="src"><a id="v:substRulesForImportedIds" class="def">substRulesForImportedIds</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="CoreSyn.html#t:CoreRule" title="CoreSyn">CoreRule</a>] -&gt; [<a href="CoreSyn.html#t:CoreRule" title="CoreSyn">CoreRule</a>] <a href="src/CoreSubst.html#substRulesForImportedIds" class="link">Source</a> <a href="#v:substRulesForImportedIds" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:substTy" class="def">substTy</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> <a href="src/CoreSubst.html#substTy" class="link">Source</a> <a href="#v:substTy" class="selflink">#</a></p><div class="doc"><p>See <code><a href="Type.html#v:substTy" title="Type">substTy</a></code></p></div></div><div class="top"><p class="src"><a id="v:substCo" class="def">substCo</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Coercion.html#t:Coercion" title="Coercion">Coercion</a> -&gt; <a href="Coercion.html#t:Coercion" title="Coercion">Coercion</a> <a href="src/CoreSubst.html#substCo" class="link">Source</a> <a href="#v:substCo" class="selflink">#</a></p><div class="doc"><p>See <code><a href="Coercion.html#v:substCo" title="Coercion">substCo</a></code></p></div></div><div class="top"><p class="src"><a id="v:substExpr" class="def">substExpr</a> :: <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> <a href="src/CoreSubst.html#substExpr" class="link">Source</a> <a href="#v:substExpr" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:substExprSC" class="def">substExprSC</a> :: <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> <a href="src/CoreSubst.html#substExprSC" class="link">Source</a> <a href="#v:substExprSC" class="selflink">#</a></p><div class="doc"><p>Apply a substitution to an entire <code><a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a></code>. Remember, you may only
 apply the substitution <em>once</em>:
 see Note [Substitutions apply only once] in TyCoRep</p><p>Do *not* attempt to short-cut in the case of an empty substitution!
 See Note [Extending the Subst]</p></div></div><div class="top"><p class="src"><a id="v:substBind" class="def">substBind</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a>) <a href="src/CoreSubst.html#substBind" class="link">Source</a> <a href="#v:substBind" class="selflink">#</a></p><div class="doc"><p>Apply a substitution to an entire <code><a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a></code>, additionally returning an updated <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code>
 that should be used by subsequent substitutions.</p></div></div><div class="top"><p class="src"><a id="v:substBindSC" class="def">substBindSC</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a>) <a href="src/CoreSubst.html#substBindSC" class="link">Source</a> <a href="#v:substBindSC" class="selflink">#</a></p><div class="doc"><p>Apply a substitution to an entire <code><a href="CoreSyn.html#t:CoreBind" title="CoreSyn">CoreBind</a></code>, additionally returning an updated <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code>
 that should be used by subsequent substitutions.</p></div></div><div class="top"><p class="src"><a id="v:substUnfolding" class="def">substUnfolding</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:Unfolding" title="CoreSyn">Unfolding</a> -&gt; <a href="CoreSyn.html#t:Unfolding" title="CoreSyn">Unfolding</a> <a href="src/CoreSubst.html#substUnfolding" class="link">Source</a> <a href="#v:substUnfolding" class="selflink">#</a></p><div class="doc"><p>Substitutes for the <code><a href="Var.html#t:Id" title="Var">Id</a></code>s within an unfolding</p></div></div><div class="top"><p class="src"><a id="v:substUnfoldingSC" class="def">substUnfoldingSC</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:Unfolding" title="CoreSyn">Unfolding</a> -&gt; <a href="CoreSyn.html#t:Unfolding" title="CoreSyn">Unfolding</a> <a href="src/CoreSubst.html#substUnfoldingSC" class="link">Source</a> <a href="#v:substUnfoldingSC" class="selflink">#</a></p><div class="doc"><p>Substitutes for the <code><a href="Var.html#t:Id" title="Var">Id</a></code>s within an unfolding</p></div></div><div class="top"><p class="src"><a id="v:lookupIdSubst" class="def">lookupIdSubst</a> :: <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> <a href="src/CoreSubst.html#lookupIdSubst" class="link">Source</a> <a href="#v:lookupIdSubst" class="selflink">#</a></p><div class="doc"><p>Find the substitution for an <code><a href="Var.html#t:Id" title="Var">Id</a></code> in the <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code></p></div></div><div class="top"><p class="src"><a id="v:lookupTCvSubst" class="def">lookupTCvSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:TyVar" title="Var">TyVar</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> <a href="src/CoreSubst.html#lookupTCvSubst" class="link">Source</a> <a href="#v:lookupTCvSubst" class="selflink">#</a></p><div class="doc"><p>Find the substitution for a <code><a href="Var.html#t:TyVar" title="Var">TyVar</a></code> in the <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code></p></div></div><div class="top"><p class="src"><a id="v:substIdOcc" class="def">substIdOcc</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> <a href="src/CoreSubst.html#substIdOcc" class="link">Source</a> <a href="#v:substIdOcc" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:substTickish" class="def">substTickish</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSyn.html#t:Tickish" title="CoreSyn">Tickish</a> <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="CoreSyn.html#t:Tickish" title="CoreSyn">Tickish</a> <a href="Var.html#t:Id" title="Var">Id</a> <a href="src/CoreSubst.html#substTickish" class="link">Source</a> <a href="#v:substTickish" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:substDVarSet" class="def">substDVarSet</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="VarSet.html#t:DVarSet" title="VarSet">DVarSet</a> -&gt; <a href="VarSet.html#t:DVarSet" title="VarSet">DVarSet</a> <a href="src/CoreSubst.html#substDVarSet" class="link">Source</a> <a href="#v:substDVarSet" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:substIdInfo" class="def">substIdInfo</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="IdInfo.html#t:IdInfo" title="IdInfo">IdInfo</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="IdInfo.html#t:IdInfo" title="IdInfo">IdInfo</a> <a href="src/CoreSubst.html#substIdInfo" class="link">Source</a> <a href="#v:substIdInfo" class="selflink">#</a></p><div class="doc"><p>Substitute into some <code><a href="IdInfo.html#t:IdInfo" title="IdInfo">IdInfo</a></code> with regard to the supplied new <code><a href="Var.html#t:Id" title="Var">Id</a></code>.</p></div></div><a href="#g:3" id="g:3"><h2>Operations on substitutions</h2></a><div class="top"><p class="src"><a id="v:emptySubst" class="def">emptySubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#emptySubst" class="link">Source</a> <a href="#v:emptySubst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkEmptySubst" class="def">mkEmptySubst</a> :: <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#mkEmptySubst" class="link">Source</a> <a href="#v:mkEmptySubst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkSubst" class="def">mkSubst</a> :: <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; <a href="CoreSubst.html#t:TvSubstEnv" title="CoreSubst">TvSubstEnv</a> -&gt; <a href="Coercion.html#t:CvSubstEnv" title="Coercion">CvSubstEnv</a> -&gt; <a href="CoreSubst.html#t:IdSubstEnv" title="CoreSubst">IdSubstEnv</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#mkSubst" class="link">Source</a> <a href="#v:mkSubst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkOpenSubst" class="def">mkOpenSubst</a> :: <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; [(<a href="Var.html#t:Var" title="Var">Var</a>, <a href="CoreSyn.html#t:CoreArg" title="CoreSyn">CoreArg</a>)] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#mkOpenSubst" class="link">Source</a> <a href="#v:mkOpenSubst" class="selflink">#</a></p><div class="doc"><p>Simultaneously substitute for a bunch of variables
   No left-right shadowing
   ie the substitution for   (x y. e) a1 a2
      so neither x nor y scope over a1 a2</p></div></div><div class="top"><p class="src"><a id="v:substInScope" class="def">substInScope</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> <a href="src/CoreSubst.html#substInScope" class="link">Source</a> <a href="#v:substInScope" class="selflink">#</a></p><div class="doc"><p>Find the in-scope set: see TyCORep Note [The substitution invariant]</p></div></div><div class="top"><p class="src"><a id="v:isEmptySubst" class="def">isEmptySubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/CoreSubst.html#isEmptySubst" class="link">Source</a> <a href="#v:isEmptySubst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:extendIdSubst" class="def">extendIdSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendIdSubst" class="link">Source</a> <a href="#v:extendIdSubst" class="selflink">#</a></p><div class="doc"><p>Add a substitution for an <code><a href="Var.html#t:Id" title="Var">Id</a></code> to the <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code>: you must ensure that the in-scope set is
 such that TyCORep Note [The substitution invariant]
 holds after extending the substitution like this</p></div></div><div class="top"><p class="src"><a id="v:extendIdSubstList" class="def">extendIdSubstList</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [(<a href="Var.html#t:Id" title="Var">Id</a>, <a href="CoreSyn.html#t:CoreExpr" title="CoreSyn">CoreExpr</a>)] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendIdSubstList" class="link">Source</a> <a href="#v:extendIdSubstList" class="selflink">#</a></p><div class="doc"><p>Adds multiple <code><a href="Var.html#t:Id" title="Var">Id</a></code> substitutions to the <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code>: see also <code><a href="CoreSubst.html#v:extendIdSubst" title="CoreSubst">extendIdSubst</a></code></p></div></div><div class="top"><p class="src"><a id="v:extendTCvSubst" class="def">extendTCvSubst</a> :: <a href="Type.html#t:TCvSubst" title="Type">TCvSubst</a> -&gt; <a href="Var.html#t:TyCoVar" title="Var">TyCoVar</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> -&gt; <a href="Type.html#t:TCvSubst" title="Type">TCvSubst</a> <a href="src/TyCoRep.html#extendTCvSubst" class="link">Source</a> <a href="#v:extendTCvSubst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:extendTvSubstList" class="def">extendTvSubstList</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [(<a href="Var.html#t:TyVar" title="Var">TyVar</a>, <a href="Type.html#t:Type" title="Type">Type</a>)] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendTvSubstList" class="link">Source</a> <a href="#v:extendTvSubstList" class="selflink">#</a></p><div class="doc"><p>Adds multiple <code><a href="Var.html#t:TyVar" title="Var">TyVar</a></code> substitutions to the <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code>: see also <code><a href="CoreSubst.html#v:extendTvSubst" title="CoreSubst">extendTvSubst</a></code></p></div></div><div class="top"><p class="src"><a id="v:extendSubst" class="def">extendSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSyn.html#t:CoreArg" title="CoreSyn">CoreArg</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendSubst" class="link">Source</a> <a href="#v:extendSubst" class="selflink">#</a></p><div class="doc"><p>Add a substitution appropriate to the thing being substituted
   (whether an expression, type, or coercion). See also
   <code><a href="CoreSubst.html#v:extendIdSubst" title="CoreSubst">extendIdSubst</a></code>, <code><a href="CoreSubst.html#v:extendTvSubst" title="CoreSubst">extendTvSubst</a></code>, <code><a href="CoreSubst.html#v:extendCvSubst" title="CoreSubst">extendCvSubst</a></code></p></div></div><div class="top"><p class="src"><a id="v:extendSubstList" class="def">extendSubstList</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [(<a href="Var.html#t:Var" title="Var">Var</a>, <a href="CoreSyn.html#t:CoreArg" title="CoreSyn">CoreArg</a>)] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendSubstList" class="link">Source</a> <a href="#v:extendSubstList" class="selflink">#</a></p><div class="doc"><p>Add a substitution as appropriate to each of the terms being
   substituted (whether expressions, types, or coercions). See also
   <code><a href="CoreSubst.html#v:extendSubst" title="CoreSubst">extendSubst</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:extendSubstWithVar" class="def">extendSubstWithVar</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendSubstWithVar" class="link">Source</a> <a href="#v:extendSubstWithVar" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:zapSubstEnv" class="def">zapSubstEnv</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#zapSubstEnv" class="link">Source</a> <a href="#v:zapSubstEnv" class="selflink">#</a></p><div class="doc"><p>Remove all substitutions for <code><a href="Var.html#t:Id" title="Var">Id</a></code>s and <code><a href="CoreSyn.html#t:Expr" title="CoreSyn">Expr</a></code>s that might have been built up
 while preserving the in-scope set</p></div></div><div class="top"><p class="src"><a id="v:addInScopeSet" class="def">addInScopeSet</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="VarSet.html#t:VarSet" title="VarSet">VarSet</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#addInScopeSet" class="link">Source</a> <a href="#v:addInScopeSet" class="selflink">#</a></p><div class="doc"><p>Add the <code><a href="CoreSyn.html#t:Expr" title="CoreSyn">Expr</a></code> to the in-scope set, but do not remove
 any existing substitutions for it</p></div></div><div class="top"><p class="src"><a id="v:extendInScope" class="def">extendInScope</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendInScope" class="link">Source</a> <a href="#v:extendInScope" class="selflink">#</a></p><div class="doc"><p>Add the <code><a href="CoreSyn.html#t:Expr" title="CoreSyn">Expr</a></code> to the in-scope set: as a side effect,
 and remove any existing substitutions for it</p></div></div><div class="top"><p class="src"><a id="v:extendInScopeList" class="def">extendInScopeList</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Var" title="Var">Var</a>] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendInScopeList" class="link">Source</a> <a href="#v:extendInScopeList" class="selflink">#</a></p><div class="doc"><p>Add the <code><a href="CoreSyn.html#t:Expr" title="CoreSyn">Expr</a></code>s to the in-scope set: see also <code><a href="CoreSubst.html#v:extendInScope" title="CoreSubst">extendInScope</a></code></p></div></div><div class="top"><p class="src"><a id="v:extendInScopeIds" class="def">extendInScopeIds</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Id" title="Var">Id</a>] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendInScopeIds" class="link">Source</a> <a href="#v:extendInScopeIds" class="selflink">#</a></p><div class="doc"><p>Optimized version of <code><a href="CoreSubst.html#v:extendInScopeList" title="CoreSubst">extendInScopeList</a></code> that can be used if you are certain
 all the things being added are <code><a href="Var.html#t:Id" title="Var">Id</a></code>s and hence none are <code><a href="Var.html#t:TyVar" title="Var">TyVar</a></code>s or <code><a href="Var.html#t:CoVar" title="Var">CoVar</a></code>s</p></div></div><div class="top"><p class="src"><a id="v:isInScope" class="def">isInScope</a> :: <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/CoreSubst.html#isInScope" class="link">Source</a> <a href="#v:isInScope" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setInScope" class="def">setInScope</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="CoreSubst.html#t:InScopeSet" title="CoreSubst">InScopeSet</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#setInScope" class="link">Source</a> <a href="#v:setInScope" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getTCvSubst" class="def">getTCvSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Type.html#t:TCvSubst" title="Type">TCvSubst</a> <a href="src/CoreSubst.html#getTCvSubst" class="link">Source</a> <a href="#v:getTCvSubst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:extendTvSubst" class="def">extendTvSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:TyVar" title="Var">TyVar</a> -&gt; <a href="Type.html#t:Type" title="Type">Type</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendTvSubst" class="link">Source</a> <a href="#v:extendTvSubst" class="selflink">#</a></p><div class="doc"><p>Add a substitution for a <code><a href="Var.html#t:TyVar" title="Var">TyVar</a></code> to the <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code>
 The <code><a href="Var.html#t:TyVar" title="Var">TyVar</a></code> *must* be a real TyVar, and not a CoVar
 You must ensure that the in-scope set is such that
 TyCORep Note [The substitution invariant] holds
 after extending the substitution like this.</p></div></div><div class="top"><p class="src"><a id="v:extendCvSubst" class="def">extendCvSubst</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:CoVar" title="Var">CoVar</a> -&gt; <a href="Coercion.html#t:Coercion" title="Coercion">Coercion</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#extendCvSubst" class="link">Source</a> <a href="#v:extendCvSubst" class="selflink">#</a></p><div class="doc"><p>Add a substitution from a <code><a href="Var.html#t:CoVar" title="Var">CoVar</a></code> to a <code><a href="CoreSyn.html#t:Expr" title="CoreSyn">Expr</a></code> to the <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code>:
 you must ensure that the in-scope set satisfies
 TyCORep Note [The substitution invariant]
 after extending the substitution like this</p></div></div><div class="top"><p class="src"><a id="v:delBndr" class="def">delBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#delBndr" class="link">Source</a> <a href="#v:delBndr" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:delBndrs" class="def">delBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Var" title="Var">Var</a>] -&gt; <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> <a href="src/CoreSubst.html#delBndrs" class="link">Source</a> <a href="#v:delBndrs" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h2>Substituting and cloning binders</h2></a><div class="top"><p class="src"><a id="v:substBndr" class="def">substBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:Var" title="Var">Var</a>) <a href="src/CoreSubst.html#substBndr" class="link">Source</a> <a href="#v:substBndr" class="selflink">#</a></p><div class="doc"><p>Substitutes a <code><a href="CoreSyn.html#t:Expr" title="CoreSyn">Expr</a></code> for another one according to the <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code> given, returning
 the result and an updated <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code> that should be used by subsequent substitutions.
 <code><a href="IdInfo.html#t:IdInfo" title="IdInfo">IdInfo</a></code> is preserved by this process, although it is substituted into appropriately.</p></div></div><div class="top"><p class="src"><a id="v:substBndrs" class="def">substBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Var" title="Var">Var</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Var" title="Var">Var</a>]) <a href="src/CoreSubst.html#substBndrs" class="link">Source</a> <a href="#v:substBndrs" class="selflink">#</a></p><div class="doc"><p>Applies <code><a href="CoreSubst.html#v:substBndr" title="CoreSubst">substBndr</a></code> to a number of <code><a href="CoreSyn.html#t:Expr" title="CoreSyn">Expr</a></code>s, accumulating a new <code><a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a></code> left-to-right</p></div></div><div class="top"><p class="src"><a id="v:substRecBndrs" class="def">substRecBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; [<a href="Var.html#t:Id" title="Var">Id</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Id" title="Var">Id</a>]) <a href="src/CoreSubst.html#substRecBndrs" class="link">Source</a> <a href="#v:substRecBndrs" class="selflink">#</a></p><div class="doc"><p>Substitute in a mutually recursive group of <code><a href="Var.html#t:Id" title="Var">Id</a></code>s</p></div></div><div class="top"><p class="src"><a id="v:substTyVarBndr" class="def">substTyVarBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:TyVar" title="Var">TyVar</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:TyVar" title="Var">TyVar</a>) <a href="src/CoreSubst.html#substTyVarBndr" class="link">Source</a> <a href="#v:substTyVarBndr" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:substCoVarBndr" class="def">substCoVarBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Var.html#t:TyVar" title="Var">TyVar</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:TyVar" title="Var">TyVar</a>) <a href="src/CoreSubst.html#substCoVarBndr" class="link">Source</a> <a href="#v:substCoVarBndr" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:cloneBndr" class="def">cloneBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="Unique.html#t:Unique" title="Unique">Unique</a> -&gt; <a href="Var.html#t:Var" title="Var">Var</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:Var" title="Var">Var</a>) <a href="src/CoreSubst.html#cloneBndr" class="link">Source</a> <a href="#v:cloneBndr" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:cloneBndrs" class="def">cloneBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="UniqSupply.html#t:UniqSupply" title="UniqSupply">UniqSupply</a> -&gt; [<a href="Var.html#t:Var" title="Var">Var</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Var" title="Var">Var</a>]) <a href="src/CoreSubst.html#cloneBndrs" class="link">Source</a> <a href="#v:cloneBndrs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:cloneIdBndr" class="def">cloneIdBndr</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="UniqSupply.html#t:UniqSupply" title="UniqSupply">UniqSupply</a> -&gt; <a href="Var.html#t:Id" title="Var">Id</a> -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, <a href="Var.html#t:Id" title="Var">Id</a>) <a href="src/CoreSubst.html#cloneIdBndr" class="link">Source</a> <a href="#v:cloneIdBndr" class="selflink">#</a></p><div class="doc"><p>Very similar to <code><a href="CoreSubst.html#v:substBndr" title="CoreSubst">substBndr</a></code>, but it always allocates a new <code><a href="Unique.html#t:Unique" title="Unique">Unique</a></code> for
 each variable in its output.  It substitutes the IdInfo though.</p></div></div><div class="top"><p class="src"><a id="v:cloneIdBndrs" class="def">cloneIdBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="UniqSupply.html#t:UniqSupply" title="UniqSupply">UniqSupply</a> -&gt; [<a href="Var.html#t:Id" title="Var">Id</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Id" title="Var">Id</a>]) <a href="src/CoreSubst.html#cloneIdBndrs" class="link">Source</a> <a href="#v:cloneIdBndrs" class="selflink">#</a></p><div class="doc"><p>Applies <code><a href="CoreSubst.html#v:cloneIdBndr" title="CoreSubst">cloneIdBndr</a></code> to a number of <code><a href="Var.html#t:Id" title="Var">Id</a></code>s, accumulating a final
 substitution from left to right</p></div></div><div class="top"><p class="src"><a id="v:cloneRecIdBndrs" class="def">cloneRecIdBndrs</a> :: <a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a> -&gt; <a href="UniqSupply.html#t:UniqSupply" title="UniqSupply">UniqSupply</a> -&gt; [<a href="Var.html#t:Id" title="Var">Id</a>] -&gt; (<a href="CoreSubst.html#t:Subst" title="CoreSubst">Subst</a>, [<a href="Var.html#t:Id" title="Var">Id</a>]) <a href="src/CoreSubst.html#cloneRecIdBndrs" class="link">Source</a> <a href="#v:cloneRecIdBndrs" class="selflink">#</a></p><div class="doc"><p>Clone a mutually recursive group of <code><a href="Var.html#t:Id" title="Var">Id</a></code>s</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>