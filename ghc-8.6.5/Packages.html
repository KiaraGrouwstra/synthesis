<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Packages</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Packages.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.6.5: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Packages</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Reading the package config, and processing cmdline args</a></li><li><a href="#g:2">Querying the package config</a></li><li><a href="#g:3">Inspecting the set of packages in scope</a></li><li><a href="#g:4">Utils</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Package manipulation</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short">module <a href="PackageConfig.html">PackageConfig</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PackageState">PackageState</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PackageConfigMap">PackageConfigMap</a></li><li class="src short"><a href="#v:emptyPackageState">emptyPackageState</a> :: <a href="Packages.html#t:PackageState" title="Packages">PackageState</a></li><li class="src short"><a href="#v:initPackages">initPackages</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a>, [PreloadUnitId])</li><li class="src short"><a href="#v:readPackageConfigs">readPackageConfigs</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [(<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>, [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>])]</li><li class="src short"><a href="#v:getPackageConfRefs">getPackageConfRefs</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="DynFlags.html#t:PkgConfRef" title="DynFlags">PkgConfRef</a>]</li><li class="src short"><a href="#v:resolvePackageConfig">resolvePackageConfig</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="DynFlags.html#t:PkgConfRef" title="DynFlags">PkgConfRef</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>)</li><li class="src short"><a href="#v:readPackageConfig">readPackageConfig</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>, [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>])</li><li class="src short"><a href="#v:listPackageConfigMap">listPackageConfigMap</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>]</li><li class="src short"><a href="#v:lookupPackage">lookupPackage</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></li><li class="src short"><a href="#v:lookupPackage-39-">lookupPackage'</a> :: <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Packages.html#t:PackageConfigMap" title="Packages">PackageConfigMap</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></li><li class="src short"><a href="#v:lookupInstalledPackage">lookupInstalledPackage</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></li><li class="src short"><a href="#v:lookupPackageName">lookupPackageName</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="PackageConfig.html#t:PackageName" title="PackageConfig">PackageName</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Module.html#t:ComponentId" title="Module">ComponentId</a></li><li class="src short"><a href="#v:improveUnitId">improveUnitId</a> :: <a href="Packages.html#t:PackageConfigMap" title="Packages">PackageConfigMap</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a></li><li class="src short"><a href="#v:searchPackageId">searchPackageId</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="PackageConfig.html#t:SourcePackageId" title="PackageConfig">SourcePackageId</a> -&gt; [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>]</li><li class="src short"><a href="#v:getPackageDetails">getPackageDetails</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></li><li class="src short"><a href="#v:getInstalledPackageDetails">getInstalledPackageDetails</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a> -&gt; <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></li><li class="src short"><a href="#v:componentIdString">componentIdString</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:ComponentId" title="Module">ComponentId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:displayInstalledUnitId">displayInstalledUnitId</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:listVisibleModuleNames">listVisibleModuleNames</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [<a href="Module.html#t:ModuleName" title="Module">ModuleName</a>]</li><li class="src short"><a href="#v:lookupModuleInAllPackages">lookupModuleInAllPackages</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> -&gt; [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>)]</li><li class="src short"><a href="#v:lookupModuleWithSuggestions">lookupModuleWithSuggestions</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="FastString.html#t:FastString" title="FastString">FastString</a> -&gt; <a href="Packages.html#t:LookupResult" title="Packages">LookupResult</a></li><li class="src short"><a href="#v:lookupPluginModuleWithSuggestions">lookupPluginModuleWithSuggestions</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="FastString.html#t:FastString" title="FastString">FastString</a> -&gt; <a href="Packages.html#t:LookupResult" title="Packages">LookupResult</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupResult">LookupResult</a><ul class="subs"><li>= <a href="#v:LookupFound">LookupFound</a> <a href="Module.html#t:Module" title="Module">Module</a> <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></li><li>| <a href="#v:LookupMultiple">LookupMultiple</a> [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>)]</li><li>| <a href="#v:LookupHidden">LookupHidden</a> [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>)] [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>)]</li><li>| <a href="#v:LookupUnusable">LookupUnusable</a> [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>)]</li><li>| <a href="#v:LookupNotFound">LookupNotFound</a> [<a href="Packages.html#t:ModuleSuggestion" title="Packages">ModuleSuggestion</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ModuleSuggestion">ModuleSuggestion</a><ul class="subs"><li>= <a href="#v:SuggestVisible">SuggestVisible</a> <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> <a href="Module.html#t:Module" title="Module">Module</a> <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a></li><li>| <a href="#v:SuggestHidden">SuggestHidden</a> <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> <a href="Module.html#t:Module" title="Module">Module</a> <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ModuleOrigin">ModuleOrigin</a><ul class="subs"><li>= <a href="#v:ModHidden">ModHidden</a></li><li>| <a href="#v:ModUnusable">ModUnusable</a> <a href="Packages.html#t:UnusablePackageReason" title="Packages">UnusablePackageReason</a></li><li>| <a href="#v:ModOrigin">ModOrigin</a> { <ul class="subs"><li><a href="#v:fromOrigPackage">fromOrigPackage</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li><a href="#v:fromExposedReexport">fromExposedReexport</a> :: [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>]</li><li><a href="#v:fromHiddenReexport">fromHiddenReexport</a> :: [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>]</li><li><a href="#v:fromPackageFlag">fromPackageFlag</a> :: <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul> }</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:UnusablePackageReason">UnusablePackageReason</a><ul class="subs"><li>= <a href="#v:IgnoredWithFlag">IgnoredWithFlag</a></li><li>| <a href="#v:BrokenDependencies">BrokenDependencies</a> [<a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a>]</li><li>| <a href="#v:CyclicDependencies">CyclicDependencies</a> [<a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a>]</li><li>| <a href="#v:IgnoredDependencies">IgnoredDependencies</a> [<a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a>]</li><li>| <a href="#v:ShadowedDependencies">ShadowedDependencies</a> [<a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a>]</li></ul></li><li class="src short"><a href="#v:pprReason">pprReason</a> :: <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> -&gt; <a href="Packages.html#t:UnusablePackageReason" title="Packages">UnusablePackageReason</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></li><li class="src short"><a href="#v:getPackageIncludePath">getPackageIncludePath</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</li><li class="src short"><a href="#v:getPackageLibraryPath">getPackageLibraryPath</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</li><li class="src short"><a href="#v:getPackageLinkOpts">getPackageLinkOpts</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ([<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>], [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>], [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>])</li><li class="src short"><a href="#v:getPackageExtraCcOpts">getPackageExtraCcOpts</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</li><li class="src short"><a href="#v:getPackageFrameworkPath">getPackageFrameworkPath</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</li><li class="src short"><a href="#v:getPackageFrameworks">getPackageFrameworks</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</li><li class="src short"><a href="#v:getPackageConfigMap">getPackageConfigMap</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Packages.html#t:PackageConfigMap" title="Packages">PackageConfigMap</a></li><li class="src short"><a href="#v:getPreloadPackagesAnd">getPreloadPackagesAnd</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>]</li><li class="src short"><a href="#v:collectArchives">collectArchives</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>]</li><li class="src short"><a href="#v:collectIncludeDirs">collectIncludeDirs</a> :: [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] -&gt; [<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>]</li><li class="src short"><a href="#v:collectLibraryPaths">collectLibraryPaths</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] -&gt; [<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>]</li><li class="src short"><a href="#v:collectLinkOpts">collectLinkOpts</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] -&gt; ([<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>], [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>], [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>])</li><li class="src short"><a href="#v:packageHsLibs">packageHsLibs</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> -&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</li><li class="src short"><a href="#v:getLibs">getLibs</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [(<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>)]</li><li class="src short"><a href="#v:unwireUnitId">unwireUnitId</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a></li><li class="src short"><a href="#v:pprFlag">pprFlag</a> :: <a href="DynFlags.html#t:PackageFlag" title="DynFlags">PackageFlag</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></li><li class="src short"><a href="#v:pprPackages">pprPackages</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></li><li class="src short"><a href="#v:pprPackagesSimple">pprPackagesSimple</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></li><li class="src short"><a href="#v:pprModuleMap">pprModuleMap</a> :: ModuleToPkgConfAll -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></li><li class="src short"><a href="#v:isIndefinite">isIndefinite</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isDllName">isDllName</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:Module" title="Module">Module</a> -&gt; <a href="Name.html#t:Name" title="Name">Name</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="PackageConfig.html">PackageConfig</a></p></div><a href="#g:1" id="g:1"><h1>Reading the package config, and processing cmdline args</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PackageState" class="def">PackageState</a> <a href="src/Packages.html#PackageState" class="link">Source</a> <a href="#t:PackageState" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PackageConfigMap" class="def">PackageConfigMap</a> <a href="src/Packages.html#PackageConfigMap" class="link">Source</a> <a href="#t:PackageConfigMap" class="selflink">#</a></p><div class="doc"><p><code><a href="UniqFM.html#t:UniqFM" title="UniqFM">UniqFM</a></code> map from <code><a href="Module.html#t:UnitId" title="Module">UnitId</a></code> to <code><a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></code>, plus
 the transitive closure of preload packages.</p></div></div><div class="top"><p class="src"><a id="v:emptyPackageState" class="def">emptyPackageState</a> :: <a href="Packages.html#t:PackageState" title="Packages">PackageState</a> <a href="src/Packages.html#emptyPackageState" class="link">Source</a> <a href="#v:emptyPackageState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:initPackages" class="def">initPackages</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a>, [PreloadUnitId]) <a href="src/Packages.html#initPackages" class="link">Source</a> <a href="#v:initPackages" class="selflink">#</a></p><div class="doc"><p>Call this after <code><a href="DynFlags.html#v:parseDynFlags" title="DynFlags">parseDynFlags</a></code>.  It reads the package
 database files, and sets up various internal tables of package
 information, according to the package-related flags on the
 command-line (<code>-package</code>, <code>-hide-package</code> etc.)</p><p>Returns a list of packages to link in if we're doing dynamic linking.
 This list contains the packages that the user explicitly mentioned with
 <code>-package</code> flags.</p><p><code><a href="Packages.html#v:initPackages" title="Packages">initPackages</a></code> can be called again subsequently after updating the
 <code><a href="DynFlags.html#v:packageFlags" title="DynFlags">packageFlags</a></code> field of the <code><a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a></code>, and it will update the
 <code><a href="DynFlags.html#v:pkgState" title="DynFlags">pkgState</a></code> in <code><a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a></code> and return a list of packages to
 link in.</p></div></div><div class="top"><p class="src"><a id="v:readPackageConfigs" class="def">readPackageConfigs</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [(<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>, [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>])] <a href="src/Packages.html#readPackageConfigs" class="link">Source</a> <a href="#v:readPackageConfigs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getPackageConfRefs" class="def">getPackageConfRefs</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="DynFlags.html#t:PkgConfRef" title="DynFlags">PkgConfRef</a>] <a href="src/Packages.html#getPackageConfRefs" class="link">Source</a> <a href="#v:getPackageConfRefs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:resolvePackageConfig" class="def">resolvePackageConfig</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="DynFlags.html#t:PkgConfRef" title="DynFlags">PkgConfRef</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>) <a href="src/Packages.html#resolvePackageConfig" class="link">Source</a> <a href="#v:resolvePackageConfig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readPackageConfig" class="def">readPackageConfig</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>, [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>]) <a href="src/Packages.html#readPackageConfig" class="link">Source</a> <a href="#v:readPackageConfig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:listPackageConfigMap" class="def">listPackageConfigMap</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] <a href="src/Packages.html#listPackageConfigMap" class="link">Source</a> <a href="#v:listPackageConfigMap" class="selflink">#</a></p><div class="doc"><p>Get a list of entries from the package database.  NB: be careful with
 this function, although all packages in this map are &quot;visible&quot;, this
 does not imply that the exposed-modules of the package are available
 (they may have been thinned or renamed).</p></div></div><a href="#g:2" id="g:2"><h1>Querying the package config</h1></a><div class="top"><p class="src"><a id="v:lookupPackage" class="def">lookupPackage</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> <a href="src/Packages.html#lookupPackage" class="link">Source</a> <a href="#v:lookupPackage" class="selflink">#</a></p><div class="doc"><p>Find the package we know about with the given unit id, if any</p></div></div><div class="top"><p class="src"><a id="v:lookupPackage-39-" class="def">lookupPackage'</a> :: <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Packages.html#t:PackageConfigMap" title="Packages">PackageConfigMap</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> <a href="src/Packages.html#lookupPackage%27" class="link">Source</a> <a href="#v:lookupPackage-39-" class="selflink">#</a></p><div class="doc"><p>A more specialized interface, which takes a boolean specifying
 whether or not to look for on-the-fly renamed interfaces, and
 just a <code><a href="Packages.html#t:PackageConfigMap" title="Packages">PackageConfigMap</a></code> rather than a <code><a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a></code> (so it can
 be used while we're initializing <code><a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a></code></p></div></div><div class="top"><p class="src"><a id="v:lookupInstalledPackage" class="def">lookupInstalledPackage</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> <a href="src/Packages.html#lookupInstalledPackage" class="link">Source</a> <a href="#v:lookupInstalledPackage" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupPackageName" class="def">lookupPackageName</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="PackageConfig.html#t:PackageName" title="PackageConfig">PackageName</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Module.html#t:ComponentId" title="Module">ComponentId</a> <a href="src/Packages.html#lookupPackageName" class="link">Source</a> <a href="#v:lookupPackageName" class="selflink">#</a></p><div class="doc"><p>Find the package we know about with the given package name (e.g. <code>foo</code>), if any
 (NB: there might be a locally defined unit name which overrides this)</p></div></div><div class="top"><p class="src"><a id="v:improveUnitId" class="def">improveUnitId</a> :: <a href="Packages.html#t:PackageConfigMap" title="Packages">PackageConfigMap</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> <a href="src/Packages.html#improveUnitId" class="link">Source</a> <a href="#v:improveUnitId" class="selflink">#</a></p><div class="doc"><p>Given a fully instantiated <code><a href="Module.html#t:UnitId" title="Module">UnitId</a></code>, improve it into a
 <code><a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a></code> if we can find it in the package database.</p></div></div><div class="top"><p class="src"><a id="v:searchPackageId" class="def">searchPackageId</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="PackageConfig.html#t:SourcePackageId" title="PackageConfig">SourcePackageId</a> -&gt; [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] <a href="src/Packages.html#searchPackageId" class="link">Source</a> <a href="#v:searchPackageId" class="selflink">#</a></p><div class="doc"><p>Search for packages with a given package ID (e.g. &quot;foo-0.1&quot;)</p></div></div><div class="top"><p class="src"><a id="v:getPackageDetails" class="def">getPackageDetails</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> <a href="src/Packages.html#getPackageDetails" class="link">Source</a> <a href="#v:getPackageDetails" class="selflink">#</a></p><div class="doc"><p>Looks up the package with the given id in the package state, panicing if it is
 not found</p></div></div><div class="top"><p class="src"><a id="v:getInstalledPackageDetails" class="def">getInstalledPackageDetails</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a> -&gt; <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> <a href="src/Packages.html#getInstalledPackageDetails" class="link">Source</a> <a href="#v:getInstalledPackageDetails" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:componentIdString" class="def">componentIdString</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:ComponentId" title="Module">ComponentId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Packages.html#componentIdString" class="link">Source</a> <a href="#v:componentIdString" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:displayInstalledUnitId" class="def">displayInstalledUnitId</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Packages.html#displayInstalledUnitId" class="link">Source</a> <a href="#v:displayInstalledUnitId" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:listVisibleModuleNames" class="def">listVisibleModuleNames</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [<a href="Module.html#t:ModuleName" title="Module">ModuleName</a>] <a href="src/Packages.html#listVisibleModuleNames" class="link">Source</a> <a href="#v:listVisibleModuleNames" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupModuleInAllPackages" class="def">lookupModuleInAllPackages</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> -&gt; [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>)] <a href="src/Packages.html#lookupModuleInAllPackages" class="link">Source</a> <a href="#v:lookupModuleInAllPackages" class="selflink">#</a></p><div class="doc"><p>Takes a <code><a href="Module.html#t:ModuleName" title="Module">ModuleName</a></code>, and if the module is in any package returns
 list of modules which take that name.</p></div></div><div class="top"><p class="src"><a id="v:lookupModuleWithSuggestions" class="def">lookupModuleWithSuggestions</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="FastString.html#t:FastString" title="FastString">FastString</a> -&gt; <a href="Packages.html#t:LookupResult" title="Packages">LookupResult</a> <a href="src/Packages.html#lookupModuleWithSuggestions" class="link">Source</a> <a href="#v:lookupModuleWithSuggestions" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupPluginModuleWithSuggestions" class="def">lookupPluginModuleWithSuggestions</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="FastString.html#t:FastString" title="FastString">FastString</a> -&gt; <a href="Packages.html#t:LookupResult" title="Packages">LookupResult</a> <a href="src/Packages.html#lookupPluginModuleWithSuggestions" class="link">Source</a> <a href="#v:lookupPluginModuleWithSuggestions" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LookupResult" class="def">LookupResult</a> <a href="src/Packages.html#LookupResult" class="link">Source</a> <a href="#t:LookupResult" class="selflink">#</a></p><div class="doc"><p>The result of performing a lookup</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LookupFound" class="def">LookupFound</a> <a href="Module.html#t:Module" title="Module">Module</a> <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></td><td class="doc"><p>Found the module uniquely, nothing else to do</p></td></tr><tr><td class="src"><a id="v:LookupMultiple" class="def">LookupMultiple</a> [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>)]</td><td class="doc"><p>Multiple modules with the same name in scope</p></td></tr><tr><td class="src"><a id="v:LookupHidden" class="def">LookupHidden</a> [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>)] [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>)]</td><td class="doc"><p>No modules found, but there were some hidden ones with
 an exact name match.  First is due to package hidden, second
 is due to module being hidden</p></td></tr><tr><td class="src"><a id="v:LookupUnusable" class="def">LookupUnusable</a> [(<a href="Module.html#t:Module" title="Module">Module</a>, <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>)]</td><td class="doc"><p>No modules found, but there were some unusable ones with
 an exact name match</p></td></tr><tr><td class="src"><a id="v:LookupNotFound" class="def">LookupNotFound</a> [<a href="Packages.html#t:ModuleSuggestion" title="Packages">ModuleSuggestion</a>]</td><td class="doc"><p>Nothing found, here are some suggested different names</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ModuleSuggestion" class="def">ModuleSuggestion</a> <a href="src/Packages.html#ModuleSuggestion" class="link">Source</a> <a href="#t:ModuleSuggestion" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SuggestVisible" class="def">SuggestVisible</a> <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> <a href="Module.html#t:Module" title="Module">Module</a> <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SuggestHidden" class="def">SuggestHidden</a> <a href="Module.html#t:ModuleName" title="Module">ModuleName</a> <a href="Module.html#t:Module" title="Module">Module</a> <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ModuleOrigin" class="def">ModuleOrigin</a> <a href="src/Packages.html#ModuleOrigin" class="link">Source</a> <a href="#t:ModuleOrigin" class="selflink">#</a></p><div class="doc"><p>Package state is all stored in <code><a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a></code>, including the details of
 all packages, which packages are exposed, and which modules they
 provide.</p><p>The package state is computed by <code><a href="Packages.html#v:initPackages" title="Packages">initPackages</a></code>, and kept in DynFlags.
 It is influenced by various package flags:</p><ul><li><code>-package <a href="pkg">pkg</a></code> and <code>-package-id <a href="pkg">pkg</a></code> cause <code><a href="pkg">pkg</a></code> to become exposed.
     If <code>-hide-all-packages</code> was not specified, these commands also cause
      all other packages with the same name to become hidden.</li><li><code>-hide-package <a href="pkg">pkg</a></code> causes <code><a href="pkg">pkg</a></code> to become hidden.</li><li>(there are a few more flags, check below for their semantics)</li></ul><p>The package state has the following properties.</p><ul><li>Let <code>exposedPackages</code> be the set of packages thus exposed.
     Let <code>depExposedPackages</code> be the transitive closure from <code>exposedPackages</code> of
     their dependencies.</li><li>When searching for a module from a preload import declaration,
     only the exposed modules in <code>exposedPackages</code> are valid.</li><li>When searching for a module from an implicit import, all modules
     from <code>depExposedPackages</code> are valid.</li><li>When linking in a compilation manager mode, we link in packages the
     program depends on (the compiler knows this list by the
     time it gets to the link step).  Also, we link in all packages
     which were mentioned with preload <code>-package</code> flags on the command-line,
     or are a transitive dependency of same, or are &quot;base&quot;/&quot;rts&quot;.
     The reason for this is that we might need packages which don't
     contain any Haskell modules, and therefore won't be discovered
     by the normal mechanism of dependency tracking.</li></ul><p>Given a module name, there may be multiple ways it came into scope,
 possibly simultaneously.  This data type tracks all the possible ways
 it could have come into scope.  Warning: don't use the record functions,
 they're partial!</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ModHidden" class="def">ModHidden</a></td><td class="doc"><p>Module is hidden, and thus never will be available for import.
 (But maybe the user didn't realize), so we'll still keep track
 of these modules.)</p></td></tr><tr><td class="src"><a id="v:ModUnusable" class="def">ModUnusable</a> <a href="Packages.html#t:UnusablePackageReason" title="Packages">UnusablePackageReason</a></td><td class="doc"><p>Module is unavailable because the package is unusable.</p></td></tr><tr><td class="src"><a id="v:ModOrigin" class="def">ModOrigin</a></td><td class="doc"><p>Module is public, and could have come from some places.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:fromOrigPackage" class="def">fromOrigPackage</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc"><p><code>Just False</code> means that this module is in
 someone's <code>exported-modules</code> list, but that package is hidden;
 <code>Just True</code> means that it is available; <code>Nothing</code> means neither
 applies.</p></div></li><li><dfn class="src"><a id="v:fromExposedReexport" class="def">fromExposedReexport</a> :: [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>]</dfn><div class="doc"><p>Is the module available from a reexport of an exposed package?
 There could be multiple.</p></div></li><li><dfn class="src"><a id="v:fromHiddenReexport" class="def">fromHiddenReexport</a> :: [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>]</dfn><div class="doc"><p>Is the module available from a reexport of a hidden package?</p></div></li><li><dfn class="src"><a id="v:fromPackageFlag" class="def">fromPackageFlag</a> :: <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc"><p>Did the module export come from a package flag? (ToDo: track
 more information.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:ModuleOrigin" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ModuleOrigin:Semigroup:1"></span> <a href="../base-4.12.0.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a></span> <a href="#t:ModuleOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ModuleOrigin:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Packages.html">Packages</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> <a href="../base-4.12.0.0/src/GHC-Base.html#%3C%3E" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> <a href="../base-4.12.0.0/src/GHC-Base.html#sconcat" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> <a href="../base-4.12.0.0/src/GHC-Base.html#stimes" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ModuleOrigin:Monoid:2"></span> <a href="../base-4.12.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a></span> <a href="#t:ModuleOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ModuleOrigin:Monoid:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Packages.html">Packages</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> <a href="../base-4.12.0.0/src/GHC-Base.html#mempty" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> <a href="../base-4.12.0.0/src/GHC-Base.html#mappend" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a>] -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> <a href="../base-4.12.0.0/src/GHC-Base.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ModuleOrigin:Outputable:3"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a></span> <a href="#t:ModuleOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ModuleOrigin:Outputable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Packages.html">Packages</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Packages.html#t:ModuleOrigin" title="Packages">ModuleOrigin</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UnusablePackageReason" class="def">UnusablePackageReason</a> <a href="src/Packages.html#UnusablePackageReason" class="link">Source</a> <a href="#t:UnusablePackageReason" class="selflink">#</a></p><div class="doc"><p>The reason why a package is unusable.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IgnoredWithFlag" class="def">IgnoredWithFlag</a></td><td class="doc"><p>We ignored it explicitly using <code>-ignore-package</code>.</p></td></tr><tr><td class="src"><a id="v:BrokenDependencies" class="def">BrokenDependencies</a> [<a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a>]</td><td class="doc"><p>This package transitively depends on a package that was never present
 in any of the provided databases.</p></td></tr><tr><td class="src"><a id="v:CyclicDependencies" class="def">CyclicDependencies</a> [<a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a>]</td><td class="doc"><p>This package transitively depends on a package involved in a cycle.
 Note that the list of <code><a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a></code> reports the direct dependencies
 of this package that (transitively) depended on the cycle, and not
 the actual cycle itself (which we report separately at high verbosity.)</p></td></tr><tr><td class="src"><a id="v:IgnoredDependencies" class="def">IgnoredDependencies</a> [<a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a>]</td><td class="doc"><p>This package transitively depends on a package which was ignored.</p></td></tr><tr><td class="src"><a id="v:ShadowedDependencies" class="def">ShadowedDependencies</a> [<a href="Module.html#t:InstalledUnitId" title="Module">InstalledUnitId</a>]</td><td class="doc"><p>This package transitively depends on a package which was
 shadowed by an ABI-incompatible package.</p></td></tr></table></div><div class="subs instances"><details id="i:UnusablePackageReason" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UnusablePackageReason:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="Packages.html#t:UnusablePackageReason" title="Packages">UnusablePackageReason</a></span> <a href="#t:UnusablePackageReason" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UnusablePackageReason:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Packages.html">Packages</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Packages.html#t:UnusablePackageReason" title="Packages">UnusablePackageReason</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Packages.html#t:UnusablePackageReason" title="Packages">UnusablePackageReason</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:pprReason" class="def">pprReason</a> :: <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> -&gt; <a href="Packages.html#t:UnusablePackageReason" title="Packages">UnusablePackageReason</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Packages.html#pprReason" class="link">Source</a> <a href="#v:pprReason" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Inspecting the set of packages in scope</h1></a><div class="top"><p class="src"><a id="v:getPackageIncludePath" class="def">getPackageIncludePath</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] <a href="src/Packages.html#getPackageIncludePath" class="link">Source</a> <a href="#v:getPackageIncludePath" class="selflink">#</a></p><div class="doc"><p>Find all the include directories in these and the preload packages</p></div></div><div class="top"><p class="src"><a id="v:getPackageLibraryPath" class="def">getPackageLibraryPath</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] <a href="src/Packages.html#getPackageLibraryPath" class="link">Source</a> <a href="#v:getPackageLibraryPath" class="selflink">#</a></p><div class="doc"><p>Find all the library paths in these and the preload packages</p></div></div><div class="top"><p class="src"><a id="v:getPackageLinkOpts" class="def">getPackageLinkOpts</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ([<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>], [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>], [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]) <a href="src/Packages.html#getPackageLinkOpts" class="link">Source</a> <a href="#v:getPackageLinkOpts" class="selflink">#</a></p><div class="doc"><p>Find all the link options in these and the preload packages,
 returning (package hs lib options, extra library options, other flags)</p></div></div><div class="top"><p class="src"><a id="v:getPackageExtraCcOpts" class="def">getPackageExtraCcOpts</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] <a href="src/Packages.html#getPackageExtraCcOpts" class="link">Source</a> <a href="#v:getPackageExtraCcOpts" class="selflink">#</a></p><div class="doc"><p>Find all the C-compiler options in these and the preload packages</p></div></div><div class="top"><p class="src"><a id="v:getPackageFrameworkPath" class="def">getPackageFrameworkPath</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] <a href="src/Packages.html#getPackageFrameworkPath" class="link">Source</a> <a href="#v:getPackageFrameworkPath" class="selflink">#</a></p><div class="doc"><p>Find all the package framework paths in these and the preload packages</p></div></div><div class="top"><p class="src"><a id="v:getPackageFrameworks" class="def">getPackageFrameworks</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] <a href="src/Packages.html#getPackageFrameworks" class="link">Source</a> <a href="#v:getPackageFrameworks" class="selflink">#</a></p><div class="doc"><p>Find all the package frameworks in these and the preload packages</p></div></div><div class="top"><p class="src"><a id="v:getPackageConfigMap" class="def">getPackageConfigMap</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Packages.html#t:PackageConfigMap" title="Packages">PackageConfigMap</a> <a href="src/Packages.html#getPackageConfigMap" class="link">Source</a> <a href="#v:getPackageConfigMap" class="selflink">#</a></p><div class="doc"><p>Retrieve the <code><a href="Packages.html#t:PackageConfigMap" title="Packages">PackageConfigMap</a></code> from <code><a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a></code>; used
 in the <code>hs-boot</code> loop-breaker.</p></div></div><div class="top"><p class="src"><a id="v:getPreloadPackagesAnd" class="def">getPreloadPackagesAnd</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] <a href="src/Packages.html#getPreloadPackagesAnd" class="link">Source</a> <a href="#v:getPreloadPackagesAnd" class="selflink">#</a></p><div class="doc"><p>Find all the <code><a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></code> in both the preload packages from <code><a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a></code> and corresponding to the list of
 <code><a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a></code>s</p></div></div><div class="top"><p class="src"><a id="v:collectArchives" class="def">collectArchives</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>] <a href="src/Packages.html#collectArchives" class="link">Source</a> <a href="#v:collectArchives" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:collectIncludeDirs" class="def">collectIncludeDirs</a> :: [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] -&gt; [<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>] <a href="src/Packages.html#collectIncludeDirs" class="link">Source</a> <a href="#v:collectIncludeDirs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:collectLibraryPaths" class="def">collectLibraryPaths</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] -&gt; [<a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>] <a href="src/Packages.html#collectLibraryPaths" class="link">Source</a> <a href="#v:collectLibraryPaths" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:collectLinkOpts" class="def">collectLinkOpts</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [<a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a>] -&gt; ([<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>], [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>], [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]) <a href="src/Packages.html#collectLinkOpts" class="link">Source</a> <a href="#v:collectLinkOpts" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:packageHsLibs" class="def">packageHsLibs</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="PackageConfig.html#t:PackageConfig" title="PackageConfig">PackageConfig</a> -&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] <a href="src/Packages.html#packageHsLibs" class="link">Source</a> <a href="#v:packageHsLibs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getLibs" class="def">getLibs</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; [PreloadUnitId] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [(<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>)] <a href="src/Packages.html#getLibs" class="link">Source</a> <a href="#v:getLibs" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h1>Utils</h1></a><div class="top"><p class="src"><a id="v:unwireUnitId" class="def">unwireUnitId</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> -&gt; <a href="Module.html#t:UnitId" title="Module">UnitId</a> <a href="src/Packages.html#unwireUnitId" class="link">Source</a> <a href="#v:unwireUnitId" class="selflink">#</a></p><div class="doc"><p>Given a wired-in <code><a href="Module.html#t:UnitId" title="Module">UnitId</a></code>, &quot;unwire&quot; it into the <code><a href="Module.html#t:UnitId" title="Module">UnitId</a></code>
 that it was recorded as in the package database.</p></div></div><div class="top"><p class="src"><a id="v:pprFlag" class="def">pprFlag</a> :: <a href="DynFlags.html#t:PackageFlag" title="DynFlags">PackageFlag</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Packages.html#pprFlag" class="link">Source</a> <a href="#v:pprFlag" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pprPackages" class="def">pprPackages</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Packages.html#pprPackages" class="link">Source</a> <a href="#v:pprPackages" class="selflink">#</a></p><div class="doc"><p>Show (very verbose) package info</p></div></div><div class="top"><p class="src"><a id="v:pprPackagesSimple" class="def">pprPackagesSimple</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Packages.html#pprPackagesSimple" class="link">Source</a> <a href="#v:pprPackagesSimple" class="selflink">#</a></p><div class="doc"><p>Show simplified package info.</p><p>The idea is to only print package id, and any information that might
 be different from the package databases (exposure, trust)</p></div></div><div class="top"><p class="src"><a id="v:pprModuleMap" class="def">pprModuleMap</a> :: ModuleToPkgConfAll -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Packages.html#pprModuleMap" class="link">Source</a> <a href="#v:pprModuleMap" class="selflink">#</a></p><div class="doc"><p>Show the mapping of modules to where they come from.</p></div></div><div class="top"><p class="src"><a id="v:isIndefinite" class="def">isIndefinite</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Packages.html#isIndefinite" class="link">Source</a> <a href="#v:isIndefinite" class="selflink">#</a></p><div class="doc"><p>A little utility to tell if the <code><a href="DynFlags.html#v:thisPackage" title="DynFlags">thisPackage</a></code> is indefinite
 (if it is not, we should never use on-the-fly renaming.)</p></div></div><div class="top"><p class="src"><a id="v:isDllName" class="def">isDllName</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="Module.html#t:Module" title="Module">Module</a> -&gt; <a href="Name.html#t:Name" title="Name">Name</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Packages.html#isDllName" class="link">Source</a> <a href="#v:isDllName" class="selflink">#</a></p><div class="doc"><p>Will the <code><a href="Name.html#t:Name" title="Name">Name</a></code> come from a dynamically linked library?</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>