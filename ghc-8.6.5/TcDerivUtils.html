<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>TcDerivUtils</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/TcDerivUtils.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.6.5: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">TcDerivUtils</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:DerivM">DerivM</a> = <a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a> <a href="TcDerivUtils.html#t:DerivEnv" title="TcDerivUtils">DerivEnv</a> <a href="TcRnTypes.html#t:TcRn" title="TcRnTypes">TcRn</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivEnv">DerivEnv</a> = <a href="#v:DerivEnv">DerivEnv</a> {<ul class="subs"><li><a href="#v:denv_overlap_mode">denv_overlap_mode</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="BasicTypes.html#t:OverlapMode" title="BasicTypes">OverlapMode</a></li><li><a href="#v:denv_tvs">denv_tvs</a> :: [<a href="Var.html#t:TyVar" title="Var">TyVar</a>]</li><li><a href="#v:denv_cls">denv_cls</a> :: <a href="Class.html#t:Class" title="Class">Class</a></li><li><a href="#v:denv_cls_tys">denv_cls_tys</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</li><li><a href="#v:denv_tc">denv_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:denv_tc_args">denv_tc_args</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</li><li><a href="#v:denv_rep_tc">denv_rep_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:denv_rep_tc_args">denv_rep_tc_args</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</li><li><a href="#v:denv_ctxt">denv_ctxt</a> :: <a href="TcDerivUtils.html#t:DerivContext" title="TcDerivUtils">DerivContext</a></li><li><a href="#v:denv_strat">denv_strat</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="HsDecls.html#t:DerivStrategy" title="HsDecls">DerivStrategy</a> <a href="HsExtension.html#t:GhcTc" title="HsExtension">GhcTc</a>)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivSpec">DerivSpec</a> theta = <a href="#v:DS">DS</a> {<ul class="subs"><li><a href="#v:ds_loc">ds_loc</a> :: <a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a></li><li><a href="#v:ds_name">ds_name</a> :: <a href="Name.html#t:Name" title="Name">Name</a></li><li><a href="#v:ds_tvs">ds_tvs</a> :: [<a href="Var.html#t:TyVar" title="Var">TyVar</a>]</li><li><a href="#v:ds_theta">ds_theta</a> :: theta</li><li><a href="#v:ds_cls">ds_cls</a> :: <a href="Class.html#t:Class" title="Class">Class</a></li><li><a href="#v:ds_tys">ds_tys</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</li><li><a href="#v:ds_tc">ds_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></li><li><a href="#v:ds_overlap">ds_overlap</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="BasicTypes.html#t:OverlapMode" title="BasicTypes">OverlapMode</a></li><li><a href="#v:ds_standalone_wildcard">ds_standalone_wildcard</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a></li><li><a href="#v:ds_mechanism">ds_mechanism</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a></li></ul>}</li><li class="src short"><a href="#v:pprDerivSpec">pprDerivSpec</a> :: <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> theta =&gt; <a href="TcDerivUtils.html#t:DerivSpec" title="TcDerivUtils">DerivSpec</a> theta -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivSpecMechanism">DerivSpecMechanism</a><ul class="subs"><li>= <a href="#v:DerivSpecStock">DerivSpecStock</a> (<a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type" title="Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> (<a href="HsBinds.html#t:LHsBinds" title="HsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs" title="HsExtension">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff" title="TcGenDeriv">BagDerivStuff</a>, [<a href="Name.html#t:Name" title="Name">Name</a>]))</li><li>| <a href="#v:DerivSpecNewtype">DerivSpecNewtype</a> <a href="Type.html#t:Type" title="Type">Type</a></li><li>| <a href="#v:DerivSpecAnyClass">DerivSpecAnyClass</a></li><li>| <a href="#v:DerivSpecVia">DerivSpecVia</a> <a href="Type.html#t:Type" title="Type">Type</a></li></ul></li><li class="src short"><a href="#v:derivSpecMechanismToStrategy">derivSpecMechanismToStrategy</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="HsDecls.html#t:DerivStrategy" title="HsDecls">DerivStrategy</a> <a href="HsExtension.html#t:GhcTc" title="HsExtension">GhcTc</a></li><li class="src short"><a href="#v:isDerivSpecStock">isDerivSpecStock</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isDerivSpecNewtype">isDerivSpecNewtype</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isDerivSpecAnyClass">isDerivSpecAnyClass</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isDerivSpecVia">isDerivSpecVia</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivContext">DerivContext</a><ul class="subs"><li>= <a href="#v:InferContext">InferContext</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a>)</li><li>| <a href="#v:SupplyContext">SupplyContext</a> <a href="Type.html#t:ThetaType" title="Type">ThetaType</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:OriginativeDerivStatus">OriginativeDerivStatus</a><ul class="subs"><li>= <a href="#v:CanDeriveStock">CanDeriveStock</a> (<a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type" title="Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> (<a href="HsBinds.html#t:LHsBinds" title="HsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs" title="HsExtension">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff" title="TcGenDeriv">BagDerivStuff</a>, [<a href="Name.html#t:Name" title="Name">Name</a>]))</li><li>| <a href="#v:StockClassError">StockClassError</a> <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></li><li>| <a href="#v:CanDeriveAnyClass">CanDeriveAnyClass</a></li><li>| <a href="#v:NonDerivableClass">NonDerivableClass</a> <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></li></ul></li><li class="src short"><a href="#v:isStandaloneDeriv">isStandaloneDeriv</a> :: <a href="TcDerivUtils.html#t:DerivM" title="TcDerivUtils">DerivM</a> <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isStandaloneWildcardDeriv">isStandaloneWildcardDeriv</a> :: <a href="TcDerivUtils.html#t:DerivM" title="TcDerivUtils">DerivM</a> <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:mkDerivOrigin">mkDerivOrigin</a> :: <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PredOrigin">PredOrigin</a> = <a href="#v:PredOrigin">PredOrigin</a> <a href="Type.html#t:PredType" title="Type">PredType</a> <a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a> <a href="TcRnTypes.html#t:TypeOrKind" title="TcRnTypes">TypeOrKind</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ThetaOrigin">ThetaOrigin</a> = <a href="#v:ThetaOrigin">ThetaOrigin</a> {<ul class="subs"><li><a href="#v:to_anyclass_skols">to_anyclass_skols</a> :: [<a href="Var.html#t:TyVar" title="Var">TyVar</a>]</li><li><a href="#v:to_anyclass_metas">to_anyclass_metas</a> :: [<a href="Var.html#t:TyVar" title="Var">TyVar</a>]</li><li><a href="#v:to_anyclass_givens">to_anyclass_givens</a> :: <a href="Type.html#t:ThetaType" title="Type">ThetaType</a></li><li><a href="#v:to_wanted_origins">to_wanted_origins</a> :: [<a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a>]</li></ul>}</li><li class="src short"><a href="#v:mkPredOrigin">mkPredOrigin</a> :: <a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a> -&gt; <a href="TcRnTypes.html#t:TypeOrKind" title="TcRnTypes">TypeOrKind</a> -&gt; <a href="Type.html#t:PredType" title="Type">PredType</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a></li><li class="src short"><a href="#v:mkThetaOrigin">mkThetaOrigin</a> :: <a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a> -&gt; <a href="TcRnTypes.html#t:TypeOrKind" title="TcRnTypes">TypeOrKind</a> -&gt; [<a href="Var.html#t:TyVar" title="Var">TyVar</a>] -&gt; [<a href="Var.html#t:TyVar" title="Var">TyVar</a>] -&gt; <a href="Type.html#t:ThetaType" title="Type">ThetaType</a> -&gt; <a href="Type.html#t:ThetaType" title="Type">ThetaType</a> -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin" title="TcDerivUtils">ThetaOrigin</a></li><li class="src short"><a href="#v:mkThetaOriginFromPreds">mkThetaOriginFromPreds</a> :: [<a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a>] -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin" title="TcDerivUtils">ThetaOrigin</a></li><li class="src short"><a href="#v:substPredOrigin">substPredOrigin</a> :: <a href="Util.html#t:HasCallStack" title="Util">HasCallStack</a> =&gt; <a href="Type.html#t:TCvSubst" title="Type">TCvSubst</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a></li><li class="src short"><a href="#v:checkOriginativeSideConditions">checkOriginativeSideConditions</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="TcDerivUtils.html#t:DerivContext" title="TcDerivUtils">DerivContext</a> -&gt; <a href="Class.html#t:Class" title="Class">Class</a> -&gt; [<a href="TcType.html#t:TcType" title="TcType">TcType</a>] -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; <a href="TcDerivUtils.html#t:OriginativeDerivStatus" title="TcDerivUtils">OriginativeDerivStatus</a></li><li class="src short"><a href="#v:hasStockDeriving">hasStockDeriving</a> :: <a href="Class.html#t:Class" title="Class">Class</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type" title="Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> (<a href="HsBinds.html#t:LHsBinds" title="HsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs" title="HsExtension">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff" title="TcGenDeriv">BagDerivStuff</a>, [<a href="Name.html#t:Name" title="Name">Name</a>]))</li><li class="src short"><a href="#v:canDeriveAnyClass">canDeriveAnyClass</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="ErrUtils.html#t:Validity" title="ErrUtils">Validity</a></li><li class="src short"><a href="#v:std_class_via_coercible">std_class_via_coercible</a> :: <a href="Class.html#t:Class" title="Class">Class</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:non_coercible_class">non_coercible_class</a> :: <a href="Class.html#t:Class" title="Class">Class</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:newDerivClsInst">newDerivClsInst</a> :: <a href="Type.html#t:ThetaType" title="Type">ThetaType</a> -&gt; <a href="TcDerivUtils.html#t:DerivSpec" title="TcDerivUtils">DerivSpec</a> theta -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> <a href="InstEnv.html#t:ClsInst" title="InstEnv">ClsInst</a></li><li class="src short"><a href="#v:extendLocalInstEnv">extendLocalInstEnv</a> :: [<a href="InstEnv.html#t:ClsInst" title="InstEnv">ClsInst</a>] -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> a -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> a</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DerivM" class="def">DerivM</a> = <a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a> <a href="TcDerivUtils.html#t:DerivEnv" title="TcDerivUtils">DerivEnv</a> <a href="TcRnTypes.html#t:TcRn" title="TcRnTypes">TcRn</a> <a href="src/TcDerivUtils.html#DerivM" class="link">Source</a> <a href="#t:DerivM" class="selflink">#</a></p><div class="doc"><p>To avoid having to manually plumb everything in <code><a href="TcDerivUtils.html#t:DerivEnv" title="TcDerivUtils">DerivEnv</a></code> throughout
 various functions in <code>TcDeriv</code> and <code>TcDerivInfer</code>, we use <code><a href="TcDerivUtils.html#t:DerivM" title="TcDerivUtils">DerivM</a></code>, which
 is a simple reader around <code><a href="TcRnTypes.html#t:TcRn" title="TcRnTypes">TcRn</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivEnv" class="def">DerivEnv</a> <a href="src/TcDerivUtils.html#DerivEnv" class="link">Source</a> <a href="#t:DerivEnv" class="selflink">#</a></p><div class="doc"><p>Contains all of the information known about a derived instance when
 determining what its <code>EarlyDerivSpec</code> should be.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DerivEnv" class="def">DerivEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:denv_overlap_mode" class="def">denv_overlap_mode</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="BasicTypes.html#t:OverlapMode" title="BasicTypes">OverlapMode</a></dfn><div class="doc"><p>Is this an overlapping instance?</p></div></li><li><dfn class="src"><a id="v:denv_tvs" class="def">denv_tvs</a> :: [<a href="Var.html#t:TyVar" title="Var">TyVar</a>]</dfn><div class="doc"><p>Universally quantified type variables in the instance</p></div></li><li><dfn class="src"><a id="v:denv_cls" class="def">denv_cls</a> :: <a href="Class.html#t:Class" title="Class">Class</a></dfn><div class="doc"><p>Class for which we need to derive an instance</p></div></li><li><dfn class="src"><a id="v:denv_cls_tys" class="def">denv_cls_tys</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</dfn><div class="doc"><p>Other arguments to the class except the last</p></div></li><li><dfn class="src"><a id="v:denv_tc" class="def">denv_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc"><p>Type constructor for which the instance is requested
   (last arguments to the type class)</p></div></li><li><dfn class="src"><a id="v:denv_tc_args" class="def">denv_tc_args</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</dfn><div class="doc"><p>Arguments to the type constructor</p></div></li><li><dfn class="src"><a id="v:denv_rep_tc" class="def">denv_rep_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc"><p>The representation tycon for <code><a href="TcDerivUtils.html#v:denv_tc" title="TcDerivUtils">denv_tc</a></code>
   (for data family instances)</p></div></li><li><dfn class="src"><a id="v:denv_rep_tc_args" class="def">denv_rep_tc_args</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</dfn><div class="doc"><p>The representation types for <code><a href="TcDerivUtils.html#v:denv_tc_args" title="TcDerivUtils">denv_tc_args</a></code>
   (for data family instances)</p></div></li><li><dfn class="src"><a id="v:denv_ctxt" class="def">denv_ctxt</a> :: <a href="TcDerivUtils.html#t:DerivContext" title="TcDerivUtils">DerivContext</a></dfn><div class="doc"><p><code><code><a href="TcDerivUtils.html#v:SupplyContext" title="TcDerivUtils">SupplyContext</a></code> theta</code> for standalone deriving (where <code>theta</code> is the
   context of the instance).
   <code><a href="TcDerivUtils.html#v:InferContext" title="TcDerivUtils">InferContext</a></code> for <code>deriving</code> clauses, or for standalone deriving that
   uses a wildcard constraint.
   See <code>Note [Inferring the instance context]</code>.</p></div></li><li><dfn class="src"><a id="v:denv_strat" class="def">denv_strat</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="HsDecls.html#t:DerivStrategy" title="HsDecls">DerivStrategy</a> <a href="HsExtension.html#t:GhcTc" title="HsExtension">GhcTc</a>)</dfn><div class="doc"><p><code><a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> if user requests a particular deriving strategy.
   Otherwise, <code><a href="../base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code>.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:DerivEnv" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DerivEnv:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="TcDerivUtils.html#t:DerivEnv" title="TcDerivUtils">DerivEnv</a></span> <a href="#t:DerivEnv" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DerivEnv:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="TcDerivUtils.html">TcDerivUtils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:DerivEnv" title="TcDerivUtils">DerivEnv</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="TcDerivUtils.html#t:DerivEnv" title="TcDerivUtils">DerivEnv</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivSpec" class="def">DerivSpec</a> theta <a href="src/TcDerivUtils.html#DerivSpec" class="link">Source</a> <a href="#t:DerivSpec" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DS" class="def">DS</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ds_loc" class="def">ds_loc</a> :: <a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_name" class="def">ds_name</a> :: <a href="Name.html#t:Name" title="Name">Name</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_tvs" class="def">ds_tvs</a> :: [<a href="Var.html#t:TyVar" title="Var">TyVar</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_theta" class="def">ds_theta</a> :: theta</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_cls" class="def">ds_cls</a> :: <a href="Class.html#t:Class" title="Class">Class</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_tys" class="def">ds_tys</a> :: [<a href="Type.html#t:Type" title="Type">Type</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_tc" class="def">ds_tc</a> :: <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_overlap" class="def">ds_overlap</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="BasicTypes.html#t:OverlapMode" title="BasicTypes">OverlapMode</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_standalone_wildcard" class="def">ds_standalone_wildcard</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_mechanism" class="def">ds_mechanism</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:DerivSpec" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DerivSpec:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> theta =&gt; <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> (<a href="TcDerivUtils.html#t:DerivSpec" title="TcDerivUtils">DerivSpec</a> theta)</span> <a href="#t:DerivSpec" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DerivSpec:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="TcDerivUtils.html">TcDerivUtils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:DerivSpec" title="TcDerivUtils">DerivSpec</a> theta -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="TcDerivUtils.html#t:DerivSpec" title="TcDerivUtils">DerivSpec</a> theta -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:pprDerivSpec" class="def">pprDerivSpec</a> :: <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> theta =&gt; <a href="TcDerivUtils.html#t:DerivSpec" title="TcDerivUtils">DerivSpec</a> theta -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/TcDerivUtils.html#pprDerivSpec" class="link">Source</a> <a href="#v:pprDerivSpec" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivSpecMechanism" class="def">DerivSpecMechanism</a> <a href="src/TcDerivUtils.html#DerivSpecMechanism" class="link">Source</a> <a href="#t:DerivSpecMechanism" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DerivSpecStock" class="def">DerivSpecStock</a> (<a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type" title="Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> (<a href="HsBinds.html#t:LHsBinds" title="HsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs" title="HsExtension">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff" title="TcGenDeriv">BagDerivStuff</a>, [<a href="Name.html#t:Name" title="Name">Name</a>]))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DerivSpecNewtype" class="def">DerivSpecNewtype</a> <a href="Type.html#t:Type" title="Type">Type</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DerivSpecAnyClass" class="def">DerivSpecAnyClass</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DerivSpecVia" class="def">DerivSpecVia</a> <a href="Type.html#t:Type" title="Type">Type</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:DerivSpecMechanism" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DerivSpecMechanism:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a></span> <a href="#t:DerivSpecMechanism" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DerivSpecMechanism:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="TcDerivUtils.html">TcDerivUtils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:derivSpecMechanismToStrategy" class="def">derivSpecMechanismToStrategy</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="HsDecls.html#t:DerivStrategy" title="HsDecls">DerivStrategy</a> <a href="HsExtension.html#t:GhcTc" title="HsExtension">GhcTc</a> <a href="src/TcDerivUtils.html#derivSpecMechanismToStrategy" class="link">Source</a> <a href="#v:derivSpecMechanismToStrategy" class="selflink">#</a></p><div class="doc"><p>Convert a <code><a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a></code> to its corresponding <code><a href="HsDecls.html#t:DerivStrategy" title="HsDecls">DerivStrategy</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:isDerivSpecStock" class="def">isDerivSpecStock</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/TcDerivUtils.html#isDerivSpecStock" class="link">Source</a> <a href="#v:isDerivSpecStock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDerivSpecNewtype" class="def">isDerivSpecNewtype</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/TcDerivUtils.html#isDerivSpecNewtype" class="link">Source</a> <a href="#v:isDerivSpecNewtype" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDerivSpecAnyClass" class="def">isDerivSpecAnyClass</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/TcDerivUtils.html#isDerivSpecAnyClass" class="link">Source</a> <a href="#v:isDerivSpecAnyClass" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDerivSpecVia" class="def">isDerivSpecVia</a> :: <a href="TcDerivUtils.html#t:DerivSpecMechanism" title="TcDerivUtils">DerivSpecMechanism</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/TcDerivUtils.html#isDerivSpecVia" class="link">Source</a> <a href="#v:isDerivSpecVia" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivContext" class="def">DerivContext</a> <a href="src/TcDerivUtils.html#DerivContext" class="link">Source</a> <a href="#t:DerivContext" class="selflink">#</a></p><div class="doc"><p>Whether GHC is processing a <code>deriving</code> clause or a standalone deriving
 declaration.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:InferContext" class="def">InferContext</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a>)</td><td class="doc"><p><code>'InferContext mb_wildcard</code> is either:</p><ul><li>A <code>deriving</code> clause (in which case
   <code>mb_wildcard</code> is <code><a href="../base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code>).</li><li>A standalone deriving declaration with
   an extra-constraints wildcard as the
   context (in which case <code>mb_wildcard</code> is
   <code><code><a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> loc</code>, where <code>loc</code> is the location
   of the wildcard.</li></ul><p>GHC should infer the context.</p></td></tr><tr><td class="src"><a id="v:SupplyContext" class="def">SupplyContext</a> <a href="Type.html#t:ThetaType" title="Type">ThetaType</a></td><td class="doc"><p><code><code><a href="TcDerivUtils.html#v:SupplyContext" title="TcDerivUtils">SupplyContext</a></code> theta</code> is a standalone
 deriving declaration, where <code>theta</code> is the
 context supplied by the user.</p></td></tr></table></div><div class="subs instances"><details id="i:DerivContext" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DerivContext:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="TcDerivUtils.html#t:DerivContext" title="TcDerivUtils">DerivContext</a></span> <a href="#t:DerivContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DerivContext:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="TcDerivUtils.html">TcDerivUtils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:DerivContext" title="TcDerivUtils">DerivContext</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="TcDerivUtils.html#t:DerivContext" title="TcDerivUtils">DerivContext</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:OriginativeDerivStatus" class="def">OriginativeDerivStatus</a> <a href="src/TcDerivUtils.html#OriginativeDerivStatus" class="link">Source</a> <a href="#t:OriginativeDerivStatus" class="selflink">#</a></p><div class="doc"><p>Records whether a particular class can be derived by way of an
 <em>originative</em> deriving strategy (i.e., <code>stock</code> or <code>anyclass</code>).</p><p>See <code>Note [Deriving strategies]</code> in <a href="TcDeriv.html">TcDeriv</a>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CanDeriveStock" class="def">CanDeriveStock</a> (<a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type" title="Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> (<a href="HsBinds.html#t:LHsBinds" title="HsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs" title="HsExtension">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff" title="TcGenDeriv">BagDerivStuff</a>, [<a href="Name.html#t:Name" title="Name">Name</a>]))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:StockClassError" class="def">StockClassError</a> <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CanDeriveAnyClass" class="def">CanDeriveAnyClass</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:NonDerivableClass" class="def">NonDerivableClass</a> <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:isStandaloneDeriv" class="def">isStandaloneDeriv</a> :: <a href="TcDerivUtils.html#t:DerivM" title="TcDerivUtils">DerivM</a> <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/TcDerivUtils.html#isStandaloneDeriv" class="link">Source</a> <a href="#v:isStandaloneDeriv" class="selflink">#</a></p><div class="doc"><p>Is GHC processing a stanalone deriving declaration?</p></div></div><div class="top"><p class="src"><a id="v:isStandaloneWildcardDeriv" class="def">isStandaloneWildcardDeriv</a> :: <a href="TcDerivUtils.html#t:DerivM" title="TcDerivUtils">DerivM</a> <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/TcDerivUtils.html#isStandaloneWildcardDeriv" class="link">Source</a> <a href="#v:isStandaloneWildcardDeriv" class="selflink">#</a></p><div class="doc"><p>Is GHC processing a standalone deriving declaration with an
 extra-constraints wildcard as the context?
 (e.g., <code>deriving instance _ =&gt; Eq (Foo a)</code>)</p></div></div><div class="top"><p class="src"><a id="v:mkDerivOrigin" class="def">mkDerivOrigin</a> :: <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a> <a href="src/TcDerivUtils.html#mkDerivOrigin" class="link">Source</a> <a href="#v:mkDerivOrigin" class="selflink">#</a></p><div class="doc"><p><code><code><a href="TcDerivUtils.html#v:mkDerivOrigin" title="TcDerivUtils">mkDerivOrigin</a></code> wc</code> returns <code><a href="TcRnTypes.html#v:StandAloneDerivOrigin" title="TcRnTypes">StandAloneDerivOrigin</a></code> if <code>wc</code> is <code><a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code>,
 and <code><a href="TcRnTypes.html#v:DerivClauseOrigin" title="TcRnTypes">DerivClauseOrigin</a></code> if <code>wc</code> is <code><a href="../base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code>. Useful for error-reporting.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PredOrigin" class="def">PredOrigin</a> <a href="src/TcDerivUtils.html#PredOrigin" class="link">Source</a> <a href="#t:PredOrigin" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Type.html#t:PredType" title="Type">PredType</a></code> annotated with the origin of the constraint <code><a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a></code>,
 and whether or the constraint deals in types or kinds.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PredOrigin" class="def">PredOrigin</a> <a href="Type.html#t:PredType" title="Type">PredType</a> <a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a> <a href="TcRnTypes.html#t:TypeOrKind" title="TcRnTypes">TypeOrKind</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:PredOrigin" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PredOrigin:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a></span> <a href="#t:PredOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PredOrigin:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="TcDerivUtils.html">TcDerivUtils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ThetaOrigin" class="def">ThetaOrigin</a> <a href="src/TcDerivUtils.html#ThetaOrigin" class="link">Source</a> <a href="#t:ThetaOrigin" class="selflink">#</a></p><div class="doc"><p>A list of wanted <code><a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a></code> constraints (<code><a href="TcDerivUtils.html#v:to_wanted_origins" title="TcDerivUtils">to_wanted_origins</a></code>) to
 simplify when inferring a derived instance's context. These are used in all
 deriving strategies, but in the particular case of <code>DeriveAnyClass</code>, we
 need extra information. In particular, we need:</p><ul><li><code><a href="TcDerivUtils.html#v:to_anyclass_skols" title="TcDerivUtils">to_anyclass_skols</a></code>, the list of type variables bound by a class method's
   regular type signature, which should be rigid.</li><li><code><a href="TcDerivUtils.html#v:to_anyclass_metas" title="TcDerivUtils">to_anyclass_metas</a></code>, the list of type variables bound by a class method's
   default type signature. These can be unified as necessary.</li><li><code><a href="TcDerivUtils.html#v:to_anyclass_givens" title="TcDerivUtils">to_anyclass_givens</a></code>, the list of constraints from a class method's
   regular type signature, which can be used to help solve constraints
   in the <code><a href="TcDerivUtils.html#v:to_wanted_origins" title="TcDerivUtils">to_wanted_origins</a></code>.</li></ul><p>(Note that <code><a href="TcDerivUtils.html#v:to_wanted_origins" title="TcDerivUtils">to_wanted_origins</a></code> will likely contain type variables from the
 derived type class or data type, neither of which will appear in
 <code><a href="TcDerivUtils.html#v:to_anyclass_skols" title="TcDerivUtils">to_anyclass_skols</a></code> or <code><a href="TcDerivUtils.html#v:to_anyclass_metas" title="TcDerivUtils">to_anyclass_metas</a></code>.)</p><p>For all other deriving strategies, it is always the case that
 <code><a href="TcDerivUtils.html#v:to_anyclass_skols" title="TcDerivUtils">to_anyclass_skols</a></code>, <code><a href="TcDerivUtils.html#v:to_anyclass_metas" title="TcDerivUtils">to_anyclass_metas</a></code>, and <code><a href="TcDerivUtils.html#v:to_anyclass_givens" title="TcDerivUtils">to_anyclass_givens</a></code> are
 empty.</p><p>Here is an example to illustrate this:</p><pre>class Foo a where
  bar :: forall b. Ix b =&gt; a -&gt; b -&gt; String
  default bar :: forall y. (Show a, Ix y) =&gt; a -&gt; y -&gt; String
  bar x y = show x ++ show (range (y, y))

  baz :: Eq a =&gt; a -&gt; a -&gt; Bool
  default baz :: Ord a =&gt; a -&gt; a -&gt; Bool
  baz x y = compare x y == EQ

data Quux q = Quux deriving anyclass Foo
</pre><p>Then it would generate two <code><a href="TcDerivUtils.html#t:ThetaOrigin" title="TcDerivUtils">ThetaOrigin</a></code>s, one for each method:</p><pre>[ ThetaOrigin { to_anyclass_skols  = [b]
              , to_anyclass_metas  = [y]
              , to_anyclass_givens = [Ix b]
              , to_wanted_origins  = [ Show (Quux q), Ix y
                                     , (Quux q -&gt; b -&gt; String) ~
                                       (Quux q -&gt; y -&gt; String)
                                     ] }
, ThetaOrigin { to_anyclass_skols  = []
              , to_anyclass_metas  = []
              , to_anyclass_givens = [Eq (Quux q)]
              , to_wanted_origins  = [ Ord (Quux q)
                                     , (Quux q -&gt; Quux q -&gt; Bool) ~
                                       (Quux q -&gt; Quux q -&gt; Bool)
                                     ] }
]
</pre><p>(Note that the type variable <code>q</code> is bound by the data type <code>Quux</code>, and thus
 it appears in neither <code><a href="TcDerivUtils.html#v:to_anyclass_skols" title="TcDerivUtils">to_anyclass_skols</a></code> nor <code><a href="TcDerivUtils.html#v:to_anyclass_metas" title="TcDerivUtils">to_anyclass_metas</a></code>.)</p><p>See <code>Note [Gathering and simplifying constraints for DeriveAnyClass]</code>
 in <a href="TcDerivInfer.html">TcDerivInfer</a> for an explanation of how <code><a href="TcDerivUtils.html#v:to_wanted_origins" title="TcDerivUtils">to_wanted_origins</a></code> are
 determined in <code>DeriveAnyClass</code>, as well as how <code><a href="TcDerivUtils.html#v:to_anyclass_skols" title="TcDerivUtils">to_anyclass_skols</a></code>,
 <code><a href="TcDerivUtils.html#v:to_anyclass_metas" title="TcDerivUtils">to_anyclass_metas</a></code>, and <code><a href="TcDerivUtils.html#v:to_anyclass_givens" title="TcDerivUtils">to_anyclass_givens</a></code> are used.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ThetaOrigin" class="def">ThetaOrigin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:to_anyclass_skols" class="def">to_anyclass_skols</a> :: [<a href="Var.html#t:TyVar" title="Var">TyVar</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:to_anyclass_metas" class="def">to_anyclass_metas</a> :: [<a href="Var.html#t:TyVar" title="Var">TyVar</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:to_anyclass_givens" class="def">to_anyclass_givens</a> :: <a href="Type.html#t:ThetaType" title="Type">ThetaType</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:to_wanted_origins" class="def">to_wanted_origins</a> :: [<a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a>]</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:ThetaOrigin" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ThetaOrigin:Outputable:1"></span> <a href="Outputable.html#t:Outputable" title="Outputable">Outputable</a> <a href="TcDerivUtils.html#t:ThetaOrigin" title="TcDerivUtils">ThetaOrigin</a></span> <a href="#t:ThetaOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ThetaOrigin:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="TcDerivUtils.html">TcDerivUtils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="TcDerivUtils.html#t:ThetaOrigin" title="TcDerivUtils">ThetaOrigin</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin" title="TcDerivUtils">ThetaOrigin</a> -&gt; <a href="Outputable.html#t:SDoc" title="Outputable">SDoc</a> <a href="src/Outputable.html#pprPrec" class="link">Source</a> <a href="#v:pprPrec" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:mkPredOrigin" class="def">mkPredOrigin</a> :: <a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a> -&gt; <a href="TcRnTypes.html#t:TypeOrKind" title="TcRnTypes">TypeOrKind</a> -&gt; <a href="Type.html#t:PredType" title="Type">PredType</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a> <a href="src/TcDerivUtils.html#mkPredOrigin" class="link">Source</a> <a href="#v:mkPredOrigin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkThetaOrigin" class="def">mkThetaOrigin</a> :: <a href="TcRnTypes.html#t:CtOrigin" title="TcRnTypes">CtOrigin</a> -&gt; <a href="TcRnTypes.html#t:TypeOrKind" title="TcRnTypes">TypeOrKind</a> -&gt; [<a href="Var.html#t:TyVar" title="Var">TyVar</a>] -&gt; [<a href="Var.html#t:TyVar" title="Var">TyVar</a>] -&gt; <a href="Type.html#t:ThetaType" title="Type">ThetaType</a> -&gt; <a href="Type.html#t:ThetaType" title="Type">ThetaType</a> -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin" title="TcDerivUtils">ThetaOrigin</a> <a href="src/TcDerivUtils.html#mkThetaOrigin" class="link">Source</a> <a href="#v:mkThetaOrigin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkThetaOriginFromPreds" class="def">mkThetaOriginFromPreds</a> :: [<a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a>] -&gt; <a href="TcDerivUtils.html#t:ThetaOrigin" title="TcDerivUtils">ThetaOrigin</a> <a href="src/TcDerivUtils.html#mkThetaOriginFromPreds" class="link">Source</a> <a href="#v:mkThetaOriginFromPreds" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:substPredOrigin" class="def">substPredOrigin</a> :: <a href="Util.html#t:HasCallStack" title="Util">HasCallStack</a> =&gt; <a href="Type.html#t:TCvSubst" title="Type">TCvSubst</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a> -&gt; <a href="TcDerivUtils.html#t:PredOrigin" title="TcDerivUtils">PredOrigin</a> <a href="src/TcDerivUtils.html#substPredOrigin" class="link">Source</a> <a href="#v:substPredOrigin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkOriginativeSideConditions" class="def">checkOriginativeSideConditions</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="TcDerivUtils.html#t:DerivContext" title="TcDerivUtils">DerivContext</a> -&gt; <a href="Class.html#t:Class" title="Class">Class</a> -&gt; [<a href="TcType.html#t:TcType" title="TcType">TcType</a>] -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; <a href="TcDerivUtils.html#t:OriginativeDerivStatus" title="TcDerivUtils">OriginativeDerivStatus</a> <a href="src/TcDerivUtils.html#checkOriginativeSideConditions" class="link">Source</a> <a href="#v:checkOriginativeSideConditions" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hasStockDeriving" class="def">hasStockDeriving</a> :: <a href="Class.html#t:Class" title="Class">Class</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="SrcLoc.html#t:SrcSpan" title="SrcLoc">SrcSpan</a> -&gt; <a href="TyCon.html#t:TyCon" title="TyCon">TyCon</a> -&gt; [<a href="Type.html#t:Type" title="Type">Type</a>] -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> (<a href="HsBinds.html#t:LHsBinds" title="HsBinds">LHsBinds</a> <a href="HsExtension.html#t:GhcPs" title="HsExtension">GhcPs</a>, <a href="TcGenDeriv.html#t:BagDerivStuff" title="TcGenDeriv">BagDerivStuff</a>, [<a href="Name.html#t:Name" title="Name">Name</a>])) <a href="src/TcDerivUtils.html#hasStockDeriving" class="link">Source</a> <a href="#v:hasStockDeriving" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:canDeriveAnyClass" class="def">canDeriveAnyClass</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="ErrUtils.html#t:Validity" title="ErrUtils">Validity</a> <a href="src/TcDerivUtils.html#canDeriveAnyClass" class="link">Source</a> <a href="#v:canDeriveAnyClass" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:std_class_via_coercible" class="def">std_class_via_coercible</a> :: <a href="Class.html#t:Class" title="Class">Class</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/TcDerivUtils.html#std_class_via_coercible" class="link">Source</a> <a href="#v:std_class_via_coercible" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:non_coercible_class" class="def">non_coercible_class</a> :: <a href="Class.html#t:Class" title="Class">Class</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/TcDerivUtils.html#non_coercible_class" class="link">Source</a> <a href="#v:non_coercible_class" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:newDerivClsInst" class="def">newDerivClsInst</a> :: <a href="Type.html#t:ThetaType" title="Type">ThetaType</a> -&gt; <a href="TcDerivUtils.html#t:DerivSpec" title="TcDerivUtils">DerivSpec</a> theta -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> <a href="InstEnv.html#t:ClsInst" title="InstEnv">ClsInst</a> <a href="src/TcDerivUtils.html#newDerivClsInst" class="link">Source</a> <a href="#v:newDerivClsInst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:extendLocalInstEnv" class="def">extendLocalInstEnv</a> :: [<a href="InstEnv.html#t:ClsInst" title="InstEnv">ClsInst</a>] -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> a -&gt; <a href="TcRnTypes.html#t:TcM" title="TcRnTypes">TcM</a> a <a href="src/TcDerivUtils.html#extendLocalInstEnv" class="link">Source</a> <a href="#v:extendLocalInstEnv" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>