<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>StgCmmProf</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/StgCmmProf.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-8.6.5: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">StgCmmProf</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:initCostCentres">initCostCentres</a> :: <a href="CostCentre.html#t:CollectedCCs" title="CostCentre">CollectedCCs</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:ccType">ccType</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CmmType.html#t:CmmType" title="CmmType">CmmType</a></li><li class="src short"><a href="#v:ccsType">ccsType</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CmmType.html#t:CmmType" title="CmmType">CmmType</a></li><li class="src short"><a href="#v:mkCCostCentre">mkCCostCentre</a> :: <a href="CostCentre.html#t:CostCentre" title="CostCentre">CostCentre</a> -&gt; <a href="CmmExpr.html#t:CmmLit" title="CmmExpr">CmmLit</a></li><li class="src short"><a href="#v:mkCCostCentreStack">mkCCostCentreStack</a> :: <a href="CostCentre.html#t:CostCentreStack" title="CostCentre">CostCentreStack</a> -&gt; <a href="CmmExpr.html#t:CmmLit" title="CmmExpr">CmmLit</a></li><li class="src short"><a href="#v:dynProfHdr">dynProfHdr</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; [<a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a>]</li><li class="src short"><a href="#v:profDynAlloc">profDynAlloc</a> :: <a href="SMRep.html#t:SMRep" title="SMRep">SMRep</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:profAlloc">profAlloc</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:staticProfHdr">staticProfHdr</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CostCentre.html#t:CostCentreStack" title="CostCentre">CostCentreStack</a> -&gt; [<a href="CmmExpr.html#t:CmmLit" title="CmmExpr">CmmLit</a>]</li><li class="src short"><a href="#v:initUpdFrameProf">initUpdFrameProf</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:enterCostCentreThunk">enterCostCentreThunk</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:enterCostCentreFun">enterCostCentreFun</a> :: <a href="CostCentre.html#t:CostCentreStack" title="CostCentre">CostCentreStack</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:costCentreFrom">costCentreFrom</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a></li><li class="src short"><a href="#v:storeCurCCS">storeCurCCS</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="MkGraph.html#t:CmmAGraph" title="MkGraph">CmmAGraph</a></li><li class="src short"><a href="#v:emitSetCCC">emitSetCCC</a> :: <a href="CostCentre.html#t:CostCentre" title="CostCentre">CostCentre</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:saveCurrentCostCentre">saveCurrentCostCentre</a> :: <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="CmmExpr.html#t:LocalReg" title="CmmExpr">LocalReg</a>)</li><li class="src short"><a href="#v:restoreCurrentCostCentre">restoreCurrentCostCentre</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="CmmExpr.html#t:LocalReg" title="CmmExpr">LocalReg</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:ldvEnter">ldvEnter</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:ldvEnterClosure">ldvEnterClosure</a> :: <a href="StgCmmClosure.html#t:ClosureInfo" title="StgCmmClosure">ClosureInfo</a> -&gt; <a href="CmmExpr.html#t:CmmReg" title="CmmExpr">CmmReg</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li><li class="src short"><a href="#v:ldvRecordCreate">ldvRecordCreate</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:initCostCentres" class="def">initCostCentres</a> :: <a href="CostCentre.html#t:CollectedCCs" title="CostCentre">CollectedCCs</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#initCostCentres" class="link">Source</a> <a href="#v:initCostCentres" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ccType" class="def">ccType</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CmmType.html#t:CmmType" title="CmmType">CmmType</a> <a href="src/StgCmmProf.html#ccType" class="link">Source</a> <a href="#v:ccType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ccsType" class="def">ccsType</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CmmType.html#t:CmmType" title="CmmType">CmmType</a> <a href="src/StgCmmProf.html#ccsType" class="link">Source</a> <a href="#v:ccsType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkCCostCentre" class="def">mkCCostCentre</a> :: <a href="CostCentre.html#t:CostCentre" title="CostCentre">CostCentre</a> -&gt; <a href="CmmExpr.html#t:CmmLit" title="CmmExpr">CmmLit</a> <a href="src/StgCmmProf.html#mkCCostCentre" class="link">Source</a> <a href="#v:mkCCostCentre" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkCCostCentreStack" class="def">mkCCostCentreStack</a> :: <a href="CostCentre.html#t:CostCentreStack" title="CostCentre">CostCentreStack</a> -&gt; <a href="CmmExpr.html#t:CmmLit" title="CmmExpr">CmmLit</a> <a href="src/StgCmmProf.html#mkCCostCentreStack" class="link">Source</a> <a href="#v:mkCCostCentreStack" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dynProfHdr" class="def">dynProfHdr</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; [<a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a>] <a href="src/StgCmmProf.html#dynProfHdr" class="link">Source</a> <a href="#v:dynProfHdr" class="selflink">#</a></p><div class="doc"><p>Profiling header words in a dynamic closure</p></div></div><div class="top"><p class="src"><a id="v:profDynAlloc" class="def">profDynAlloc</a> :: <a href="SMRep.html#t:SMRep" title="SMRep">SMRep</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#profDynAlloc" class="link">Source</a> <a href="#v:profDynAlloc" class="selflink">#</a></p><div class="doc"><p>Record the allocation of a closure.  The CmmExpr is the cost
 centre stack to which to attribute the allocation.</p></div></div><div class="top"><p class="src"><a id="v:profAlloc" class="def">profAlloc</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#profAlloc" class="link">Source</a> <a href="#v:profAlloc" class="selflink">#</a></p><div class="doc"><p>Record the allocation of a closure (size is given by a CmmExpr)
 The size must be in words, because the allocation counter in a CCS counts
 in words.</p></div></div><div class="top"><p class="src"><a id="v:staticProfHdr" class="def">staticProfHdr</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CostCentre.html#t:CostCentreStack" title="CostCentre">CostCentreStack</a> -&gt; [<a href="CmmExpr.html#t:CmmLit" title="CmmExpr">CmmLit</a>] <a href="src/StgCmmProf.html#staticProfHdr" class="link">Source</a> <a href="#v:staticProfHdr" class="selflink">#</a></p><div class="doc"><p>The profiling header words in a static closure</p></div></div><div class="top"><p class="src"><a id="v:initUpdFrameProf" class="def">initUpdFrameProf</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#initUpdFrameProf" class="link">Source</a> <a href="#v:initUpdFrameProf" class="selflink">#</a></p><div class="doc"><p>Initialise the profiling field of an update frame</p></div></div><div class="top"><p class="src"><a id="v:enterCostCentreThunk" class="def">enterCostCentreThunk</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#enterCostCentreThunk" class="link">Source</a> <a href="#v:enterCostCentreThunk" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:enterCostCentreFun" class="def">enterCostCentreFun</a> :: <a href="CostCentre.html#t:CostCentreStack" title="CostCentre">CostCentreStack</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#enterCostCentreFun" class="link">Source</a> <a href="#v:enterCostCentreFun" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:costCentreFrom" class="def">costCentreFrom</a> :: <a href="DynFlags.html#t:DynFlags" title="DynFlags">DynFlags</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> <a href="src/StgCmmProf.html#costCentreFrom" class="link">Source</a> <a href="#v:costCentreFrom" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:storeCurCCS" class="def">storeCurCCS</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="MkGraph.html#t:CmmAGraph" title="MkGraph">CmmAGraph</a> <a href="src/StgCmmProf.html#storeCurCCS" class="link">Source</a> <a href="#v:storeCurCCS" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emitSetCCC" class="def">emitSetCCC</a> :: <a href="CostCentre.html#t:CostCentre" title="CostCentre">CostCentre</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#emitSetCCC" class="link">Source</a> <a href="#v:emitSetCCC" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:saveCurrentCostCentre" class="def">saveCurrentCostCentre</a> :: <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="CmmExpr.html#t:LocalReg" title="CmmExpr">LocalReg</a>) <a href="src/StgCmmProf.html#saveCurrentCostCentre" class="link">Source</a> <a href="#v:saveCurrentCostCentre" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:restoreCurrentCostCentre" class="def">restoreCurrentCostCentre</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="CmmExpr.html#t:LocalReg" title="CmmExpr">LocalReg</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#restoreCurrentCostCentre" class="link">Source</a> <a href="#v:restoreCurrentCostCentre" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ldvEnter" class="def">ldvEnter</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#ldvEnter" class="link">Source</a> <a href="#v:ldvEnter" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ldvEnterClosure" class="def">ldvEnterClosure</a> :: <a href="StgCmmClosure.html#t:ClosureInfo" title="StgCmmClosure">ClosureInfo</a> -&gt; <a href="CmmExpr.html#t:CmmReg" title="CmmExpr">CmmReg</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#ldvEnterClosure" class="link">Source</a> <a href="#v:ldvEnterClosure" class="selflink">#</a></p><div class="doc"><p>Called when a closure is entered, marks the closure as having
 been &quot;used&quot;.  The closure is not an &quot;inherently used&quot; one.  The
 closure is not <code>IND</code> because that is not considered for LDV profiling.</p></div></div><div class="top"><p class="src"><a id="v:ldvRecordCreate" class="def">ldvRecordCreate</a> :: <a href="CmmExpr.html#t:CmmExpr" title="CmmExpr">CmmExpr</a> -&gt; <a href="StgCmmMonad.html#t:FCode" title="StgCmmMonad">FCode</a> () <a href="src/StgCmmProf.html#ldvRecordCreate" class="link">Source</a> <a href="#v:ldvRecordCreate" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>