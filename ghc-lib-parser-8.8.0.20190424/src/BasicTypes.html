<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1997-1998

\section[BasicTypes]{Miscellanous types}

This module defines a miscellaneously collection of very simple
types that

\begin{itemize}
\item have no other obvious home
\item don't depend on any other complicated types
\item are used in more than one &quot;part&quot; of the compiler
\end{itemize}
-}</span><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><a name="line-18"></a><span>
</span><a name="line-19"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">BasicTypes</span><span class="hs-special">(</span><span>
</span><a name="line-20"></a><span>        </span><a href="BasicTypes.html#Version"><span class="hs-identifier hs-type">Version</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#bumpVersion"><span class="hs-identifier hs-var">bumpVersion</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#initialVersion"><span class="hs-identifier hs-var">initialVersion</span></a><span class="hs-special">,</span><span>
</span><a name="line-21"></a><span>
</span><a name="line-22"></a><span>        </span><a href="BasicTypes.html#LeftOrRight"><span class="hs-identifier hs-type">LeftOrRight</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-23"></a><span>        </span><a href="BasicTypes.html#pickLR"><span class="hs-identifier hs-var">pickLR</span></a><span class="hs-special">,</span><span>
</span><a name="line-24"></a><span>
</span><a name="line-25"></a><span>        </span><a href="BasicTypes.html#ConTag"><span class="hs-identifier hs-type">ConTag</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#ConTagZ"><span class="hs-identifier hs-type">ConTagZ</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#fIRST_TAG"><span class="hs-identifier hs-var">fIRST_TAG</span></a><span class="hs-special">,</span><span>
</span><a name="line-26"></a><span>
</span><a name="line-27"></a><span>        </span><a href="BasicTypes.html#Arity"><span class="hs-identifier hs-type">Arity</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#RepArity"><span class="hs-identifier hs-type">RepArity</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a><span class="hs-special">,</span><span>
</span><a name="line-28"></a><span>
</span><a name="line-29"></a><span>        </span><a href="BasicTypes.html#Alignment"><span class="hs-identifier hs-type">Alignment</span></a><span class="hs-special">,</span><span>
</span><a name="line-30"></a><span>
</span><a name="line-31"></a><span>        </span><a href="BasicTypes.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isPromoted"><span class="hs-identifier hs-var">isPromoted</span></a><span class="hs-special">,</span><span>
</span><a name="line-32"></a><span>        </span><a href="BasicTypes.html#FunctionOrData"><span class="hs-identifier hs-type">FunctionOrData</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-33"></a><span>
</span><a name="line-34"></a><span>        </span><a href="BasicTypes.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#pprWarningTxtForMsg"><span class="hs-identifier hs-var">pprWarningTxtForMsg</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-35"></a><span>
</span><a name="line-36"></a><span>        </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#FixityDirection"><span class="hs-identifier hs-type">FixityDirection</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-37"></a><span>        </span><a href="BasicTypes.html#defaultFixity"><span class="hs-identifier hs-var">defaultFixity</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#maxPrecedence"><span class="hs-identifier hs-var">maxPrecedence</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#minPrecedence"><span class="hs-identifier hs-var">minPrecedence</span></a><span class="hs-special">,</span><span>
</span><a name="line-38"></a><span>        </span><a href="BasicTypes.html#negateFixity"><span class="hs-identifier hs-var">negateFixity</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#funTyFixity"><span class="hs-identifier hs-var">funTyFixity</span></a><span class="hs-special">,</span><span>
</span><a name="line-39"></a><span>        </span><a href="BasicTypes.html#compareFixity"><span class="hs-identifier hs-var">compareFixity</span></a><span class="hs-special">,</span><span>
</span><a name="line-40"></a><span>        </span><a href="BasicTypes.html#LexicalFixity"><span class="hs-identifier hs-type">LexicalFixity</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-41"></a><span>
</span><a name="line-42"></a><span>        </span><a href="BasicTypes.html#RecFlag"><span class="hs-identifier hs-type">RecFlag</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isRec"><span class="hs-identifier hs-var">isRec</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isNonRec"><span class="hs-identifier hs-var">isNonRec</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#boolToRecFlag"><span class="hs-identifier hs-var">boolToRecFlag</span></a><span class="hs-special">,</span><span>
</span><a name="line-43"></a><span>        </span><a href="BasicTypes.html#Origin"><span class="hs-identifier hs-type">Origin</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isGenerated"><span class="hs-identifier hs-var">isGenerated</span></a><span class="hs-special">,</span><span>
</span><a name="line-44"></a><span>
</span><a name="line-45"></a><span>        </span><a href="BasicTypes.html#RuleName"><span class="hs-identifier hs-type">RuleName</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#pprRuleName"><span class="hs-identifier hs-var">pprRuleName</span></a><span class="hs-special">,</span><span>
</span><a name="line-46"></a><span>
</span><a name="line-47"></a><span>        </span><a href="BasicTypes.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isTopLevel"><span class="hs-identifier hs-var">isTopLevel</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isNotTopLevel"><span class="hs-identifier hs-var">isNotTopLevel</span></a><span class="hs-special">,</span><span>
</span><a name="line-48"></a><span>
</span><a name="line-49"></a><span>        </span><a href="BasicTypes.html#OverlapFlag"><span class="hs-identifier hs-type">OverlapFlag</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#OverlapMode"><span class="hs-identifier hs-type">OverlapMode</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#setOverlapModeMaybe"><span class="hs-identifier hs-var">setOverlapModeMaybe</span></a><span class="hs-special">,</span><span>
</span><a name="line-50"></a><span>        </span><a href="BasicTypes.html#hasOverlappingFlag"><span class="hs-identifier hs-var">hasOverlappingFlag</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#hasOverlappableFlag"><span class="hs-identifier hs-var">hasOverlappableFlag</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#hasIncoherentFlag"><span class="hs-identifier hs-var">hasIncoherentFlag</span></a><span class="hs-special">,</span><span>
</span><a name="line-51"></a><span>
</span><a name="line-52"></a><span>        </span><a href="BasicTypes.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isBoxed"><span class="hs-identifier hs-var">isBoxed</span></a><span class="hs-special">,</span><span>
</span><a name="line-53"></a><span>
</span><a name="line-54"></a><span>        </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-type">PprPrec</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#topPrec"><span class="hs-identifier hs-var">topPrec</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#sigPrec"><span class="hs-identifier hs-var">sigPrec</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#opPrec"><span class="hs-identifier hs-var">opPrec</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#funPrec"><span class="hs-identifier hs-var">funPrec</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#appPrec"><span class="hs-identifier hs-var">appPrec</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#maybeParen"><span class="hs-identifier hs-var">maybeParen</span></a><span class="hs-special">,</span><span>
</span><a name="line-55"></a><span>
</span><a name="line-56"></a><span>        </span><a href="BasicTypes.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#tupleSortBoxity"><span class="hs-identifier hs-var">tupleSortBoxity</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#boxityTupleSort"><span class="hs-identifier hs-var">boxityTupleSort</span></a><span class="hs-special">,</span><span>
</span><a name="line-57"></a><span>        </span><a href="BasicTypes.html#tupleParens"><span class="hs-identifier hs-var">tupleParens</span></a><span class="hs-special">,</span><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span>        </span><a href="BasicTypes.html#sumParens"><span class="hs-identifier hs-var">sumParens</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#pprAlternative"><span class="hs-identifier hs-var">pprAlternative</span></a><span class="hs-special">,</span><span>
</span><a name="line-60"></a><span>
</span><a name="line-61"></a><span>        </span><span class="hs-comment">-- ** The OneShotInfo type</span><span>
</span><a name="line-62"></a><span>        </span><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-63"></a><span>        </span><a href="BasicTypes.html#noOneShotInfo"><span class="hs-identifier hs-var">noOneShotInfo</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#hasNoOneShotInfo"><span class="hs-identifier hs-var">hasNoOneShotInfo</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isOneShotInfo"><span class="hs-identifier hs-var">isOneShotInfo</span></a><span class="hs-special">,</span><span>
</span><a name="line-64"></a><span>        </span><a href="BasicTypes.html#bestOneShot"><span class="hs-identifier hs-var">bestOneShot</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#worstOneShot"><span class="hs-identifier hs-var">worstOneShot</span></a><span class="hs-special">,</span><span>
</span><a name="line-65"></a><span>
</span><a name="line-66"></a><span>        </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#noOccInfo"><span class="hs-identifier hs-var">noOccInfo</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#seqOccInfo"><span class="hs-identifier hs-var">seqOccInfo</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#zapFragileOcc"><span class="hs-identifier hs-var">zapFragileOcc</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isOneOcc"><span class="hs-identifier hs-var">isOneOcc</span></a><span class="hs-special">,</span><span>
</span><a name="line-67"></a><span>        </span><a href="BasicTypes.html#isDeadOcc"><span class="hs-identifier hs-var">isDeadOcc</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isStrongLoopBreaker"><span class="hs-identifier hs-var">isStrongLoopBreaker</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isWeakLoopBreaker"><span class="hs-identifier hs-var">isWeakLoopBreaker</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isManyOccs"><span class="hs-identifier hs-var">isManyOccs</span></a><span class="hs-special">,</span><span>
</span><a name="line-68"></a><span>        </span><a href="BasicTypes.html#strongLoopBreaker"><span class="hs-identifier hs-var">strongLoopBreaker</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#weakLoopBreaker"><span class="hs-identifier hs-var">weakLoopBreaker</span></a><span class="hs-special">,</span><span>
</span><a name="line-69"></a><span>
</span><a name="line-70"></a><span>        </span><a href="BasicTypes.html#InsideLam"><span class="hs-identifier hs-type">InsideLam</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#insideLam"><span class="hs-identifier hs-var">insideLam</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#notInsideLam"><span class="hs-identifier hs-var">notInsideLam</span></a><span class="hs-special">,</span><span>
</span><a name="line-71"></a><span>        </span><a href="BasicTypes.html#OneBranch"><span class="hs-identifier hs-type">OneBranch</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#oneBranch"><span class="hs-identifier hs-var">oneBranch</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#notOneBranch"><span class="hs-identifier hs-var">notOneBranch</span></a><span class="hs-special">,</span><span>
</span><a name="line-72"></a><span>        </span><a href="BasicTypes.html#InterestingCxt"><span class="hs-identifier hs-type">InterestingCxt</span></a><span class="hs-special">,</span><span>
</span><a name="line-73"></a><span>        </span><a href="BasicTypes.html#TailCallInfo"><span class="hs-identifier hs-type">TailCallInfo</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#tailCallInfo"><span class="hs-identifier hs-var">tailCallInfo</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#zapOccTailCallInfo"><span class="hs-identifier hs-var">zapOccTailCallInfo</span></a><span class="hs-special">,</span><span>
</span><a name="line-74"></a><span>        </span><a href="BasicTypes.html#isAlwaysTailCalled"><span class="hs-identifier hs-var">isAlwaysTailCalled</span></a><span class="hs-special">,</span><span>
</span><a name="line-75"></a><span>
</span><a name="line-76"></a><span>        </span><a href="BasicTypes.html#EP"><span class="hs-identifier hs-type">EP</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-77"></a><span>
</span><a name="line-78"></a><span>        </span><a href="BasicTypes.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-79"></a><span>        </span><a href="BasicTypes.html#SwapFlag"><span class="hs-identifier hs-type">SwapFlag</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#flipSwap"><span class="hs-identifier hs-var">flipSwap</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#unSwap"><span class="hs-identifier hs-var">unSwap</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isSwapped"><span class="hs-identifier hs-var">isSwapped</span></a><span class="hs-special">,</span><span>
</span><a name="line-80"></a><span>
</span><a name="line-81"></a><span>        </span><a href="BasicTypes.html#CompilerPhase"><span class="hs-identifier hs-type">CompilerPhase</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#PhaseNum"><span class="hs-identifier hs-type">PhaseNum</span></a><span class="hs-special">,</span><span>
</span><a name="line-82"></a><span>
</span><a name="line-83"></a><span>        </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isActive"><span class="hs-identifier hs-var">isActive</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isActiveIn"><span class="hs-identifier hs-var">isActiveIn</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#competesWith"><span class="hs-identifier hs-var">competesWith</span></a><span class="hs-special">,</span><span>
</span><a name="line-84"></a><span>        </span><a href="BasicTypes.html#isNeverActive"><span class="hs-identifier hs-var">isNeverActive</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isAlwaysActive"><span class="hs-identifier hs-var">isAlwaysActive</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isEarlyActive"><span class="hs-identifier hs-var">isEarlyActive</span></a><span class="hs-special">,</span><span>
</span><a name="line-85"></a><span>        </span><a href="BasicTypes.html#activeAfterInitial"><span class="hs-identifier hs-var">activeAfterInitial</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#activeDuringFinal"><span class="hs-identifier hs-var">activeDuringFinal</span></a><span class="hs-special">,</span><span>
</span><a name="line-86"></a><span>
</span><a name="line-87"></a><span>        </span><a href="BasicTypes.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isConLike"><span class="hs-identifier hs-var">isConLike</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isFunLike"><span class="hs-identifier hs-var">isFunLike</span></a><span class="hs-special">,</span><span>
</span><a name="line-88"></a><span>        </span><a href="BasicTypes.html#InlineSpec"><span class="hs-identifier hs-type">InlineSpec</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#noUserInlineSpec"><span class="hs-identifier hs-var">noUserInlineSpec</span></a><span class="hs-special">,</span><span>
</span><a name="line-89"></a><span>        </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#defaultInlinePragma"><span class="hs-identifier hs-var">defaultInlinePragma</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#alwaysInlinePragma"><span class="hs-identifier hs-var">alwaysInlinePragma</span></a><span class="hs-special">,</span><span>
</span><a name="line-90"></a><span>        </span><a href="BasicTypes.html#neverInlinePragma"><span class="hs-identifier hs-var">neverInlinePragma</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#dfunInlinePragma"><span class="hs-identifier hs-var">dfunInlinePragma</span></a><span class="hs-special">,</span><span>
</span><a name="line-91"></a><span>        </span><a href="BasicTypes.html#isDefaultInlinePragma"><span class="hs-identifier hs-var">isDefaultInlinePragma</span></a><span class="hs-special">,</span><span>
</span><a name="line-92"></a><span>        </span><a href="BasicTypes.html#isInlinePragma"><span class="hs-identifier hs-var">isInlinePragma</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isInlinablePragma"><span class="hs-identifier hs-var">isInlinablePragma</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#isAnyInlinePragma"><span class="hs-identifier hs-var">isAnyInlinePragma</span></a><span class="hs-special">,</span><span>
</span><a name="line-93"></a><span>        </span><a href="BasicTypes.html#inlinePragmaSpec"><span class="hs-identifier hs-var">inlinePragmaSpec</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#inlinePragmaSat"><span class="hs-identifier hs-var">inlinePragmaSat</span></a><span class="hs-special">,</span><span>
</span><a name="line-94"></a><span>        </span><a href="BasicTypes.html#inlinePragmaActivation"><span class="hs-identifier hs-var">inlinePragmaActivation</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#inlinePragmaRuleMatchInfo"><span class="hs-identifier hs-var">inlinePragmaRuleMatchInfo</span></a><span class="hs-special">,</span><span>
</span><a name="line-95"></a><span>        </span><a href="BasicTypes.html#setInlinePragmaActivation"><span class="hs-identifier hs-var">setInlinePragmaActivation</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#setInlinePragmaRuleMatchInfo"><span class="hs-identifier hs-var">setInlinePragmaRuleMatchInfo</span></a><span class="hs-special">,</span><span>
</span><a name="line-96"></a><span>        </span><a href="BasicTypes.html#pprInline"><span class="hs-identifier hs-var">pprInline</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#pprInlineDebug"><span class="hs-identifier hs-var">pprInlineDebug</span></a><span class="hs-special">,</span><span>
</span><a name="line-97"></a><span>
</span><a name="line-98"></a><span>        </span><a href="BasicTypes.html#SuccessFlag"><span class="hs-identifier hs-type">SuccessFlag</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#succeeded"><span class="hs-identifier hs-var">succeeded</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#failed"><span class="hs-identifier hs-var">failed</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#successIf"><span class="hs-identifier hs-var">successIf</span></a><span class="hs-special">,</span><span>
</span><a name="line-99"></a><span>
</span><a name="line-100"></a><span>        </span><a href="BasicTypes.html#IntegralLit"><span class="hs-identifier hs-type">IntegralLit</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-101"></a><span>        </span><a href="BasicTypes.html#negateIntegralLit"><span class="hs-identifier hs-var">negateIntegralLit</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#negateFractionalLit"><span class="hs-identifier hs-var">negateFractionalLit</span></a><span class="hs-special">,</span><span>
</span><a name="line-102"></a><span>        </span><a href="BasicTypes.html#mkIntegralLit"><span class="hs-identifier hs-var">mkIntegralLit</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#mkFractionalLit"><span class="hs-identifier hs-var">mkFractionalLit</span></a><span class="hs-special">,</span><span>
</span><a name="line-103"></a><span>        </span><a href="BasicTypes.html#integralFractionalLit"><span class="hs-identifier hs-var">integralFractionalLit</span></a><span class="hs-special">,</span><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span>        </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#pprWithSourceText"><span class="hs-identifier hs-var">pprWithSourceText</span></a><span class="hs-special">,</span><span>
</span><a name="line-106"></a><span>
</span><a name="line-107"></a><span>        </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#infinity"><span class="hs-identifier hs-var">infinity</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#treatZeroAsInf"><span class="hs-identifier hs-var">treatZeroAsInf</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#mkIntWithInf"><span class="hs-identifier hs-var">mkIntWithInf</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#intGtLimit"><span class="hs-identifier hs-var">intGtLimit</span></a><span class="hs-special">,</span><span>
</span><a name="line-108"></a><span>
</span><a name="line-109"></a><span>        </span><a href="BasicTypes.html#SpliceExplicitFlag"><span class="hs-identifier hs-type">SpliceExplicitFlag</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-110"></a><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-111"></a><span>
</span><a name="line-112"></a><span class="hs-keyword">import</span><span> </span><a href="GhcPrelude.html"><span class="hs-identifier">GhcPrelude</span></a><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span class="hs-keyword">import</span><span> </span><a href="FastString.html"><span class="hs-identifier">FastString</span></a><span>
</span><a name="line-115"></a><span class="hs-keyword">import</span><span> </span><a href="Outputable.html"><span class="hs-identifier">Outputable</span></a><span>
</span><a name="line-116"></a><span class="hs-keyword">import</span><span> </span><a href="SrcLoc.html"><span class="hs-identifier">SrcLoc</span></a><span> </span><span class="hs-special">(</span><span> </span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span class="hs-special">,</span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-117"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Data</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Fixity</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Prefix</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Infix</span><span class="hs-special">)</span><span>
</span><a name="line-118"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Function</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">on</span><span class="hs-special">)</span><span>
</span><a name="line-119"></a><span>
</span><a name="line-120"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
          Binary choice
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-127"></a><span>
</span><a name="line-128"></a><span class="hs-keyword">data</span><span> </span><a name="LeftOrRight"><a href="BasicTypes.html#LeftOrRight"><span class="hs-identifier">LeftOrRight</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="CLeft"><a href="BasicTypes.html#CLeft"><span class="hs-identifier">CLeft</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="CRight"><a href="BasicTypes.html#CRight"><span class="hs-identifier">CRight</span></a></a><span>
</span><a name="line-129"></a><span>                 </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-130"></a><span>
</span><a name="line-131"></a><span class="hs-identifier">pickLR</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#LeftOrRight"><span class="hs-identifier hs-type">LeftOrRight</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680214700"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><a href="#local-6989586621680214700"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214700"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-132"></a><a name="pickLR"><a href="BasicTypes.html#pickLR"><span class="hs-identifier">pickLR</span></a></a><span> </span><a href="BasicTypes.html#CLeft"><span class="hs-identifier hs-var">CLeft</span></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621680214701"><a href="#local-6989586621680214701"><span class="hs-identifier">l</span></a></a><span class="hs-special">,</span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214701"><span class="hs-identifier hs-var">l</span></a><span>
</span><a name="line-133"></a><span class="hs-identifier">pickLR</span><span> </span><a href="BasicTypes.html#CRight"><span class="hs-identifier hs-var">CRight</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><a name="local-6989586621680214702"><a href="#local-6989586621680214702"><span class="hs-identifier">r</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214702"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-134"></a><span>
</span><a name="line-135"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#LeftOrRight"><span class="hs-identifier hs-type">LeftOrRight</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-136"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#CLeft"><span class="hs-identifier hs-var">CLeft</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Left&quot;</span><span>
</span><a name="line-137"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#CRight"><span class="hs-identifier hs-var">CRight</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Right&quot;</span><span>
</span><a name="line-138"></a><span>
</span><a name="line-139"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[Arity]{Arity}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-146"></a><span>
</span><a name="line-147"></a><span class="hs-comment">-- | The number of value arguments that can be applied to a value before it does</span><span>
</span><a name="line-148"></a><span class="hs-comment">-- &quot;real work&quot;. So:</span><span>
</span><a name="line-149"></a><span class="hs-comment">--  fib 100     has arity 0</span><span>
</span><a name="line-150"></a><span class="hs-comment">--  \x -&gt; fib x has arity 1</span><span>
</span><a name="line-151"></a><span class="hs-comment">-- See also Note [Definition of arity] in CoreArity</span><span>
</span><a name="line-152"></a><span class="hs-keyword">type</span><span> </span><a name="Arity"><a href="BasicTypes.html#Arity"><span class="hs-identifier">Arity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-153"></a><span>
</span><a name="line-154"></a><span class="hs-comment">-- | Representation Arity</span><span>
</span><a name="line-155"></a><span class="hs-comment">--</span><span>
</span><a name="line-156"></a><span class="hs-comment">-- The number of represented arguments that can be applied to a value before it does</span><span>
</span><a name="line-157"></a><span class="hs-comment">-- &quot;real work&quot;. So:</span><span>
</span><a name="line-158"></a><span class="hs-comment">--  fib 100                    has representation arity 0</span><span>
</span><a name="line-159"></a><span class="hs-comment">--  \x -&gt; fib x                has representation arity 1</span><span>
</span><a name="line-160"></a><span class="hs-comment">--  \(# x, y #) -&gt; fib (x + y) has representation arity 2</span><span>
</span><a name="line-161"></a><span class="hs-keyword">type</span><span> </span><a name="RepArity"><a href="BasicTypes.html#RepArity"><span class="hs-identifier">RepArity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-162"></a><span>
</span><a name="line-163"></a><span class="hs-comment">-- | The number of arguments that a join point takes. Unlike the arity of a</span><span>
</span><a name="line-164"></a><span class="hs-comment">-- function, this is a purely syntactic property and is fixed when the join</span><span>
</span><a name="line-165"></a><span class="hs-comment">-- point is created (or converted from a value). Both type and value arguments</span><span>
</span><a name="line-166"></a><span class="hs-comment">-- are counted.</span><span>
</span><a name="line-167"></a><span class="hs-keyword">type</span><span> </span><a name="JoinArity"><a href="BasicTypes.html#JoinArity"><span class="hs-identifier">JoinArity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-168"></a><span>
</span><a name="line-169"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
              Constructor tags
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-176"></a><span>
</span><a name="line-177"></a><span class="hs-comment">-- | Constructor Tag</span><span>
</span><a name="line-178"></a><span class="hs-comment">--</span><span>
</span><a name="line-179"></a><span class="hs-comment">-- Type of the tags associated with each constructor possibility or superclass</span><span>
</span><a name="line-180"></a><span class="hs-comment">-- selector</span><span>
</span><a name="line-181"></a><span class="hs-keyword">type</span><span> </span><a name="ConTag"><a href="BasicTypes.html#ConTag"><span class="hs-identifier">ConTag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-182"></a><span>
</span><a name="line-183"></a><span class="hs-comment">-- | A *zero-indexed* constructor tag</span><span>
</span><a name="line-184"></a><span class="hs-keyword">type</span><span> </span><a name="ConTagZ"><a href="BasicTypes.html#ConTagZ"><span class="hs-identifier">ConTagZ</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-185"></a><span>
</span><a name="line-186"></a><span class="hs-identifier">fIRST_TAG</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#ConTag"><span class="hs-identifier hs-type">ConTag</span></a><span>
</span><a name="line-187"></a><span class="hs-comment">-- ^ Tags are allocated from here for real constructors</span><span>
</span><a name="line-188"></a><span class="hs-comment">--   or for superclass selectors</span><span>
</span><a name="line-189"></a><a name="fIRST_TAG"><a href="BasicTypes.html#fIRST_TAG"><span class="hs-identifier">fIRST_TAG</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-number">1</span><span>
</span><a name="line-190"></a><span>
</span><a name="line-191"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[Alignment]{Alignment}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-198"></a><span>
</span><a name="line-199"></a><span class="hs-keyword">type</span><span> </span><a name="Alignment"><a href="BasicTypes.html#Alignment"><span class="hs-identifier">Alignment</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-comment">-- align to next N-byte boundary (N must be a power of 2).</span><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
         One-shot information
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-208"></a><span>
</span><a name="line-209"></a><span class="hs-comment">-- | If the 'Id' is a lambda-bound variable then it may have lambda-bound</span><span>
</span><a name="line-210"></a><span class="hs-comment">-- variable info. Sometimes we know whether the lambda binding this variable</span><span>
</span><a name="line-211"></a><span class="hs-comment">-- is a \&quot;one-shot\&quot; lambda; that is, whether it is applied at most once.</span><span>
</span><a name="line-212"></a><span class="hs-comment">--</span><span>
</span><a name="line-213"></a><span class="hs-comment">-- This information may be useful in optimisation, as computations may</span><span>
</span><a name="line-214"></a><span class="hs-comment">-- safely be floated inside such a lambda without risk of duplicating</span><span>
</span><a name="line-215"></a><span class="hs-comment">-- work.</span><span>
</span><a name="line-216"></a><span class="hs-keyword">data</span><span> </span><a name="OneShotInfo"><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier">OneShotInfo</span></a></a><span>
</span><a name="line-217"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="NoOneShotInfo"><a href="BasicTypes.html#NoOneShotInfo"><span class="hs-identifier">NoOneShotInfo</span></a></a><span> </span><span class="hs-comment">-- ^ No information</span><span>
</span><a name="line-218"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="OneShotLam"><a href="BasicTypes.html#OneShotLam"><span class="hs-identifier">OneShotLam</span></a></a><span>    </span><span class="hs-comment">-- ^ The lambda is applied at most once.</span><span>
</span><a name="line-219"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span class="hs-comment">-- | It is always safe to assume that an 'Id' has no lambda-bound variable information</span><span>
</span><a name="line-222"></a><span class="hs-identifier">noOneShotInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a><span>
</span><a name="line-223"></a><a name="noOneShotInfo"><a href="BasicTypes.html#noOneShotInfo"><span class="hs-identifier">noOneShotInfo</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a><span>
</span><a name="line-224"></a><span>
</span><a name="line-225"></a><span class="hs-identifier">isOneShotInfo</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">hasNoOneShotInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-226"></a><a name="isOneShotInfo"><a href="BasicTypes.html#isOneShotInfo"><span class="hs-identifier">isOneShotInfo</span></a></a><span> </span><a href="BasicTypes.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-227"></a><span class="hs-identifier">isOneShotInfo</span><span> </span><span class="hs-identifier">_</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-228"></a><span>
</span><a name="line-229"></a><a name="hasNoOneShotInfo"><a href="BasicTypes.html#hasNoOneShotInfo"><span class="hs-identifier">hasNoOneShotInfo</span></a></a><span> </span><a href="BasicTypes.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-230"></a><span class="hs-identifier">hasNoOneShotInfo</span><span> </span><span class="hs-identifier">_</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-231"></a><span>
</span><a name="line-232"></a><span class="hs-identifier">worstOneShot</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">bestOneShot</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a><span>
</span><a name="line-233"></a><a name="worstOneShot"><a href="BasicTypes.html#worstOneShot"><span class="hs-identifier">worstOneShot</span></a></a><span> </span><a href="BasicTypes.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a><span> </span><span class="hs-identifier">_</span><span>             </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a><span>
</span><a name="line-234"></a><span class="hs-identifier">worstOneShot</span><span> </span><a href="BasicTypes.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a><span>    </span><a name="local-6989586621680214703"><a href="#local-6989586621680214703"><span class="hs-identifier">os</span></a></a><span>            </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214703"><span class="hs-identifier hs-var">os</span></a><span>
</span><a name="line-235"></a><span>
</span><a name="line-236"></a><a name="bestOneShot"><a href="BasicTypes.html#bestOneShot"><span class="hs-identifier">bestOneShot</span></a></a><span> </span><a href="BasicTypes.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a><span> </span><a name="local-6989586621680214704"><a href="#local-6989586621680214704"><span class="hs-identifier">os</span></a></a><span>         </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214704"><span class="hs-identifier hs-var">os</span></a><span>
</span><a name="line-237"></a><span class="hs-identifier">bestOneShot</span><span> </span><a href="BasicTypes.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a><span>    </span><span class="hs-identifier">_</span><span>          </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a><span>
</span><a name="line-238"></a><span>
</span><a name="line-239"></a><span class="hs-identifier">pprOneShotInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-240"></a><a name="pprOneShotInfo"><a href="BasicTypes.html#pprOneShotInfo"><span class="hs-identifier">pprOneShotInfo</span></a></a><span> </span><a href="BasicTypes.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-241"></a><span class="hs-identifier">pprOneShotInfo</span><span> </span><a href="BasicTypes.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;OneShot&quot;</span><span>
</span><a name="line-242"></a><span>
</span><a name="line-243"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-244"></a><span>    </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#pprOneShotInfo"><span class="hs-identifier hs-var">pprOneShotInfo</span></a><span>
</span><a name="line-245"></a><span>
</span><a name="line-246"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
           Swap flag
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-253"></a><span>
</span><a name="line-254"></a><span class="hs-keyword">data</span><span> </span><a name="SwapFlag"><a href="BasicTypes.html#SwapFlag"><span class="hs-identifier">SwapFlag</span></a></a><span>
</span><a name="line-255"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="NotSwapped"><a href="BasicTypes.html#NotSwapped"><span class="hs-identifier">NotSwapped</span></a></a><span>  </span><span class="hs-comment">-- Args are: actual,   expected</span><span>
</span><a name="line-256"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="IsSwapped"><a href="BasicTypes.html#IsSwapped"><span class="hs-identifier">IsSwapped</span></a></a><span>   </span><span class="hs-comment">-- Args are: expected, actual</span><span>
</span><a name="line-257"></a><span>
</span><a name="line-258"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#SwapFlag"><span class="hs-identifier hs-type">SwapFlag</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-259"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#IsSwapped"><span class="hs-identifier hs-var">IsSwapped</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Is-swapped&quot;</span><span>
</span><a name="line-260"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#NotSwapped"><span class="hs-identifier hs-var">NotSwapped</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Not-swapped&quot;</span><span>
</span><a name="line-261"></a><span>
</span><a name="line-262"></a><span class="hs-identifier">flipSwap</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SwapFlag"><span class="hs-identifier hs-type">SwapFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#SwapFlag"><span class="hs-identifier hs-type">SwapFlag</span></a><span>
</span><a name="line-263"></a><a name="flipSwap"><a href="BasicTypes.html#flipSwap"><span class="hs-identifier">flipSwap</span></a></a><span> </span><a href="BasicTypes.html#IsSwapped"><span class="hs-identifier hs-var">IsSwapped</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NotSwapped"><span class="hs-identifier hs-var">NotSwapped</span></a><span>
</span><a name="line-264"></a><span class="hs-identifier">flipSwap</span><span> </span><a href="BasicTypes.html#NotSwapped"><span class="hs-identifier hs-var">NotSwapped</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#IsSwapped"><span class="hs-identifier hs-var">IsSwapped</span></a><span>
</span><a name="line-265"></a><span>
</span><a name="line-266"></a><span class="hs-identifier">isSwapped</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SwapFlag"><span class="hs-identifier hs-type">SwapFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-267"></a><a name="isSwapped"><a href="BasicTypes.html#isSwapped"><span class="hs-identifier">isSwapped</span></a></a><span> </span><a href="BasicTypes.html#IsSwapped"><span class="hs-identifier hs-var">IsSwapped</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-268"></a><span class="hs-identifier">isSwapped</span><span> </span><a href="BasicTypes.html#NotSwapped"><span class="hs-identifier hs-var">NotSwapped</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-269"></a><span>
</span><a name="line-270"></a><span class="hs-identifier">unSwap</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SwapFlag"><span class="hs-identifier hs-type">SwapFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680214698"><span class="hs-identifier hs-type">a</span></a><span class="hs-glyph">-&gt;</span><a href="#local-6989586621680214698"><span class="hs-identifier hs-type">a</span></a><span class="hs-glyph">-&gt;</span><a href="#local-6989586621680214699"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214698"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214698"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214699"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-271"></a><a name="unSwap"><a href="BasicTypes.html#unSwap"><span class="hs-identifier">unSwap</span></a></a><span> </span><a href="BasicTypes.html#NotSwapped"><span class="hs-identifier hs-var">NotSwapped</span></a><span> </span><a name="local-6989586621680214705"><a href="#local-6989586621680214705"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621680214706"><a href="#local-6989586621680214706"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621680214707"><a href="#local-6989586621680214707"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214705"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621680214706"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621680214707"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-272"></a><span class="hs-identifier">unSwap</span><span> </span><a href="BasicTypes.html#IsSwapped"><span class="hs-identifier hs-var">IsSwapped</span></a><span>  </span><a name="local-6989586621680214708"><a href="#local-6989586621680214708"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621680214709"><a href="#local-6989586621680214709"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621680214710"><a href="#local-6989586621680214710"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214708"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621680214710"><span class="hs-identifier hs-var">b</span></a><span> </span><a href="#local-6989586621680214709"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-273"></a><span>
</span><a name="line-274"></a><span>
</span><a name="line-275"></a><span class="hs-comment">{- *********************************************************************
*                                                                      *
           Promotion flag
*                                                                      *
********************************************************************* -}</span><span>
</span><a name="line-280"></a><span>
</span><a name="line-281"></a><span class="hs-comment">-- | Is a TyCon a promoted data constructor or just a normal type constructor?</span><span>
</span><a name="line-282"></a><span class="hs-keyword">data</span><span> </span><a name="PromotionFlag"><a href="BasicTypes.html#PromotionFlag"><span class="hs-identifier">PromotionFlag</span></a></a><span>
</span><a name="line-283"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="NotPromoted"><a href="BasicTypes.html#NotPromoted"><span class="hs-identifier">NotPromoted</span></a></a><span>
</span><a name="line-284"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="IsPromoted"><a href="BasicTypes.html#IsPromoted"><span class="hs-identifier">IsPromoted</span></a></a><span>
</span><a name="line-285"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-286"></a><span>
</span><a name="line-287"></a><span class="hs-identifier">isPromoted</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-288"></a><a name="isPromoted"><a href="BasicTypes.html#isPromoted"><span class="hs-identifier">isPromoted</span></a></a><span> </span><a href="BasicTypes.html#IsPromoted"><span class="hs-identifier hs-var">IsPromoted</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-289"></a><span class="hs-identifier">isPromoted</span><span> </span><a href="BasicTypes.html#NotPromoted"><span class="hs-identifier hs-var">NotPromoted</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-290"></a><span>
</span><a name="line-291"></a><span>
</span><a name="line-292"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[FunctionOrData]{FunctionOrData}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-299"></a><span>
</span><a name="line-300"></a><span class="hs-keyword">data</span><span> </span><a name="FunctionOrData"><a href="BasicTypes.html#FunctionOrData"><span class="hs-identifier">FunctionOrData</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="IsFunction"><a href="BasicTypes.html#IsFunction"><span class="hs-identifier">IsFunction</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="IsData"><a href="BasicTypes.html#IsData"><span class="hs-identifier">IsData</span></a></a><span>
</span><a name="line-301"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span class="hs-special">)</span><span>
</span><a name="line-302"></a><span>
</span><a name="line-303"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#FunctionOrData"><span class="hs-identifier hs-type">FunctionOrData</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-304"></a><span>    </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#IsFunction"><span class="hs-identifier hs-var">IsFunction</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;(function)&quot;</span><span>
</span><a name="line-305"></a><span>    </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#IsData"><span class="hs-identifier hs-var">IsData</span></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;(data)&quot;</span><span>
</span><a name="line-306"></a><span>
</span><a name="line-307"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[Version]{Module and identifier version numbers}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-314"></a><span>
</span><a name="line-315"></a><span class="hs-keyword">type</span><span> </span><a name="Version"><a href="BasicTypes.html#Version"><span class="hs-identifier">Version</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-316"></a><span>
</span><a name="line-317"></a><span class="hs-identifier">bumpVersion</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Version"><span class="hs-identifier hs-type">Version</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Version"><span class="hs-identifier hs-type">Version</span></a><span>
</span><a name="line-318"></a><a name="bumpVersion"><a href="BasicTypes.html#bumpVersion"><span class="hs-identifier">bumpVersion</span></a></a><span> </span><a name="local-6989586621680214711"><a href="#local-6989586621680214711"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214711"><span class="hs-identifier hs-var">v</span></a><span class="hs-operator hs-var">+</span><span class="hs-number">1</span><span>
</span><a name="line-319"></a><span>
</span><a name="line-320"></a><span class="hs-identifier">initialVersion</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Version"><span class="hs-identifier hs-type">Version</span></a><span>
</span><a name="line-321"></a><a name="initialVersion"><a href="BasicTypes.html#initialVersion"><span class="hs-identifier">initialVersion</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">1</span><span>
</span><a name="line-322"></a><span>
</span><a name="line-323"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Deprecations
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-330"></a><span>
</span><a name="line-331"></a><span class="hs-comment">-- | A String Literal in the source, including its original raw format for use by</span><span>
</span><a name="line-332"></a><span class="hs-comment">-- source to source manipulation tools.</span><span>
</span><a name="line-333"></a><span class="hs-keyword">data</span><span> </span><a name="StringLiteral"><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier">StringLiteral</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="StringLiteral"><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier">StringLiteral</span></a></a><span>
</span><a name="line-334"></a><span>                       </span><span class="hs-special">{</span><span> </span><a name="sl_st"><a href="BasicTypes.html#sl_st"><span class="hs-identifier">sl_st</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span class="hs-special">,</span><span> </span><span class="hs-comment">-- literal raw source.</span><span>
</span><a name="line-335"></a><span>                                              </span><span class="hs-comment">-- See not [Literal source text]</span><span>
</span><a name="line-336"></a><span>                         </span><a name="sl_fs"><a href="BasicTypes.html#sl_fs"><span class="hs-identifier">sl_fs</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a><span>  </span><span class="hs-comment">-- literal string value</span><span>
</span><a name="line-337"></a><span>                       </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Data</span><span>
</span><a name="line-338"></a><span>
</span><a name="line-339"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-340"></a><span>  </span><span class="hs-special">(</span><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier hs-var">StringLiteral</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214693"><a href="#local-6989586621680214693"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier hs-var">StringLiteral</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214694"><a href="#local-6989586621680214694"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214693"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="#local-6989586621680214694"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-341"></a><span>
</span><a name="line-342"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-343"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a name="local-6989586621680214692"><a href="#local-6989586621680214692"><span class="hs-identifier">sl</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#pprWithSourceText"><span class="hs-identifier hs-var">pprWithSourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">sl_st</span><span> </span><a href="#local-6989586621680214692"><span class="hs-identifier hs-var">sl</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ftext"><span class="hs-identifier hs-var">ftext</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">sl_fs</span><span> </span><a href="#local-6989586621680214692"><span class="hs-identifier hs-var">sl</span></a><span class="hs-special">)</span><span>
</span><a name="line-344"></a><span>
</span><a name="line-345"></a><span class="hs-comment">-- | Warning Text</span><span>
</span><a name="line-346"></a><span class="hs-comment">--</span><span>
</span><a name="line-347"></a><span class="hs-comment">-- reason/explanation from a WARNING or DEPRECATED pragma</span><span>
</span><a name="line-348"></a><span class="hs-keyword">data</span><span> </span><a name="WarningTxt"><a href="BasicTypes.html#WarningTxt"><span class="hs-identifier">WarningTxt</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="WarningTxt"><a href="BasicTypes.html#WarningTxt"><span class="hs-identifier">WarningTxt</span></a></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span class="hs-special">)</span><span>
</span><a name="line-349"></a><span>                             </span><span class="hs-special">[</span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a><span class="hs-special">]</span><span>
</span><a name="line-350"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a name="DeprecatedTxt"><a href="BasicTypes.html#DeprecatedTxt"><span class="hs-identifier">DeprecatedTxt</span></a></a><span> </span><span class="hs-special">(</span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span class="hs-special">)</span><span>
</span><a name="line-351"></a><span>                                </span><span class="hs-special">[</span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a><span class="hs-special">]</span><span>
</span><a name="line-352"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span class="hs-special">)</span><span>
</span><a name="line-353"></a><span>
</span><a name="line-354"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-355"></a><span>    </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#WarningTxt"><span class="hs-identifier hs-var">WarningTxt</span></a><span>    </span><a name="local-6989586621680214686"><a href="#local-6989586621680214686"><span class="hs-identifier">lsrc</span></a></a><span> </span><a name="local-6989586621680214687"><a href="#local-6989586621680214687"><span class="hs-identifier">ws</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-356"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680214686"><span class="hs-identifier hs-var">lsrc</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-357"></a><span>          </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#pp_ws"><span class="hs-identifier hs-var">pp_ws</span></a><span> </span><a href="#local-6989586621680214687"><span class="hs-identifier hs-var">ws</span></a><span>
</span><a name="line-358"></a><span>          </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><a name="local-6989586621680214688"><a href="#local-6989586621680214688"><span class="hs-identifier">src</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><a href="#local-6989586621680214688"><span class="hs-identifier hs-var">src</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="BasicTypes.html#pp_ws"><span class="hs-identifier hs-var">pp_ws</span></a><span> </span><a href="#local-6989586621680214687"><span class="hs-identifier hs-var">ws</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;#-}&quot;</span><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span>    </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#DeprecatedTxt"><span class="hs-identifier hs-var">DeprecatedTxt</span></a><span> </span><a name="local-6989586621680214689"><a href="#local-6989586621680214689"><span class="hs-identifier">lsrc</span></a></a><span>  </span><a name="local-6989586621680214690"><a href="#local-6989586621680214690"><span class="hs-identifier">ds</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-361"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680214689"><span class="hs-identifier hs-var">lsrc</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-362"></a><span>          </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#pp_ws"><span class="hs-identifier hs-var">pp_ws</span></a><span> </span><a href="#local-6989586621680214690"><span class="hs-identifier hs-var">ds</span></a><span>
</span><a name="line-363"></a><span>          </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><a name="local-6989586621680214691"><a href="#local-6989586621680214691"><span class="hs-identifier">src</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><a href="#local-6989586621680214691"><span class="hs-identifier hs-var">src</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="BasicTypes.html#pp_ws"><span class="hs-identifier hs-var">pp_ws</span></a><span> </span><a href="#local-6989586621680214690"><span class="hs-identifier hs-var">ds</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;#-}&quot;</span><span>
</span><a name="line-364"></a><span>
</span><a name="line-365"></a><span class="hs-identifier">pp_ws</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a><span> </span><a href="BasicTypes.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-366"></a><a name="pp_ws"><a href="BasicTypes.html#pp_ws"><span class="hs-identifier">pp_ws</span></a></a><span> </span><span class="hs-special">[</span><a name="local-6989586621680214712"><a href="#local-6989586621680214712"><span class="hs-identifier">l</span></a></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span> </span><a href="#local-6989586621680214712"><span class="hs-identifier hs-var">l</span></a><span>
</span><a name="line-367"></a><span class="hs-identifier">pp_ws</span><span> </span><a name="local-6989586621680214713"><a href="#local-6989586621680214713"><span class="hs-identifier">ws</span></a></a><span>
</span><a name="line-368"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;[&quot;</span><span>
</span><a name="line-369"></a><span>    </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#punctuate"><span class="hs-identifier hs-var">punctuate</span></a><span> </span><a href="Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680214713"><span class="hs-identifier hs-var">ws</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-370"></a><span>    </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;]&quot;</span><span>
</span><a name="line-371"></a><span>
</span><a name="line-372"></a><span>
</span><a name="line-373"></a><span class="hs-identifier">pprWarningTxtForMsg</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-374"></a><a name="pprWarningTxtForMsg"><a href="BasicTypes.html#pprWarningTxtForMsg"><span class="hs-identifier">pprWarningTxtForMsg</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#WarningTxt"><span class="hs-identifier hs-var">WarningTxt</span></a><span>    </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214714"><a href="#local-6989586621680214714"><span class="hs-identifier">ws</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-375"></a><span>                     </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#doubleQuotes"><span class="hs-identifier hs-var">doubleQuotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ftext"><span class="hs-identifier hs-var">ftext</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">sl_fs</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680214714"><span class="hs-identifier hs-var">ws</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-376"></a><span class="hs-identifier">pprWarningTxtForMsg</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#DeprecatedTxt"><span class="hs-identifier hs-var">DeprecatedTxt</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214715"><a href="#local-6989586621680214715"><span class="hs-identifier">ds</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-377"></a><span>                     </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Deprecated:&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span>
</span><a name="line-378"></a><span>                       </span><a href="Outputable.html#doubleQuotes"><span class="hs-identifier hs-var">doubleQuotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ftext"><span class="hs-identifier hs-var">ftext</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">sl_fs</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680214715"><span class="hs-identifier hs-var">ds</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-379"></a><span>
</span><a name="line-380"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Rules
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-387"></a><span>
</span><a name="line-388"></a><span class="hs-keyword">type</span><span> </span><a name="RuleName"><a href="BasicTypes.html#RuleName"><span class="hs-identifier">RuleName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a><span>
</span><a name="line-389"></a><span>
</span><a name="line-390"></a><span class="hs-identifier">pprRuleName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#RuleName"><span class="hs-identifier hs-type">RuleName</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-391"></a><a name="pprRuleName"><a href="BasicTypes.html#pprRuleName"><span class="hs-identifier">pprRuleName</span></a></a><span> </span><a name="local-6989586621680214716"><a href="#local-6989586621680214716"><span class="hs-identifier">rn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#doubleQuotes"><span class="hs-identifier hs-var">doubleQuotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ftext"><span class="hs-identifier hs-var">ftext</span></a><span> </span><a href="#local-6989586621680214716"><span class="hs-identifier hs-var">rn</span></a><span class="hs-special">)</span><span>
</span><a name="line-392"></a><span>
</span><a name="line-393"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[Fixity]{Fixity info}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-400"></a><span>
</span><a name="line-401"></a><span class="hs-comment">------------------------</span><span>
</span><a name="line-402"></a><span class="hs-keyword">data</span><span> </span><a name="Fixity"><a href="BasicTypes.html#Fixity"><span class="hs-identifier">Fixity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Fixity"><a href="BasicTypes.html#Fixity"><span class="hs-identifier">Fixity</span></a></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><a href="BasicTypes.html#FixityDirection"><span class="hs-identifier hs-type">FixityDirection</span></a><span>
</span><a name="line-403"></a><span>  </span><span class="hs-comment">-- Note [Pragma source text]</span><span>
</span><a name="line-404"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Data</span><span>
</span><a name="line-405"></a><span>
</span><a name="line-406"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-407"></a><span>    </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214684"><a href="#local-6989586621680214684"><span class="hs-identifier">prec</span></a></a><span> </span><a name="local-6989586621680214685"><a href="#local-6989586621680214685"><span class="hs-identifier">dir</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#hcat"><span class="hs-identifier hs-var">hcat</span></a><span> </span><span class="hs-special">[</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680214685"><span class="hs-identifier hs-var">dir</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#space"><span class="hs-identifier hs-var">space</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680214684"><span class="hs-identifier hs-var">prec</span></a><span class="hs-special">]</span><span>
</span><a name="line-408"></a><span>
</span><a name="line-409"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a><span> </span><span class="hs-keyword">where</span><span> </span><span class="hs-comment">-- Used to determine if two fixities conflict</span><span>
</span><a name="line-410"></a><span>  </span><span class="hs-special">(</span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214680"><a href="#local-6989586621680214680"><span class="hs-identifier">p1</span></a></a><span> </span><a name="local-6989586621680214681"><a href="#local-6989586621680214681"><span class="hs-identifier">dir1</span></a></a><span class="hs-special">)</span><span> </span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214682"><a href="#local-6989586621680214682"><span class="hs-identifier">p2</span></a></a><span> </span><a name="local-6989586621680214683"><a href="#local-6989586621680214683"><span class="hs-identifier">dir2</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214680"><span class="hs-identifier hs-var">p1</span></a><span class="hs-operator hs-var">==</span><a href="#local-6989586621680214682"><span class="hs-identifier hs-var">p2</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><a href="#local-6989586621680214681"><span class="hs-identifier hs-var">dir1</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="#local-6989586621680214683"><span class="hs-identifier hs-var">dir2</span></a><span>
</span><a name="line-411"></a><span>
</span><a name="line-412"></a><span class="hs-comment">------------------------</span><span>
</span><a name="line-413"></a><span class="hs-keyword">data</span><span> </span><a name="FixityDirection"><a href="BasicTypes.html#FixityDirection"><span class="hs-identifier">FixityDirection</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="InfixL"><a href="BasicTypes.html#InfixL"><span class="hs-identifier">InfixL</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="InfixR"><a href="BasicTypes.html#InfixR"><span class="hs-identifier">InfixR</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="InfixN"><a href="BasicTypes.html#InfixN"><span class="hs-identifier">InfixN</span></a></a><span>
</span><a name="line-414"></a><span>                     </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span class="hs-special">)</span><span>
</span><a name="line-415"></a><span>
</span><a name="line-416"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#FixityDirection"><span class="hs-identifier hs-type">FixityDirection</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-417"></a><span>    </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;infixl&quot;</span><span>
</span><a name="line-418"></a><span>    </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#InfixR"><span class="hs-identifier hs-var">InfixR</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;infixr&quot;</span><span>
</span><a name="line-419"></a><span>    </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#InfixN"><span class="hs-identifier hs-var">InfixN</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;infix&quot;</span><span>
</span><a name="line-420"></a><span>
</span><a name="line-421"></a><span class="hs-comment">------------------------</span><span>
</span><a name="line-422"></a><span class="hs-identifier">maxPrecedence</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">minPrecedence</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-423"></a><a name="maxPrecedence"><a href="BasicTypes.html#maxPrecedence"><span class="hs-identifier">maxPrecedence</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">9</span><span>
</span><a name="line-424"></a><a name="minPrecedence"><a href="BasicTypes.html#minPrecedence"><span class="hs-identifier">minPrecedence</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-425"></a><span>
</span><a name="line-426"></a><span class="hs-identifier">defaultFixity</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a><span>
</span><a name="line-427"></a><a name="defaultFixity"><a href="BasicTypes.html#defaultFixity"><span class="hs-identifier">defaultFixity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span> </span><a href="BasicTypes.html#maxPrecedence"><span class="hs-identifier hs-var">maxPrecedence</span></a><span> </span><a href="BasicTypes.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a><span>
</span><a name="line-428"></a><span>
</span><a name="line-429"></a><span class="hs-identifier">negateFixity</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">funTyFixity</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a><span>
</span><a name="line-430"></a><span class="hs-comment">-- Wired-in fixities</span><span>
</span><a name="line-431"></a><a name="negateFixity"><a href="BasicTypes.html#negateFixity"><span class="hs-identifier">negateFixity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span> </span><span class="hs-number">6</span><span> </span><a href="BasicTypes.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a><span>  </span><span class="hs-comment">-- Fixity of unary negate</span><span>
</span><a name="line-432"></a><a name="funTyFixity"><a href="BasicTypes.html#funTyFixity"><span class="hs-identifier">funTyFixity</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-number">1</span><span class="hs-special">)</span><span> </span><a href="BasicTypes.html#InfixR"><span class="hs-identifier hs-var">InfixR</span></a><span>  </span><span class="hs-comment">-- Fixity of '-&gt;', see #15235</span><span>
</span><a name="line-433"></a><span>
</span><a name="line-434"></a><span class="hs-comment">{-
Consider

\begin{verbatim}
        a `op1` b `op2` c
\end{verbatim}
@(compareFixity op1 op2)@ tells which way to arrange application, or
whether there's an error.
-}</span><span>
</span><a name="line-443"></a><span>
</span><a name="line-444"></a><span class="hs-identifier">compareFixity</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a><span>
</span><a name="line-445"></a><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- Error please</span><span>
</span><a name="line-446"></a><span>                  </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span>         </span><span class="hs-comment">-- Associate to the right: a op1 (b op2 c)</span><span>
</span><a name="line-447"></a><a name="compareFixity"><a href="BasicTypes.html#compareFixity"><span class="hs-identifier">compareFixity</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214717"><a href="#local-6989586621680214717"><span class="hs-identifier">prec1</span></a></a><span> </span><a name="local-6989586621680214718"><a href="#local-6989586621680214718"><span class="hs-identifier">dir1</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214719"><a href="#local-6989586621680214719"><span class="hs-identifier">prec2</span></a></a><span> </span><a name="local-6989586621680214720"><a href="#local-6989586621680214720"><span class="hs-identifier">dir2</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-448"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680214717"><span class="hs-identifier hs-var">prec1</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">compare</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621680214719"><span class="hs-identifier hs-var">prec2</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-449"></a><span>        </span><span class="hs-identifier hs-var">GT</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214722"><span class="hs-identifier hs-var">left</span></a><span>
</span><a name="line-450"></a><span>        </span><span class="hs-identifier hs-var">LT</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214721"><span class="hs-identifier hs-var">right</span></a><span>
</span><a name="line-451"></a><span>        </span><span class="hs-identifier hs-var">EQ</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680214718"><span class="hs-identifier hs-var">dir1</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621680214720"><span class="hs-identifier hs-var">dir2</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-452"></a><span>                        </span><span class="hs-special">(</span><a href="BasicTypes.html#InfixR"><span class="hs-identifier hs-var">InfixR</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#InfixR"><span class="hs-identifier hs-var">InfixR</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214721"><span class="hs-identifier hs-var">right</span></a><span>
</span><a name="line-453"></a><span>                        </span><span class="hs-special">(</span><a href="BasicTypes.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214722"><span class="hs-identifier hs-var">left</span></a><span>
</span><a name="line-454"></a><span>                        </span><span class="hs-identifier">_</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214723"><span class="hs-identifier hs-var">error_please</span></a><span>
</span><a name="line-455"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-456"></a><span>    </span><a name="local-6989586621680214721"><a href="#local-6989586621680214721"><span class="hs-identifier">right</span></a></a><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">False</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">)</span><span>
</span><a name="line-457"></a><span>    </span><a name="local-6989586621680214722"><a href="#local-6989586621680214722"><span class="hs-identifier">left</span></a></a><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">False</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span>
</span><a name="line-458"></a><span>    </span><a name="local-6989586621680214723"><a href="#local-6989586621680214723"><span class="hs-identifier">error_please</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">True</span><span class="hs-special">,</span><span>  </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span>
</span><a name="line-459"></a><span>
</span><a name="line-460"></a><span class="hs-comment">-- |Captures the fixity of declarations as they are parsed. This is not</span><span>
</span><a name="line-461"></a><span class="hs-comment">-- necessarily the same as the fixity declaration, as the normal fixity may be</span><span>
</span><a name="line-462"></a><span class="hs-comment">-- overridden using parens or backticks.</span><span>
</span><a name="line-463"></a><span class="hs-keyword">data</span><span> </span><a name="LexicalFixity"><a href="BasicTypes.html#LexicalFixity"><span class="hs-identifier">LexicalFixity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Prefix"><a href="BasicTypes.html#Prefix"><span class="hs-identifier">Prefix</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="Infix"><a href="BasicTypes.html#Infix"><span class="hs-identifier">Infix</span></a></a><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">)</span><span>
</span><a name="line-464"></a><span>
</span><a name="line-465"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#LexicalFixity"><span class="hs-identifier hs-type">LexicalFixity</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-466"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#Prefix"><span class="hs-identifier hs-var">Prefix</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Prefix&quot;</span><span>
</span><a name="line-467"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#Infix"><span class="hs-identifier hs-var">Infix</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Infix&quot;</span><span>
</span><a name="line-468"></a><span>
</span><a name="line-469"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[Top-level/local]{Top-level/not-top level flag}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-476"></a><span>
</span><a name="line-477"></a><span class="hs-keyword">data</span><span> </span><a name="TopLevelFlag"><a href="BasicTypes.html#TopLevelFlag"><span class="hs-identifier">TopLevelFlag</span></a></a><span>
</span><a name="line-478"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="TopLevel"><a href="BasicTypes.html#TopLevel"><span class="hs-identifier">TopLevel</span></a></a><span>
</span><a name="line-479"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="NotTopLevel"><a href="BasicTypes.html#NotTopLevel"><span class="hs-identifier">NotTopLevel</span></a></a><span>
</span><a name="line-480"></a><span>
</span><a name="line-481"></a><span class="hs-identifier">isTopLevel</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">isNotTopLevel</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-482"></a><span>
</span><a name="line-483"></a><a name="isNotTopLevel"><a href="BasicTypes.html#isNotTopLevel"><span class="hs-identifier">isNotTopLevel</span></a></a><span> </span><a href="BasicTypes.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-484"></a><span class="hs-identifier">isNotTopLevel</span><span> </span><a href="BasicTypes.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-485"></a><span>
</span><a name="line-486"></a><a name="isTopLevel"><a href="BasicTypes.html#isTopLevel"><span class="hs-identifier">isTopLevel</span></a></a><span> </span><a href="BasicTypes.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-487"></a><span class="hs-identifier">isTopLevel</span><span> </span><a href="BasicTypes.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-488"></a><span>
</span><a name="line-489"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-490"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;&lt;TopLevel&gt;&quot;</span><span>
</span><a name="line-491"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;&lt;NotTopLevel&gt;&quot;</span><span>
</span><a name="line-492"></a><span>
</span><a name="line-493"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Boxity flag
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-500"></a><span>
</span><a name="line-501"></a><span class="hs-keyword">data</span><span> </span><a name="Boxity"><a href="BasicTypes.html#Boxity"><span class="hs-identifier">Boxity</span></a></a><span>
</span><a name="line-502"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="Boxed"><a href="BasicTypes.html#Boxed"><span class="hs-identifier">Boxed</span></a></a><span>
</span><a name="line-503"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Unboxed"><a href="BasicTypes.html#Unboxed"><span class="hs-identifier">Unboxed</span></a></a><span>
</span><a name="line-504"></a><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-505"></a><span>
</span><a name="line-506"></a><span class="hs-identifier">isBoxed</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-507"></a><a name="isBoxed"><a href="BasicTypes.html#isBoxed"><span class="hs-identifier">isBoxed</span></a></a><span> </span><a href="BasicTypes.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-508"></a><span class="hs-identifier">isBoxed</span><span> </span><a href="BasicTypes.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-509"></a><span>
</span><a name="line-510"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-511"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Boxed&quot;</span><span>
</span><a name="line-512"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Unboxed&quot;</span><span>
</span><a name="line-513"></a><span>
</span><a name="line-514"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Recursive/Non-Recursive flag
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-521"></a><span>
</span><a name="line-522"></a><span class="hs-comment">-- | Recursivity Flag</span><span>
</span><a name="line-523"></a><span class="hs-keyword">data</span><span> </span><a name="RecFlag"><a href="BasicTypes.html#RecFlag"><span class="hs-identifier">RecFlag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Recursive"><a href="BasicTypes.html#Recursive"><span class="hs-identifier">Recursive</span></a></a><span>
</span><a name="line-524"></a><span>             </span><span class="hs-glyph">|</span><span> </span><a name="NonRecursive"><a href="BasicTypes.html#NonRecursive"><span class="hs-identifier">NonRecursive</span></a></a><span>
</span><a name="line-525"></a><span>             </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-526"></a><span>
</span><a name="line-527"></a><span class="hs-identifier">isRec</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#RecFlag"><span class="hs-identifier hs-type">RecFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-528"></a><a name="isRec"><a href="BasicTypes.html#isRec"><span class="hs-identifier">isRec</span></a></a><span> </span><a href="BasicTypes.html#Recursive"><span class="hs-identifier hs-var">Recursive</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-529"></a><span class="hs-identifier">isRec</span><span> </span><a href="BasicTypes.html#NonRecursive"><span class="hs-identifier hs-var">NonRecursive</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-530"></a><span>
</span><a name="line-531"></a><span class="hs-identifier">isNonRec</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#RecFlag"><span class="hs-identifier hs-type">RecFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-532"></a><a name="isNonRec"><a href="BasicTypes.html#isNonRec"><span class="hs-identifier">isNonRec</span></a></a><span> </span><a href="BasicTypes.html#Recursive"><span class="hs-identifier hs-var">Recursive</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-533"></a><span class="hs-identifier">isNonRec</span><span> </span><a href="BasicTypes.html#NonRecursive"><span class="hs-identifier hs-var">NonRecursive</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-534"></a><span>
</span><a name="line-535"></a><span class="hs-identifier">boolToRecFlag</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#RecFlag"><span class="hs-identifier hs-type">RecFlag</span></a><span>
</span><a name="line-536"></a><a name="boolToRecFlag"><a href="BasicTypes.html#boolToRecFlag"><span class="hs-identifier">boolToRecFlag</span></a></a><span> </span><span class="hs-identifier hs-var">True</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Recursive"><span class="hs-identifier hs-var">Recursive</span></a><span>
</span><a name="line-537"></a><span class="hs-identifier">boolToRecFlag</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NonRecursive"><span class="hs-identifier hs-var">NonRecursive</span></a><span>
</span><a name="line-538"></a><span>
</span><a name="line-539"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#RecFlag"><span class="hs-identifier hs-type">RecFlag</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-540"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#Recursive"><span class="hs-identifier hs-var">Recursive</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Recursive&quot;</span><span>
</span><a name="line-541"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#NonRecursive"><span class="hs-identifier hs-var">NonRecursive</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;NonRecursive&quot;</span><span>
</span><a name="line-542"></a><span>
</span><a name="line-543"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Code origin
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-550"></a><span>
</span><a name="line-551"></a><span class="hs-keyword">data</span><span> </span><a name="Origin"><a href="BasicTypes.html#Origin"><span class="hs-identifier">Origin</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="FromSource"><a href="BasicTypes.html#FromSource"><span class="hs-identifier">FromSource</span></a></a><span>
</span><a name="line-552"></a><span>            </span><span class="hs-glyph">|</span><span> </span><a name="Generated"><a href="BasicTypes.html#Generated"><span class="hs-identifier">Generated</span></a></a><span>
</span><a name="line-553"></a><span>            </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-554"></a><span>
</span><a name="line-555"></a><span class="hs-identifier">isGenerated</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Origin"><span class="hs-identifier hs-type">Origin</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-556"></a><a name="isGenerated"><a href="BasicTypes.html#isGenerated"><span class="hs-identifier">isGenerated</span></a></a><span> </span><a href="BasicTypes.html#Generated"><span class="hs-identifier hs-var">Generated</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-557"></a><span class="hs-identifier">isGenerated</span><span> </span><a href="BasicTypes.html#FromSource"><span class="hs-identifier hs-var">FromSource</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-558"></a><span>
</span><a name="line-559"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#Origin"><span class="hs-identifier hs-type">Origin</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-560"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#FromSource"><span class="hs-identifier hs-var">FromSource</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;FromSource&quot;</span><span>
</span><a name="line-561"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#Generated"><span class="hs-identifier hs-var">Generated</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Generated&quot;</span><span>
</span><a name="line-562"></a><span>
</span><a name="line-563"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Instance overlap flag
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-570"></a><span>
</span><a name="line-571"></a><span class="hs-comment">-- | The semantics allowed for overlapping instances for a particular</span><span>
</span><a name="line-572"></a><span class="hs-comment">-- instance. See Note [Safe Haskell isSafeOverlap] (in `InstEnv.hs`) for a</span><span>
</span><a name="line-573"></a><span class="hs-comment">-- explanation of the `isSafeOverlap` field.</span><span>
</span><a name="line-574"></a><span class="hs-comment">--</span><span>
</span><a name="line-575"></a><span class="hs-comment">-- - 'ApiAnnotation.AnnKeywordId' :</span><span>
</span><a name="line-576"></a><span class="hs-comment">--      'ApiAnnotation.AnnOpen' @'\{-\# OVERLAPPABLE'@ or</span><span>
</span><a name="line-577"></a><span class="hs-comment">--                              @'\{-\# OVERLAPPING'@ or</span><span>
</span><a name="line-578"></a><span class="hs-comment">--                              @'\{-\# OVERLAPS'@ or</span><span>
</span><a name="line-579"></a><span class="hs-comment">--                              @'\{-\# INCOHERENT'@,</span><span>
</span><a name="line-580"></a><span class="hs-comment">--      'ApiAnnotation.AnnClose' @`\#-\}`@,</span><span>
</span><a name="line-581"></a><span>
</span><a name="line-582"></a><span class="hs-comment">-- For details on above see note [Api annotations] in ApiAnnotation</span><span>
</span><a name="line-583"></a><span class="hs-keyword">data</span><span> </span><a name="OverlapFlag"><a href="BasicTypes.html#OverlapFlag"><span class="hs-identifier">OverlapFlag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="OverlapFlag"><a href="BasicTypes.html#OverlapFlag"><span class="hs-identifier">OverlapFlag</span></a></a><span>
</span><a name="line-584"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="overlapMode"><a href="BasicTypes.html#overlapMode"><span class="hs-identifier">overlapMode</span></a></a><span>   </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OverlapMode"><span class="hs-identifier hs-type">OverlapMode</span></a><span>
</span><a name="line-585"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="isSafeOverlap"><a href="BasicTypes.html#isSafeOverlap"><span class="hs-identifier">isSafeOverlap</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-586"></a><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span class="hs-special">)</span><span>
</span><a name="line-587"></a><span>
</span><a name="line-588"></a><span class="hs-identifier">setOverlapModeMaybe</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OverlapFlag"><span class="hs-identifier hs-type">OverlapFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="BasicTypes.html#OverlapMode"><span class="hs-identifier hs-type">OverlapMode</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#OverlapFlag"><span class="hs-identifier hs-type">OverlapFlag</span></a><span>
</span><a name="line-589"></a><a name="setOverlapModeMaybe"><a href="BasicTypes.html#setOverlapModeMaybe"><span class="hs-identifier">setOverlapModeMaybe</span></a></a><span> </span><a name="local-6989586621680214724"><a href="#local-6989586621680214724"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214724"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-590"></a><span class="hs-identifier">setOverlapModeMaybe</span><span> </span><a name="local-6989586621680214725"><a href="#local-6989586621680214725"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621680214726"><a href="#local-6989586621680214726"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214725"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">overlapMode</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214726"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-591"></a><span>
</span><a name="line-592"></a><span class="hs-identifier">hasIncoherentFlag</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OverlapMode"><span class="hs-identifier hs-type">OverlapMode</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-593"></a><a name="hasIncoherentFlag"><a href="BasicTypes.html#hasIncoherentFlag"><span class="hs-identifier">hasIncoherentFlag</span></a></a><span> </span><a name="local-6989586621680214727"><a href="#local-6989586621680214727"><span class="hs-identifier">mode</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-594"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680214727"><span class="hs-identifier hs-var">mode</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-595"></a><span>    </span><a href="BasicTypes.html#Incoherent"><span class="hs-identifier hs-var">Incoherent</span></a><span>   </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-596"></a><span>    </span><span class="hs-identifier">_</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-597"></a><span>
</span><a name="line-598"></a><span class="hs-identifier">hasOverlappableFlag</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OverlapMode"><span class="hs-identifier hs-type">OverlapMode</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-599"></a><a name="hasOverlappableFlag"><a href="BasicTypes.html#hasOverlappableFlag"><span class="hs-identifier">hasOverlappableFlag</span></a></a><span> </span><a name="local-6989586621680214728"><a href="#local-6989586621680214728"><span class="hs-identifier">mode</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-600"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680214728"><span class="hs-identifier hs-var">mode</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-601"></a><span>    </span><a href="BasicTypes.html#Overlappable"><span class="hs-identifier hs-var">Overlappable</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-602"></a><span>    </span><a href="BasicTypes.html#Overlaps"><span class="hs-identifier hs-var">Overlaps</span></a><span>     </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-603"></a><span>    </span><a href="BasicTypes.html#Incoherent"><span class="hs-identifier hs-var">Incoherent</span></a><span>   </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-604"></a><span>    </span><span class="hs-identifier">_</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-605"></a><span>
</span><a name="line-606"></a><span class="hs-identifier">hasOverlappingFlag</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OverlapMode"><span class="hs-identifier hs-type">OverlapMode</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-607"></a><a name="hasOverlappingFlag"><a href="BasicTypes.html#hasOverlappingFlag"><span class="hs-identifier">hasOverlappingFlag</span></a></a><span> </span><a name="local-6989586621680214729"><a href="#local-6989586621680214729"><span class="hs-identifier">mode</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-608"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680214729"><span class="hs-identifier hs-var">mode</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-609"></a><span>    </span><a href="BasicTypes.html#Overlapping"><span class="hs-identifier hs-var">Overlapping</span></a><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-610"></a><span>    </span><a href="BasicTypes.html#Overlaps"><span class="hs-identifier hs-var">Overlaps</span></a><span>     </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-611"></a><span>    </span><a href="BasicTypes.html#Incoherent"><span class="hs-identifier hs-var">Incoherent</span></a><span>   </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-612"></a><span>    </span><span class="hs-identifier">_</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-613"></a><span>
</span><a name="line-614"></a><span class="hs-keyword">data</span><span> </span><a name="OverlapMode"><a href="BasicTypes.html#OverlapMode"><span class="hs-identifier">OverlapMode</span></a></a><span>  </span><span class="hs-comment">-- See Note [Rules for instance lookup] in InstEnv</span><span>
</span><a name="line-615"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="NoOverlap"><a href="BasicTypes.html#NoOverlap"><span class="hs-identifier">NoOverlap</span></a></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span>
</span><a name="line-616"></a><span>                  </span><span class="hs-comment">-- See Note [Pragma source text]</span><span>
</span><a name="line-617"></a><span>    </span><span class="hs-comment">-- ^ This instance must not overlap another `NoOverlap` instance.</span><span>
</span><a name="line-618"></a><span>    </span><span class="hs-comment">-- However, it may be overlapped by `Overlapping` instances,</span><span>
</span><a name="line-619"></a><span>    </span><span class="hs-comment">-- and it may overlap `Overlappable` instances.</span><span>
</span><a name="line-620"></a><span>
</span><a name="line-621"></a><span>
</span><a name="line-622"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Overlappable"><a href="BasicTypes.html#Overlappable"><span class="hs-identifier">Overlappable</span></a></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span>
</span><a name="line-623"></a><span>                  </span><span class="hs-comment">-- See Note [Pragma source text]</span><span>
</span><a name="line-624"></a><span>    </span><span class="hs-comment">-- ^ Silently ignore this instance if you find a</span><span>
</span><a name="line-625"></a><span>    </span><span class="hs-comment">-- more specific one that matches the constraint</span><span>
</span><a name="line-626"></a><span>    </span><span class="hs-comment">-- you are trying to resolve</span><span>
</span><a name="line-627"></a><span>    </span><span class="hs-comment">--</span><span>
</span><a name="line-628"></a><span>    </span><span class="hs-comment">-- Example: constraint (Foo [Int])</span><span>
</span><a name="line-629"></a><span>    </span><span class="hs-comment">--   instance                      Foo [Int]</span><span>
</span><a name="line-630"></a><span>    </span><span class="hs-comment">--   instance {-# OVERLAPPABLE #-} Foo [a]</span><span>
</span><a name="line-631"></a><span>    </span><span class="hs-comment">--</span><span>
</span><a name="line-632"></a><span>    </span><span class="hs-comment">-- Since the second instance has the Overlappable flag,</span><span>
</span><a name="line-633"></a><span>    </span><span class="hs-comment">-- the first instance will be chosen (otherwise</span><span>
</span><a name="line-634"></a><span>    </span><span class="hs-comment">-- its ambiguous which to choose)</span><span>
</span><a name="line-635"></a><span>
</span><a name="line-636"></a><span>
</span><a name="line-637"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Overlapping"><a href="BasicTypes.html#Overlapping"><span class="hs-identifier">Overlapping</span></a></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span>
</span><a name="line-638"></a><span>                  </span><span class="hs-comment">-- See Note [Pragma source text]</span><span>
</span><a name="line-639"></a><span>    </span><span class="hs-comment">-- ^ Silently ignore any more general instances that may be</span><span>
</span><a name="line-640"></a><span>    </span><span class="hs-comment">--   used to solve the constraint.</span><span>
</span><a name="line-641"></a><span>    </span><span class="hs-comment">--</span><span>
</span><a name="line-642"></a><span>    </span><span class="hs-comment">-- Example: constraint (Foo [Int])</span><span>
</span><a name="line-643"></a><span>    </span><span class="hs-comment">--   instance {-# OVERLAPPING #-} Foo [Int]</span><span>
</span><a name="line-644"></a><span>    </span><span class="hs-comment">--   instance                     Foo [a]</span><span>
</span><a name="line-645"></a><span>    </span><span class="hs-comment">--</span><span>
</span><a name="line-646"></a><span>    </span><span class="hs-comment">-- Since the first instance has the Overlapping flag,</span><span>
</span><a name="line-647"></a><span>    </span><span class="hs-comment">-- the second---more general---instance will be ignored (otherwise</span><span>
</span><a name="line-648"></a><span>    </span><span class="hs-comment">-- it is ambiguous which to choose)</span><span>
</span><a name="line-649"></a><span>
</span><a name="line-650"></a><span>
</span><a name="line-651"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Overlaps"><a href="BasicTypes.html#Overlaps"><span class="hs-identifier">Overlaps</span></a></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span>
</span><a name="line-652"></a><span>                  </span><span class="hs-comment">-- See Note [Pragma source text]</span><span>
</span><a name="line-653"></a><span>    </span><span class="hs-comment">-- ^ Equivalent to having both `Overlapping` and `Overlappable` flags.</span><span>
</span><a name="line-654"></a><span>
</span><a name="line-655"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Incoherent"><a href="BasicTypes.html#Incoherent"><span class="hs-identifier">Incoherent</span></a></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span>
</span><a name="line-656"></a><span>                  </span><span class="hs-comment">-- See Note [Pragma source text]</span><span>
</span><a name="line-657"></a><span>    </span><span class="hs-comment">-- ^ Behave like Overlappable and Overlapping, and in addition pick</span><span>
</span><a name="line-658"></a><span>    </span><span class="hs-comment">-- an an arbitrary one if there are multiple matching candidates, and</span><span>
</span><a name="line-659"></a><span>    </span><span class="hs-comment">-- don't worry about later instantiation</span><span>
</span><a name="line-660"></a><span>    </span><span class="hs-comment">--</span><span>
</span><a name="line-661"></a><span>    </span><span class="hs-comment">-- Example: constraint (Foo [b])</span><span>
</span><a name="line-662"></a><span>    </span><span class="hs-comment">-- instance {-# INCOHERENT -} Foo [Int]</span><span>
</span><a name="line-663"></a><span>    </span><span class="hs-comment">-- instance                   Foo [a]</span><span>
</span><a name="line-664"></a><span>    </span><span class="hs-comment">-- Without the Incoherent flag, we'd complain that</span><span>
</span><a name="line-665"></a><span>    </span><span class="hs-comment">-- instantiating 'b' would change which instance</span><span>
</span><a name="line-666"></a><span>    </span><span class="hs-comment">-- was chosen. See also note [Incoherent instances] in InstEnv</span><span>
</span><a name="line-667"></a><span>
</span><a name="line-668"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span class="hs-special">)</span><span>
</span><a name="line-669"></a><span>
</span><a name="line-670"></a><span>
</span><a name="line-671"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#OverlapFlag"><span class="hs-identifier hs-type">OverlapFlag</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-672"></a><span>   </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a name="local-6989586621680214679"><a href="#local-6989586621680214679"><span class="hs-identifier">flag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">overlapMode</span><span> </span><a href="#local-6989586621680214679"><span class="hs-identifier hs-var">flag</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="BasicTypes.html#pprSafeOverlap"><span class="hs-identifier hs-var">pprSafeOverlap</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">isSafeOverlap</span><span> </span><a href="#local-6989586621680214679"><span class="hs-identifier hs-var">flag</span></a><span class="hs-special">)</span><span>
</span><a name="line-673"></a><span>
</span><a name="line-674"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#OverlapMode"><span class="hs-identifier hs-type">OverlapMode</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-675"></a><span>   </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#NoOverlap"><span class="hs-identifier hs-var">NoOverlap</span></a><span>    </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-676"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Overlappable"><span class="hs-identifier hs-var">Overlappable</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;[overlappable]&quot;</span><span>
</span><a name="line-677"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Overlapping"><span class="hs-identifier hs-var">Overlapping</span></a><span>  </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;[overlapping]&quot;</span><span>
</span><a name="line-678"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Overlaps"><span class="hs-identifier hs-var">Overlaps</span></a><span>     </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;[overlap ok]&quot;</span><span>
</span><a name="line-679"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Incoherent"><span class="hs-identifier hs-var">Incoherent</span></a><span>   </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;[incoherent]&quot;</span><span>
</span><a name="line-680"></a><span>
</span><a name="line-681"></a><span class="hs-identifier">pprSafeOverlap</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-682"></a><a name="pprSafeOverlap"><a href="BasicTypes.html#pprSafeOverlap"><span class="hs-identifier">pprSafeOverlap</span></a></a><span> </span><span class="hs-identifier hs-var">True</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;[safe]&quot;</span><span>
</span><a name="line-683"></a><span class="hs-identifier">pprSafeOverlap</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-684"></a><span>
</span><a name="line-685"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Precedence
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-692"></a><span>
</span><a name="line-693"></a><span class="hs-comment">-- | A general-purpose pretty-printing precedence type.</span><span>
</span><a name="line-694"></a><span class="hs-keyword">newtype</span><span> </span><a name="PprPrec"><a href="BasicTypes.html#PprPrec"><span class="hs-identifier">PprPrec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="PprPrec"><a href="BasicTypes.html#PprPrec"><span class="hs-identifier">PprPrec</span></a></a><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-695"></a><span class="hs-comment">-- See Note [Precedence in types]</span><span>
</span><a name="line-696"></a><span>
</span><a name="line-697"></a><span class="hs-identifier">topPrec</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">sigPrec</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">funPrec</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">opPrec</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">appPrec</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-type">PprPrec</span></a><span>
</span><a name="line-698"></a><a name="topPrec"><a href="BasicTypes.html#topPrec"><span class="hs-identifier">topPrec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-var">PprPrec</span></a><span> </span><span class="hs-number">0</span><span> </span><span class="hs-comment">-- No parens</span><span>
</span><a name="line-699"></a><a name="sigPrec"><a href="BasicTypes.html#sigPrec"><span class="hs-identifier">sigPrec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-var">PprPrec</span></a><span> </span><span class="hs-number">1</span><span> </span><span class="hs-comment">-- Explicit type signatures</span><span>
</span><a name="line-700"></a><a name="funPrec"><a href="BasicTypes.html#funPrec"><span class="hs-identifier">funPrec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-var">PprPrec</span></a><span> </span><span class="hs-number">2</span><span> </span><span class="hs-comment">-- Function args; no parens for constructor apps</span><span>
</span><a name="line-701"></a><span>                    </span><span class="hs-comment">-- See [Type operator precedence] for why both</span><span>
</span><a name="line-702"></a><span>                    </span><span class="hs-comment">-- funPrec and opPrec exist.</span><span>
</span><a name="line-703"></a><a name="opPrec"><a href="BasicTypes.html#opPrec"><span class="hs-identifier">opPrec</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-var">PprPrec</span></a><span> </span><span class="hs-number">2</span><span> </span><span class="hs-comment">-- Infix operator</span><span>
</span><a name="line-704"></a><a name="appPrec"><a href="BasicTypes.html#appPrec"><span class="hs-identifier">appPrec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-var">PprPrec</span></a><span> </span><span class="hs-number">3</span><span> </span><span class="hs-comment">-- Constructor args; no parens for atomic</span><span>
</span><a name="line-705"></a><span>
</span><a name="line-706"></a><span class="hs-identifier">maybeParen</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-type">PprPrec</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#PprPrec"><span class="hs-identifier hs-type">PprPrec</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-707"></a><a name="maybeParen"><a href="BasicTypes.html#maybeParen"><span class="hs-identifier">maybeParen</span></a></a><span> </span><a name="local-6989586621680214730"><a href="#local-6989586621680214730"><span class="hs-identifier">ctxt_prec</span></a></a><span> </span><a name="local-6989586621680214731"><a href="#local-6989586621680214731"><span class="hs-identifier">inner_prec</span></a></a><span> </span><a name="local-6989586621680214732"><a href="#local-6989586621680214732"><span class="hs-identifier">pretty</span></a></a><span>
</span><a name="line-708"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680214730"><span class="hs-identifier hs-var">ctxt_prec</span></a><span> </span><span class="hs-operator hs-var">&lt;</span><span> </span><a href="#local-6989586621680214731"><span class="hs-identifier hs-var">inner_prec</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214732"><span class="hs-identifier hs-var">pretty</span></a><span>
</span><a name="line-709"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a><span> </span><a href="#local-6989586621680214732"><span class="hs-identifier hs-var">pretty</span></a><span>
</span><a name="line-710"></a><span>
</span><a name="line-711"></a><span class="hs-comment">{- Note [Precedence in types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Many pretty-printing functions have type
    ppr_ty :: PprPrec -&gt; Type -&gt; SDoc

The PprPrec gives the binding strength of the context.  For example, in
   T ty1 ty2
we will pretty-print 'ty1' and 'ty2' with the call
  (ppr_ty appPrec ty)
to indicate that the context is that of an argument of a TyConApp.

We use this consistently for Type and HsType.

Note [Type operator precedence]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We don't keep the fixity of type operators in the operator. So the
pretty printer follows the following precedence order:

   TyConPrec         Type constructor application
   TyOpPrec/FunPrec  Operator application and function arrow

We have funPrec and opPrec to represent the precedence of function
arrow and type operators respectively, but currently we implement
funPrec == opPrec, so that we don't distinguish the two. Reason:
it's hard to parse a type like
    a ~ b =&gt; c * d -&gt; e - f

By treating opPrec = funPrec we end up with more parens
    (a ~ b) =&gt; (c * d) -&gt; (e - f)

But the two are different constructors of PprPrec so we could make
(-&gt;) bind more or less tightly if we wanted.
-}</span><span>
</span><a name="line-744"></a><span>
</span><a name="line-745"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Tuples
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-752"></a><span>
</span><a name="line-753"></a><span class="hs-keyword">data</span><span> </span><a name="TupleSort"><a href="BasicTypes.html#TupleSort"><span class="hs-identifier">TupleSort</span></a></a><span>
</span><a name="line-754"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="BoxedTuple"><a href="BasicTypes.html#BoxedTuple"><span class="hs-identifier">BoxedTuple</span></a></a><span>
</span><a name="line-755"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="UnboxedTuple"><a href="BasicTypes.html#UnboxedTuple"><span class="hs-identifier">UnboxedTuple</span></a></a><span>
</span><a name="line-756"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="ConstraintTuple"><a href="BasicTypes.html#ConstraintTuple"><span class="hs-identifier">ConstraintTuple</span></a></a><span>
</span><a name="line-757"></a><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-758"></a><span>
</span><a name="line-759"></a><span class="hs-identifier">tupleSortBoxity</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a><span>
</span><a name="line-760"></a><a name="tupleSortBoxity"><a href="BasicTypes.html#tupleSortBoxity"><span class="hs-identifier">tupleSortBoxity</span></a></a><span> </span><a href="BasicTypes.html#BoxedTuple"><span class="hs-identifier hs-var">BoxedTuple</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a><span>
</span><a name="line-761"></a><span class="hs-identifier">tupleSortBoxity</span><span> </span><a href="BasicTypes.html#UnboxedTuple"><span class="hs-identifier hs-var">UnboxedTuple</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a><span>
</span><a name="line-762"></a><span class="hs-identifier">tupleSortBoxity</span><span> </span><a href="BasicTypes.html#ConstraintTuple"><span class="hs-identifier hs-var">ConstraintTuple</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a><span>
</span><a name="line-763"></a><span>
</span><a name="line-764"></a><span class="hs-identifier">boxityTupleSort</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a><span>
</span><a name="line-765"></a><a name="boxityTupleSort"><a href="BasicTypes.html#boxityTupleSort"><span class="hs-identifier">boxityTupleSort</span></a></a><span> </span><a href="BasicTypes.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#BoxedTuple"><span class="hs-identifier hs-var">BoxedTuple</span></a><span>
</span><a name="line-766"></a><span class="hs-identifier">boxityTupleSort</span><span> </span><a href="BasicTypes.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#UnboxedTuple"><span class="hs-identifier hs-var">UnboxedTuple</span></a><span>
</span><a name="line-767"></a><span>
</span><a name="line-768"></a><span class="hs-identifier">tupleParens</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-769"></a><a name="tupleParens"><a href="BasicTypes.html#tupleParens"><span class="hs-identifier">tupleParens</span></a></a><span> </span><a href="BasicTypes.html#BoxedTuple"><span class="hs-identifier hs-var">BoxedTuple</span></a><span>      </span><a name="local-6989586621680214733"><a href="#local-6989586621680214733"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a><span> </span><a href="#local-6989586621680214733"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-770"></a><span class="hs-identifier">tupleParens</span><span> </span><a href="BasicTypes.html#UnboxedTuple"><span class="hs-identifier hs-var">UnboxedTuple</span></a><span>    </span><a name="local-6989586621680214734"><a href="#local-6989586621680214734"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;(#&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-6989586621680214734"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a><span> </span><span class="hs-special">(</span><a href="FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a><span> </span><span class="hs-string">&quot;#)&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-771"></a><span class="hs-identifier">tupleParens</span><span> </span><a href="BasicTypes.html#ConstraintTuple"><span class="hs-identifier hs-var">ConstraintTuple</span></a><span> </span><a name="local-6989586621680214735"><a href="#local-6989586621680214735"><span class="hs-identifier">p</span></a></a><span>   </span><span class="hs-comment">-- In debug-style write (% Eq a, Ord b %)</span><span>
</span><a name="line-772"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ifPprDebug"><span class="hs-identifier hs-var">ifPprDebug</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;(%&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-6989586621680214735"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a><span> </span><span class="hs-special">(</span><a href="FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a><span> </span><span class="hs-string">&quot;%)&quot;</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-773"></a><span>               </span><span class="hs-special">(</span><a href="Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a><span> </span><a href="#local-6989586621680214735"><span class="hs-identifier hs-var">p</span></a><span class="hs-special">)</span><span>
</span><a name="line-774"></a><span>
</span><a name="line-775"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Sums
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-782"></a><span>
</span><a name="line-783"></a><span class="hs-identifier">sumParens</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-784"></a><a name="sumParens"><a href="BasicTypes.html#sumParens"><span class="hs-identifier">sumParens</span></a></a><span> </span><a name="local-6989586621680214736"><a href="#local-6989586621680214736"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a><span> </span><span class="hs-special">(</span><a href="FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a><span> </span><span class="hs-string">&quot;(#&quot;</span><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-6989586621680214736"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a><span> </span><span class="hs-special">(</span><a href="FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a><span> </span><span class="hs-string">&quot;#)&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-785"></a><span>
</span><a name="line-786"></a><span class="hs-comment">-- | Pretty print an alternative in an unboxed sum e.g. &quot;| a | |&quot;.</span><span>
</span><a name="line-787"></a><span class="hs-identifier">pprAlternative</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680214697"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ The pretty printing function to use</span><span>
</span><a name="line-788"></a><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680214697"><span class="hs-identifier hs-type">a</span></a><span>           </span><span class="hs-comment">-- ^ The things to be pretty printed</span><span>
</span><a name="line-789"></a><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#ConTag"><span class="hs-identifier hs-type">ConTag</span></a><span>      </span><span class="hs-comment">-- ^ Alternative (one-based)</span><span>
</span><a name="line-790"></a><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Arity"><span class="hs-identifier hs-type">Arity</span></a><span>       </span><span class="hs-comment">-- ^ Arity</span><span>
</span><a name="line-791"></a><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>        </span><span class="hs-comment">-- ^ 'SDoc' where the alternative havs been pretty</span><span>
</span><a name="line-792"></a><span>                              </span><span class="hs-comment">-- printed and finally packed into a paragraph.</span><span>
</span><a name="line-793"></a><a name="pprAlternative"><a href="BasicTypes.html#pprAlternative"><span class="hs-identifier">pprAlternative</span></a></a><span> </span><a name="local-6989586621680214737"><a href="#local-6989586621680214737"><span class="hs-identifier">pp</span></a></a><span> </span><a name="local-6989586621680214738"><a href="#local-6989586621680214738"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621680214739"><a href="#local-6989586621680214739"><span class="hs-identifier">alt</span></a></a><span> </span><a name="local-6989586621680214740"><a href="#local-6989586621680214740"><span class="hs-identifier">arity</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-794"></a><span>    </span><a href="Outputable.html#fsep"><span class="hs-identifier hs-var">fsep</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">replicate</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680214739"><span class="hs-identifier hs-var">alt</span></a><span> </span><span class="hs-glyph">-</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span> </span><a href="Outputable.html#vbar"><span class="hs-identifier hs-var">vbar</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621680214737"><span class="hs-identifier hs-var">pp</span></a><span> </span><a href="#local-6989586621680214738"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">]</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">replicate</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621680214740"><span class="hs-identifier hs-var">arity</span></a><span> </span><span class="hs-glyph">-</span><span> </span><a href="#local-6989586621680214739"><span class="hs-identifier hs-var">alt</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#vbar"><span class="hs-identifier hs-var">vbar</span></a><span class="hs-special">)</span><span>
</span><a name="line-795"></a><span>
</span><a name="line-796"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[Generic]{Generic flag}
*                                                                      *
************************************************************************

This is the &quot;Embedding-Projection pair&quot; datatype, it contains
two pieces of code (normally either RenamedExpr's or Id's)
If we have a such a pair (EP from to), the idea is that 'from' and 'to'
represents functions of type

        from :: T -&gt; Tring
        to   :: Tring -&gt; T

And we should have

        to (from x) = x

T and Tring are arbitrary, but typically T is the 'main' type while
Tring is the 'representation' type.  (This just helps us remember
whether to use 'from' or 'to'.
-}</span><span>
</span><a name="line-819"></a><span>
</span><a name="line-820"></a><span class="hs-comment">-- | Embedding Projection pair</span><span>
</span><a name="line-821"></a><span class="hs-keyword">data</span><span> </span><a name="EP"><a href="BasicTypes.html#EP"><span class="hs-identifier">EP</span></a></a><span> </span><a name="local-6989586621680214652"><a href="#local-6989586621680214652"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="EP"><a href="BasicTypes.html#EP"><span class="hs-identifier">EP</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="fromEP"><a href="BasicTypes.html#fromEP"><span class="hs-identifier">fromEP</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621680214652"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- :: T -&gt; Tring</span><span>
</span><a name="line-822"></a><span>                 </span><a name="toEP"><a href="BasicTypes.html#toEP"><span class="hs-identifier">toEP</span></a></a><span>   </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621680214652"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">}</span><span>  </span><span class="hs-comment">-- :: Tring -&gt; T</span><span>
</span><a name="line-823"></a><span>
</span><a name="line-824"></a><span class="hs-comment">{-
Embedding-projection pairs are used in several places:

First of all, each type constructor has an EP associated with it, the
code in EP converts (datatype T) from T to Tring and back again.

Secondly, when we are filling in Generic methods (in the typechecker,
tcMethodBinds), we are constructing bimaps by induction on the structure
of the type of the method signature.


************************************************************************
*                                                                      *
\subsection{Occurrence information}
*                                                                      *
************************************************************************

This data type is used exclusively by the simplifier, but it appears in a
SubstResult, which is currently defined in VarEnv, which is pretty near
the base of the module hierarchy.  So it seemed simpler to put the
defn of OccInfo here, safely at the bottom
-}</span><span>
</span><a name="line-846"></a><span>
</span><a name="line-847"></a><span class="hs-comment">-- | identifier Occurrence Information</span><span>
</span><a name="line-848"></a><span class="hs-keyword">data</span><span> </span><a name="OccInfo"><a href="BasicTypes.html#OccInfo"><span class="hs-identifier">OccInfo</span></a></a><span>
</span><a name="line-849"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="ManyOccs"><a href="BasicTypes.html#ManyOccs"><span class="hs-identifier">ManyOccs</span></a></a><span>        </span><span class="hs-special">{</span><span> </span><a name="occ_tail"><a href="BasicTypes.html#occ_tail"><span class="hs-identifier">occ_tail</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="BasicTypes.html#TailCallInfo"><span class="hs-identifier hs-type">TailCallInfo</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-850"></a><span>                        </span><span class="hs-comment">-- ^ There are many occurrences, or unknown occurrences</span><span>
</span><a name="line-851"></a><span>
</span><a name="line-852"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="IAmDead"><a href="BasicTypes.html#IAmDead"><span class="hs-identifier">IAmDead</span></a></a><span>             </span><span class="hs-comment">-- ^ Marks unused variables.  Sometimes useful for</span><span>
</span><a name="line-853"></a><span>                        </span><span class="hs-comment">-- lambda and case-bound variables.</span><span>
</span><a name="line-854"></a><span>
</span><a name="line-855"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="OneOcc"><a href="BasicTypes.html#OneOcc"><span class="hs-identifier">OneOcc</span></a></a><span>          </span><span class="hs-special">{</span><span> </span><a name="occ_in_lam"><a href="BasicTypes.html#occ_in_lam"><span class="hs-identifier">occ_in_lam</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="BasicTypes.html#InsideLam"><span class="hs-identifier hs-type">InsideLam</span></a><span>
</span><a name="line-856"></a><span>                    </span><span class="hs-special">,</span><span> </span><a name="occ_one_br"><a href="BasicTypes.html#occ_one_br"><span class="hs-identifier">occ_one_br</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="BasicTypes.html#OneBranch"><span class="hs-identifier hs-type">OneBranch</span></a><span>
</span><a name="line-857"></a><span>                    </span><span class="hs-special">,</span><span> </span><a name="occ_int_cxt"><a href="BasicTypes.html#occ_int_cxt"><span class="hs-identifier">occ_int_cxt</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="BasicTypes.html#InterestingCxt"><span class="hs-identifier hs-type">InterestingCxt</span></a><span>
</span><a name="line-858"></a><span>                    </span><span class="hs-special">,</span><span> </span><a name="occ_tail"><a href="BasicTypes.html#occ_tail"><span class="hs-identifier">occ_tail</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="BasicTypes.html#TailCallInfo"><span class="hs-identifier hs-type">TailCallInfo</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-859"></a><span>                        </span><span class="hs-comment">-- ^ Occurs exactly once (per branch), not inside a rule</span><span>
</span><a name="line-860"></a><span>
</span><a name="line-861"></a><span>  </span><span class="hs-comment">-- | This identifier breaks a loop of mutually recursive functions. The field</span><span>
</span><a name="line-862"></a><span>  </span><span class="hs-comment">-- marks whether it is only a loop breaker due to a reference in a rule</span><span>
</span><a name="line-863"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="IAmALoopBreaker"><a href="BasicTypes.html#IAmALoopBreaker"><span class="hs-identifier">IAmALoopBreaker</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="occ_rules_only"><a href="BasicTypes.html#occ_rules_only"><span class="hs-identifier">occ_rules_only</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="BasicTypes.html#RulesOnly"><span class="hs-identifier hs-type">RulesOnly</span></a><span>
</span><a name="line-864"></a><span>                    </span><span class="hs-special">,</span><span> </span><a name="occ_tail"><a href="BasicTypes.html#occ_tail"><span class="hs-identifier">occ_tail</span></a></a><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="BasicTypes.html#TailCallInfo"><span class="hs-identifier hs-type">TailCallInfo</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-865"></a><span>                        </span><span class="hs-comment">-- Note [LoopBreaker OccInfo]</span><span>
</span><a name="line-866"></a><span>
</span><a name="line-867"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">)</span><span>
</span><a name="line-868"></a><span>
</span><a name="line-869"></a><span class="hs-keyword">type</span><span> </span><a name="RulesOnly"><a href="BasicTypes.html#RulesOnly"><span class="hs-identifier">RulesOnly</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-870"></a><span>
</span><a name="line-871"></a><span class="hs-comment">{-
Note [LoopBreaker OccInfo]
~~~~~~~~~~~~~~~~~~~~~~~~~~
   IAmALoopBreaker True  &lt;=&gt; A &quot;weak&quot; or rules-only loop breaker
                             Do not preInlineUnconditionally

   IAmALoopBreaker False &lt;=&gt; A &quot;strong&quot; loop breaker
                             Do not inline at all

See OccurAnal Note [Weak loop breakers]
-}</span><span>
</span><a name="line-882"></a><span>
</span><a name="line-883"></a><span class="hs-identifier">noOccInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span>
</span><a name="line-884"></a><a name="noOccInfo"><a href="BasicTypes.html#noOccInfo"><span class="hs-identifier">noOccInfo</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#ManyOccs"><span class="hs-identifier hs-var">ManyOccs</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">occ_tail</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NoTailCallInfo"><span class="hs-identifier hs-var">NoTailCallInfo</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-885"></a><span>
</span><a name="line-886"></a><span class="hs-identifier">isManyOccs</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-887"></a><a name="isManyOccs"><a href="BasicTypes.html#isManyOccs"><span class="hs-identifier">isManyOccs</span></a></a><span> </span><a href="BasicTypes.html#ManyOccs"><span class="hs-identifier hs-var">ManyOccs</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-888"></a><span class="hs-identifier">isManyOccs</span><span> </span><span class="hs-identifier">_</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-889"></a><span>
</span><a name="line-890"></a><span class="hs-identifier">seqOccInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-891"></a><a name="seqOccInfo"><a href="BasicTypes.html#seqOccInfo"><span class="hs-identifier">seqOccInfo</span></a></a><span> </span><a name="local-6989586621680214741"><a href="#local-6989586621680214741"><span class="hs-identifier">occ</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214741"><span class="hs-identifier hs-var">occ</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">seq</span><span class="hs-special">`</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-892"></a><span>
</span><a name="line-893"></a><span class="hs-comment">-----------------</span><span>
</span><a name="line-894"></a><span class="hs-comment">-- | Interesting Context</span><span>
</span><a name="line-895"></a><span class="hs-keyword">type</span><span> </span><a name="InterestingCxt"><a href="BasicTypes.html#InterestingCxt"><span class="hs-identifier">InterestingCxt</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>      </span><span class="hs-comment">-- True &lt;=&gt; Function: is applied</span><span>
</span><a name="line-896"></a><span>                                </span><span class="hs-comment">--          Data value: scrutinised by a case with</span><span>
</span><a name="line-897"></a><span>                                </span><span class="hs-comment">--                      at least one non-DEFAULT branch</span><span>
</span><a name="line-898"></a><span>
</span><a name="line-899"></a><span class="hs-comment">-----------------</span><span>
</span><a name="line-900"></a><span class="hs-comment">-- | Inside Lambda</span><span>
</span><a name="line-901"></a><span class="hs-keyword">type</span><span> </span><a name="InsideLam"><a href="BasicTypes.html#InsideLam"><span class="hs-identifier">InsideLam</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>   </span><span class="hs-comment">-- True &lt;=&gt; Occurs inside a non-linear lambda</span><span>
</span><a name="line-902"></a><span>                        </span><span class="hs-comment">-- Substituting a redex for this occurrence is</span><span>
</span><a name="line-903"></a><span>                        </span><span class="hs-comment">-- dangerous because it might duplicate work.</span><span>
</span><a name="line-904"></a><span class="hs-identifier">insideLam</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">notInsideLam</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InsideLam"><span class="hs-identifier hs-type">InsideLam</span></a><span>
</span><a name="line-905"></a><a name="insideLam"><a href="BasicTypes.html#insideLam"><span class="hs-identifier">insideLam</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-906"></a><a name="notInsideLam"><a href="BasicTypes.html#notInsideLam"><span class="hs-identifier">notInsideLam</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-907"></a><span>
</span><a name="line-908"></a><span class="hs-comment">-----------------</span><span>
</span><a name="line-909"></a><span class="hs-keyword">type</span><span> </span><a name="OneBranch"><a href="BasicTypes.html#OneBranch"><span class="hs-identifier">OneBranch</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>   </span><span class="hs-comment">-- True &lt;=&gt; Occurs in only one case branch</span><span>
</span><a name="line-910"></a><span>                        </span><span class="hs-comment">--      so no code-duplication issue to worry about</span><span>
</span><a name="line-911"></a><span class="hs-identifier">oneBranch</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">notOneBranch</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OneBranch"><span class="hs-identifier hs-type">OneBranch</span></a><span>
</span><a name="line-912"></a><a name="oneBranch"><a href="BasicTypes.html#oneBranch"><span class="hs-identifier">oneBranch</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-913"></a><a name="notOneBranch"><a href="BasicTypes.html#notOneBranch"><span class="hs-identifier">notOneBranch</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-914"></a><span>
</span><a name="line-915"></a><span class="hs-comment">-----------------</span><span>
</span><a name="line-916"></a><span class="hs-keyword">data</span><span> </span><a name="TailCallInfo"><a href="BasicTypes.html#TailCallInfo"><span class="hs-identifier">TailCallInfo</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="AlwaysTailCalled"><a href="BasicTypes.html#AlwaysTailCalled"><span class="hs-identifier">AlwaysTailCalled</span></a></a><span> </span><a href="BasicTypes.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a><span> </span><span class="hs-comment">-- See Note [TailCallInfo]</span><span>
</span><a name="line-917"></a><span>                  </span><span class="hs-glyph">|</span><span> </span><a name="NoTailCallInfo"><a href="BasicTypes.html#NoTailCallInfo"><span class="hs-identifier">NoTailCallInfo</span></a></a><span>
</span><a name="line-918"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">)</span><span>
</span><a name="line-919"></a><span>
</span><a name="line-920"></a><span class="hs-identifier">tailCallInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#TailCallInfo"><span class="hs-identifier hs-type">TailCallInfo</span></a><span>
</span><a name="line-921"></a><a name="tailCallInfo"><a href="BasicTypes.html#tailCallInfo"><span class="hs-identifier">tailCallInfo</span></a></a><span> </span><a href="BasicTypes.html#IAmDead"><span class="hs-identifier hs-var">IAmDead</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NoTailCallInfo"><span class="hs-identifier hs-var">NoTailCallInfo</span></a><span>
</span><a name="line-922"></a><span class="hs-identifier">tailCallInfo</span><span> </span><a name="local-6989586621680214742"><a href="#local-6989586621680214742"><span class="hs-identifier">other</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">occ_tail</span><span> </span><a href="#local-6989586621680214742"><span class="hs-identifier hs-var">other</span></a><span>
</span><a name="line-923"></a><span>
</span><a name="line-924"></a><span class="hs-identifier">zapOccTailCallInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span>
</span><a name="line-925"></a><a name="zapOccTailCallInfo"><a href="BasicTypes.html#zapOccTailCallInfo"><span class="hs-identifier">zapOccTailCallInfo</span></a></a><span> </span><a href="BasicTypes.html#IAmDead"><span class="hs-identifier hs-var">IAmDead</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#IAmDead"><span class="hs-identifier hs-var">IAmDead</span></a><span>
</span><a name="line-926"></a><span class="hs-identifier">zapOccTailCallInfo</span><span> </span><a name="local-6989586621680214743"><a href="#local-6989586621680214743"><span class="hs-identifier">occ</span></a></a><span>       </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214743"><span class="hs-identifier hs-var">occ</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">occ_tail</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NoTailCallInfo"><span class="hs-identifier hs-var">NoTailCallInfo</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-927"></a><span>
</span><a name="line-928"></a><span class="hs-identifier">isAlwaysTailCalled</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-929"></a><a name="isAlwaysTailCalled"><a href="BasicTypes.html#isAlwaysTailCalled"><span class="hs-identifier">isAlwaysTailCalled</span></a></a><span> </span><a name="local-6989586621680214744"><a href="#local-6989586621680214744"><span class="hs-identifier">occ</span></a></a><span>
</span><a name="line-930"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="BasicTypes.html#tailCallInfo"><span class="hs-identifier hs-var">tailCallInfo</span></a><span> </span><a href="#local-6989586621680214744"><span class="hs-identifier hs-var">occ</span></a><span> </span><span class="hs-keyword">of</span><span> </span><a href="BasicTypes.html#AlwaysTailCalled"><span class="hs-identifier hs-var">AlwaysTailCalled</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-931"></a><span>                             </span><a href="BasicTypes.html#NoTailCallInfo"><span class="hs-identifier hs-var">NoTailCallInfo</span></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-932"></a><span>
</span><a name="line-933"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#TailCallInfo"><span class="hs-identifier hs-type">TailCallInfo</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-934"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#AlwaysTailCalled"><span class="hs-identifier hs-var">AlwaysTailCalled</span></a><span> </span><a name="local-6989586621680214678"><a href="#local-6989586621680214678"><span class="hs-identifier">ar</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Tail&quot;</span><span class="hs-special">,</span><span> </span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680214678"><span class="hs-identifier hs-var">ar</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-935"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">_</span><span>                     </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-936"></a><span>
</span><a name="line-937"></a><span class="hs-comment">-----------------</span><span>
</span><a name="line-938"></a><span class="hs-identifier">strongLoopBreaker</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">weakLoopBreaker</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span>
</span><a name="line-939"></a><a name="strongLoopBreaker"><a href="BasicTypes.html#strongLoopBreaker"><span class="hs-identifier">strongLoopBreaker</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#IAmALoopBreaker"><span class="hs-identifier hs-var">IAmALoopBreaker</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><a href="BasicTypes.html#NoTailCallInfo"><span class="hs-identifier hs-var">NoTailCallInfo</span></a><span>
</span><a name="line-940"></a><a name="weakLoopBreaker"><a href="BasicTypes.html#weakLoopBreaker"><span class="hs-identifier">weakLoopBreaker</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#IAmALoopBreaker"><span class="hs-identifier hs-var">IAmALoopBreaker</span></a><span> </span><span class="hs-identifier hs-var">True</span><span>  </span><a href="BasicTypes.html#NoTailCallInfo"><span class="hs-identifier hs-var">NoTailCallInfo</span></a><span>
</span><a name="line-941"></a><span>
</span><a name="line-942"></a><span class="hs-identifier">isWeakLoopBreaker</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-943"></a><a name="isWeakLoopBreaker"><a href="BasicTypes.html#isWeakLoopBreaker"><span class="hs-identifier">isWeakLoopBreaker</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#IAmALoopBreaker"><span class="hs-identifier hs-var">IAmALoopBreaker</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-944"></a><span class="hs-identifier">isWeakLoopBreaker</span><span> </span><span class="hs-identifier">_</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-945"></a><span>
</span><a name="line-946"></a><span class="hs-identifier">isStrongLoopBreaker</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-947"></a><a name="isStrongLoopBreaker"><a href="BasicTypes.html#isStrongLoopBreaker"><span class="hs-identifier">isStrongLoopBreaker</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#IAmALoopBreaker"><span class="hs-identifier hs-var">IAmALoopBreaker</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">occ_rules_only</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-948"></a><span>  </span><span class="hs-comment">-- Loop-breaker that breaks a non-rule cycle</span><span>
</span><a name="line-949"></a><span class="hs-identifier">isStrongLoopBreaker</span><span> </span><span class="hs-identifier">_</span><span>                                            </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-950"></a><span>
</span><a name="line-951"></a><span class="hs-identifier">isDeadOcc</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-952"></a><a name="isDeadOcc"><a href="BasicTypes.html#isDeadOcc"><span class="hs-identifier">isDeadOcc</span></a></a><span> </span><a href="BasicTypes.html#IAmDead"><span class="hs-identifier hs-var">IAmDead</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-953"></a><span class="hs-identifier">isDeadOcc</span><span> </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-954"></a><span>
</span><a name="line-955"></a><span class="hs-identifier">isOneOcc</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-956"></a><a name="isOneOcc"><a href="BasicTypes.html#isOneOcc"><span class="hs-identifier">isOneOcc</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#OneOcc"><span class="hs-identifier hs-var">OneOcc</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-957"></a><span class="hs-identifier">isOneOcc</span><span> </span><span class="hs-identifier">_</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-958"></a><span>
</span><a name="line-959"></a><span class="hs-identifier">zapFragileOcc</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span>
</span><a name="line-960"></a><span class="hs-comment">-- Keep only the most robust data: deadness, loop-breaker-hood</span><span>
</span><a name="line-961"></a><a name="zapFragileOcc"><a href="BasicTypes.html#zapFragileOcc"><span class="hs-identifier">zapFragileOcc</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#OneOcc"><span class="hs-identifier hs-var">OneOcc</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#noOccInfo"><span class="hs-identifier hs-var">noOccInfo</span></a><span>
</span><a name="line-962"></a><span class="hs-identifier">zapFragileOcc</span><span> </span><a name="local-6989586621680214745"><a href="#local-6989586621680214745"><span class="hs-identifier">occ</span></a></a><span>         </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#zapOccTailCallInfo"><span class="hs-identifier hs-var">zapOccTailCallInfo</span></a><span> </span><a href="#local-6989586621680214745"><span class="hs-identifier hs-var">occ</span></a><span>
</span><a name="line-963"></a><span>
</span><a name="line-964"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-965"></a><span>  </span><span class="hs-comment">-- only used for debugging; never parsed.  KSW 1999-07</span><span>
</span><a name="line-966"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ManyOccs"><span class="hs-identifier hs-var">ManyOccs</span></a><span> </span><a name="local-6989586621680214666"><a href="#local-6989586621680214666"><span class="hs-identifier">tails</span></a></a><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#pprShortTailCallInfo"><span class="hs-identifier hs-var">pprShortTailCallInfo</span></a><span> </span><a href="#local-6989586621680214666"><span class="hs-identifier hs-var">tails</span></a><span>
</span><a name="line-967"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#IAmDead"><span class="hs-identifier hs-var">IAmDead</span></a><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Dead&quot;</span><span>
</span><a name="line-968"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#IAmALoopBreaker"><span class="hs-identifier hs-var">IAmALoopBreaker</span></a><span> </span><a name="local-6989586621680214667"><a href="#local-6989586621680214667"><span class="hs-identifier">rule_only</span></a></a><span> </span><a name="local-6989586621680214668"><a href="#local-6989586621680214668"><span class="hs-identifier">tails</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-969"></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;LoopBreaker&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="#local-6989586621680214669"><span class="hs-identifier hs-var">pp_ro</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="BasicTypes.html#pprShortTailCallInfo"><span class="hs-identifier hs-var">pprShortTailCallInfo</span></a><span> </span><a href="#local-6989586621680214668"><span class="hs-identifier hs-var">tails</span></a><span>
</span><a name="line-970"></a><span>        </span><span class="hs-keyword">where</span><span>
</span><a name="line-971"></a><span>          </span><a name="local-6989586621680214669"><a href="#local-6989586621680214669"><span class="hs-identifier">pp_ro</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680214667"><span class="hs-identifier hs-var">rule_only</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'!'</span><span>
</span><a name="line-972"></a><span>                </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-973"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#OneOcc"><span class="hs-identifier hs-var">OneOcc</span></a><span> </span><a name="local-6989586621680214670"><a href="#local-6989586621680214670"><span class="hs-identifier">inside_lam</span></a></a><span> </span><a name="local-6989586621680214671"><a href="#local-6989586621680214671"><span class="hs-identifier">one_branch</span></a></a><span> </span><a name="local-6989586621680214672"><a href="#local-6989586621680214672"><span class="hs-identifier">int_cxt</span></a></a><span> </span><a name="local-6989586621680214673"><a href="#local-6989586621680214673"><span class="hs-identifier">tail_info</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-974"></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Once&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="#local-6989586621680214674"><span class="hs-identifier hs-var">pp_lam</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="#local-6989586621680214675"><span class="hs-identifier hs-var">pp_br</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="#local-6989586621680214676"><span class="hs-identifier hs-var">pp_args</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="#local-6989586621680214677"><span class="hs-identifier hs-var">pp_tail</span></a><span>
</span><a name="line-975"></a><span>        </span><span class="hs-keyword">where</span><span>
</span><a name="line-976"></a><span>          </span><a name="local-6989586621680214674"><a href="#local-6989586621680214674"><span class="hs-identifier">pp_lam</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680214670"><span class="hs-identifier hs-var">inside_lam</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'L'</span><span>
</span><a name="line-977"></a><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-978"></a><span>          </span><a name="local-6989586621680214675"><a href="#local-6989586621680214675"><span class="hs-identifier">pp_br</span></a></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680214671"><span class="hs-identifier hs-var">one_branch</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-979"></a><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'*'</span><span>
</span><a name="line-980"></a><span>          </span><a name="local-6989586621680214676"><a href="#local-6989586621680214676"><span class="hs-identifier">pp_args</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621680214672"><span class="hs-identifier hs-var">int_cxt</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'!'</span><span>
</span><a name="line-981"></a><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-982"></a><span>          </span><a name="local-6989586621680214677"><a href="#local-6989586621680214677"><span class="hs-identifier">pp_tail</span></a></a><span>             </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#pprShortTailCallInfo"><span class="hs-identifier hs-var">pprShortTailCallInfo</span></a><span> </span><a href="#local-6989586621680214673"><span class="hs-identifier hs-var">tail_info</span></a><span>
</span><a name="line-983"></a><span>
</span><a name="line-984"></a><span class="hs-identifier">pprShortTailCallInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#TailCallInfo"><span class="hs-identifier hs-type">TailCallInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-985"></a><a name="pprShortTailCallInfo"><a href="BasicTypes.html#pprShortTailCallInfo"><span class="hs-identifier">pprShortTailCallInfo</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#AlwaysTailCalled"><span class="hs-identifier hs-var">AlwaysTailCalled</span></a><span> </span><a name="local-6989586621680214746"><a href="#local-6989586621680214746"><span class="hs-identifier">ar</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'T'</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680214746"><span class="hs-identifier hs-var">ar</span></a><span class="hs-special">)</span><span>
</span><a name="line-986"></a><span class="hs-identifier">pprShortTailCallInfo</span><span> </span><a href="BasicTypes.html#NoTailCallInfo"><span class="hs-identifier hs-var">NoTailCallInfo</span></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-987"></a><span>
</span><a name="line-988"></a><span class="hs-comment">{-
Note [TailCallInfo]
~~~~~~~~~~~~~~~~~~~
The occurrence analyser determines what can be made into a join point, but it
doesn't change the binder into a JoinId because then it would be inconsistent
with the occurrences. Thus it's left to the simplifier (or to simpleOptExpr) to
change the IdDetails.

The AlwaysTailCalled marker actually means slightly more than simply that the
function is always tail-called. See Note [Invariants on join points].

This info is quite fragile and should not be relied upon unless the occurrence
analyser has *just* run. Use 'Id.isJoinId_maybe' for the permanent state of
the join-point-hood of a binder; a join id itself will not be marked
AlwaysTailCalled.

Note that there is a 'TailCallInfo' on a 'ManyOccs' value. One might expect that
being tail-called would mean that the variable could only appear once per branch
(thus getting a `OneOcc { occ_one_br = True }` occurrence info), but a join
point can also be invoked from other join points, not just from case branches:

  let j1 x = ...
      j2 y = ... j1 z {- tail call -} ...
  in case w of
       A -&gt; j1 v
       B -&gt; j2 u
       C -&gt; j2 q

Here both 'j1' and 'j2' will get marked AlwaysTailCalled, but j1 will get
ManyOccs and j2 will get `OneOcc { occ_one_br = True }`.

************************************************************************
*                                                                      *
                Default method specification
*                                                                      *
************************************************************************

The DefMethSpec enumeration just indicates what sort of default method
is used for a class. It is generated from source code, and present in
interface files; it is converted to Class.DefMethInfo before begin put in a
Class object.
-}</span><span>
</span><a name="line-1030"></a><span>
</span><a name="line-1031"></a><span class="hs-comment">-- | Default Method Specification</span><span>
</span><a name="line-1032"></a><span class="hs-keyword">data</span><span> </span><a name="DefMethSpec"><a href="BasicTypes.html#DefMethSpec"><span class="hs-identifier">DefMethSpec</span></a></a><span> </span><a name="local-6989586621680214651"><a href="#local-6989586621680214651"><span class="hs-identifier">ty</span></a></a><span>
</span><a name="line-1033"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="VanillaDM"><a href="BasicTypes.html#VanillaDM"><span class="hs-identifier">VanillaDM</span></a></a><span>     </span><span class="hs-comment">-- Default method given with polymorphic code</span><span>
</span><a name="line-1034"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="GenericDM"><a href="BasicTypes.html#GenericDM"><span class="hs-identifier">GenericDM</span></a></a><span> </span><a href="#local-6989586621680214651"><span class="hs-identifier hs-type">ty</span></a><span>  </span><span class="hs-comment">-- Default method given with code of this type</span><span>
</span><a name="line-1035"></a><span>
</span><a name="line-1036"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a><span> </span><a href="#local-6989586621680214665"><span class="hs-identifier hs-type">ty</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1037"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;{- Has default method -}&quot;</span><span>
</span><a name="line-1038"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#GenericDM"><span class="hs-identifier hs-var">GenericDM</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;{- Has generic default method -}&quot;</span><span>
</span><a name="line-1039"></a><span>
</span><a name="line-1040"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Success flag}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-1047"></a><span>
</span><a name="line-1048"></a><span class="hs-keyword">data</span><span> </span><a name="SuccessFlag"><a href="BasicTypes.html#SuccessFlag"><span class="hs-identifier">SuccessFlag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Succeeded"><a href="BasicTypes.html#Succeeded"><span class="hs-identifier">Succeeded</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="Failed"><a href="BasicTypes.html#Failed"><span class="hs-identifier">Failed</span></a></a><span>
</span><a name="line-1049"></a><span>
</span><a name="line-1050"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#SuccessFlag"><span class="hs-identifier hs-type">SuccessFlag</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1051"></a><span>    </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Succeeded&quot;</span><span>
</span><a name="line-1052"></a><span>    </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#Failed"><span class="hs-identifier hs-var">Failed</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Failed&quot;</span><span>
</span><a name="line-1053"></a><span>
</span><a name="line-1054"></a><span class="hs-identifier">successIf</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#SuccessFlag"><span class="hs-identifier hs-type">SuccessFlag</span></a><span>
</span><a name="line-1055"></a><a name="successIf"><a href="BasicTypes.html#successIf"><span class="hs-identifier">successIf</span></a></a><span> </span><span class="hs-identifier hs-var">True</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a><span>
</span><a name="line-1056"></a><span class="hs-identifier">successIf</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Failed"><span class="hs-identifier hs-var">Failed</span></a><span>
</span><a name="line-1057"></a><span>
</span><a name="line-1058"></a><span class="hs-identifier">succeeded</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">failed</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SuccessFlag"><span class="hs-identifier hs-type">SuccessFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1059"></a><a name="succeeded"><a href="BasicTypes.html#succeeded"><span class="hs-identifier">succeeded</span></a></a><span> </span><a href="BasicTypes.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1060"></a><span class="hs-identifier">succeeded</span><span> </span><a href="BasicTypes.html#Failed"><span class="hs-identifier hs-var">Failed</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1061"></a><span>
</span><a name="line-1062"></a><a name="failed"><a href="BasicTypes.html#failed"><span class="hs-identifier">failed</span></a></a><span> </span><a href="BasicTypes.html#Succeeded"><span class="hs-identifier hs-var">Succeeded</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1063"></a><span class="hs-identifier">failed</span><span> </span><a href="BasicTypes.html#Failed"><span class="hs-identifier hs-var">Failed</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1064"></a><span>
</span><a name="line-1065"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Source Text}
*                                                                      *
************************************************************************
Keeping Source Text for source to source conversions

Note [Pragma source text]
~~~~~~~~~~~~~~~~~~~~~~~~~
The lexer does a case-insensitive match for pragmas, as well as
accepting both UK and US spelling variants.

So

  {-# SPECIALISE #-}
  {-# SPECIALIZE #-}
  {-# Specialize #-}

will all generate ITspec_prag token for the start of the pragma.

In order to be able to do source to source conversions, the original
source text for the token needs to be preserved, hence the
`SourceText` field.

So the lexer will then generate

  ITspec_prag &quot;{ -# SPECIALISE&quot;
  ITspec_prag &quot;{ -# SPECIALIZE&quot;
  ITspec_prag &quot;{ -# Specialize&quot;

for the cases above.
 [without the space between '{' and '-', otherwise this comment won't parse]


Note [Literal source text]
~~~~~~~~~~~~~~~~~~~~~~~~~~
The lexer/parser converts literals from their original source text
versions to an appropriate internal representation. This is a problem
for tools doing source to source conversions, so the original source
text is stored in literals where this can occur.

Motivating examples for HsLit

  HsChar          '\n'       == '\x20`
  HsCharPrim      '\x41`#    == `A`
  HsString        &quot;\x20\x41&quot; == &quot; A&quot;
  HsStringPrim    &quot;\x20&quot;#    == &quot; &quot;#
  HsInt           001        == 1
  HsIntPrim       002#       == 2#
  HsWordPrim      003##      == 3##
  HsInt64Prim     004##      == 4##
  HsWord64Prim    005##      == 5##
  HsInteger       006        == 6

For OverLitVal

  HsIntegral      003      == 0x003
  HsIsString      &quot;\x41nd&quot; == &quot;And&quot;
-}</span><span>
</span><a name="line-1125"></a><span>
</span><a name="line-1126"></a><span> </span><span class="hs-comment">-- Note [Literal source text],[Pragma source text]</span><span>
</span><a name="line-1127"></a><span class="hs-keyword">data</span><span> </span><a name="SourceText"><a href="BasicTypes.html#SourceText"><span class="hs-identifier">SourceText</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="SourceText"><a href="BasicTypes.html#SourceText"><span class="hs-identifier">SourceText</span></a></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-1128"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a name="NoSourceText"><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier">NoSourceText</span></a></a><span> </span><span class="hs-comment">-- ^ For when code is generated, e.g. TH,</span><span>
</span><a name="line-1129"></a><span>                               </span><span class="hs-comment">-- deriving. The pretty printer will then make</span><span>
</span><a name="line-1130"></a><span>                               </span><span class="hs-comment">-- its own representation of the item.</span><span>
</span><a name="line-1131"></a><span>                </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-1132"></a><span>
</span><a name="line-1133"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1134"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><a name="local-6989586621680214664"><a href="#local-6989586621680214664"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;SourceText&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><a href="#local-6989586621680214664"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-1135"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;NoSourceText&quot;</span><span>
</span><a name="line-1136"></a><span>
</span><a name="line-1137"></a><span class="hs-comment">-- | Special combinator for showing string literals.</span><span>
</span><a name="line-1138"></a><span class="hs-identifier">pprWithSourceText</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-1139"></a><a name="pprWithSourceText"><a href="BasicTypes.html#pprWithSourceText"><span class="hs-identifier">pprWithSourceText</span></a></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span>     </span><a name="local-6989586621680214747"><a href="#local-6989586621680214747"><span class="hs-identifier">d</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214747"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-1140"></a><span class="hs-identifier">pprWithSourceText</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><a name="local-6989586621680214748"><a href="#local-6989586621680214748"><span class="hs-identifier">src</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><a href="#local-6989586621680214748"><span class="hs-identifier hs-var">src</span></a><span>
</span><a name="line-1141"></a><span>
</span><a name="line-1142"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Activation}
*                                                                      *
************************************************************************

When a rule or inlining is active
-}</span><span>
</span><a name="line-1151"></a><span>
</span><a name="line-1152"></a><span class="hs-comment">-- | Phase Number</span><span>
</span><a name="line-1153"></a><span class="hs-keyword">type</span><span> </span><a name="PhaseNum"><a href="BasicTypes.html#PhaseNum"><span class="hs-identifier">PhaseNum</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span>  </span><span class="hs-comment">-- Compilation phase</span><span>
</span><a name="line-1154"></a><span>                     </span><span class="hs-comment">-- Phases decrease towards zero</span><span>
</span><a name="line-1155"></a><span>                     </span><span class="hs-comment">-- Zero is the last phase</span><span>
</span><a name="line-1156"></a><span>
</span><a name="line-1157"></a><span class="hs-keyword">data</span><span> </span><a name="CompilerPhase"><a href="BasicTypes.html#CompilerPhase"><span class="hs-identifier">CompilerPhase</span></a></a><span>
</span><a name="line-1158"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="Phase"><a href="BasicTypes.html#Phase"><span class="hs-identifier">Phase</span></a></a><span> </span><a href="BasicTypes.html#PhaseNum"><span class="hs-identifier hs-type">PhaseNum</span></a><span>
</span><a name="line-1159"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="InitialPhase"><a href="BasicTypes.html#InitialPhase"><span class="hs-identifier">InitialPhase</span></a></a><span>    </span><span class="hs-comment">-- The first phase -- number = infinity!</span><span>
</span><a name="line-1160"></a><span>
</span><a name="line-1161"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#CompilerPhase"><span class="hs-identifier hs-type">CompilerPhase</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1162"></a><span>   </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Phase"><span class="hs-identifier hs-var">Phase</span></a><span> </span><a name="local-6989586621680214663"><a href="#local-6989586621680214663"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680214663"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-1163"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#InitialPhase"><span class="hs-identifier hs-var">InitialPhase</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;InitialPhase&quot;</span><span>
</span><a name="line-1164"></a><span>
</span><a name="line-1165"></a><span class="hs-identifier">activeAfterInitial</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span>
</span><a name="line-1166"></a><span class="hs-comment">-- Active in the first phase after the initial phase</span><span>
</span><a name="line-1167"></a><span class="hs-comment">-- Currently we have just phases [2,1,0]</span><span>
</span><a name="line-1168"></a><a name="activeAfterInitial"><a href="BasicTypes.html#activeAfterInitial"><span class="hs-identifier">activeAfterInitial</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span> </span><span class="hs-number">2</span><span>
</span><a name="line-1169"></a><span>
</span><a name="line-1170"></a><span class="hs-identifier">activeDuringFinal</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span>
</span><a name="line-1171"></a><span class="hs-comment">-- Active in the final simplification phase (which is repeated)</span><span>
</span><a name="line-1172"></a><a name="activeDuringFinal"><a href="BasicTypes.html#activeDuringFinal"><span class="hs-identifier">activeDuringFinal</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span> </span><span class="hs-number">0</span><span>
</span><a name="line-1173"></a><span>
</span><a name="line-1174"></a><span class="hs-comment">-- See note [Pragma source text]</span><span>
</span><a name="line-1175"></a><span class="hs-keyword">data</span><span> </span><a name="Activation"><a href="BasicTypes.html#Activation"><span class="hs-identifier">Activation</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="NeverActive"><a href="BasicTypes.html#NeverActive"><span class="hs-identifier">NeverActive</span></a></a><span>
</span><a name="line-1176"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a name="AlwaysActive"><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier">AlwaysActive</span></a></a><span>
</span><a name="line-1177"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a name="ActiveBefore"><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier">ActiveBefore</span></a></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span> </span><a href="BasicTypes.html#PhaseNum"><span class="hs-identifier hs-type">PhaseNum</span></a><span>
</span><a name="line-1178"></a><span>                  </span><span class="hs-comment">-- Active only *strictly before* this phase</span><span>
</span><a name="line-1179"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a name="ActiveAfter"><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier">ActiveAfter</span></a></a><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span> </span><a href="BasicTypes.html#PhaseNum"><span class="hs-identifier hs-type">PhaseNum</span></a><span>
</span><a name="line-1180"></a><span>                  </span><span class="hs-comment">-- Active in this phase and later</span><span>
</span><a name="line-1181"></a><span>                </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-1182"></a><span>                  </span><span class="hs-comment">-- Eq used in comparing rules in HsDecls</span><span>
</span><a name="line-1183"></a><span>
</span><a name="line-1184"></a><span class="hs-comment">-- | Rule Match Information</span><span>
</span><a name="line-1185"></a><span class="hs-keyword">data</span><span> </span><a name="RuleMatchInfo"><a href="BasicTypes.html#RuleMatchInfo"><span class="hs-identifier">RuleMatchInfo</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="ConLike"><a href="BasicTypes.html#ConLike"><span class="hs-identifier">ConLike</span></a></a><span>                    </span><span class="hs-comment">-- See Note [CONLIKE pragma]</span><span>
</span><a name="line-1186"></a><span>                   </span><span class="hs-glyph">|</span><span> </span><a name="FunLike"><a href="BasicTypes.html#FunLike"><span class="hs-identifier">FunLike</span></a></a><span>
</span><a name="line-1187"></a><span>                   </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-1188"></a><span>        </span><span class="hs-comment">-- Show needed for Lexer.x</span><span>
</span><a name="line-1189"></a><span>
</span><a name="line-1190"></a><span class="hs-keyword">data</span><span> </span><a name="InlinePragma"><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier">InlinePragma</span></a></a><span>            </span><span class="hs-comment">-- Note [InlinePragma]</span><span>
</span><a name="line-1191"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="InlinePragma"><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier">InlinePragma</span></a></a><span>
</span><a name="line-1192"></a><span>      </span><span class="hs-special">{</span><span> </span><a name="inl_src"><a href="BasicTypes.html#inl_src"><span class="hs-identifier">inl_src</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span> </span><span class="hs-comment">-- Note [Pragma source text]</span><span>
</span><a name="line-1193"></a><span>      </span><span class="hs-special">,</span><span> </span><a name="inl_inline"><a href="BasicTypes.html#inl_inline"><span class="hs-identifier">inl_inline</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlineSpec"><span class="hs-identifier hs-type">InlineSpec</span></a><span> </span><span class="hs-comment">-- See Note [inl_inline and inl_act]</span><span>
</span><a name="line-1194"></a><span>
</span><a name="line-1195"></a><span>      </span><span class="hs-special">,</span><span> </span><a name="inl_sat"><a href="BasicTypes.html#inl_sat"><span class="hs-identifier">inl_sat</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="BasicTypes.html#Arity"><span class="hs-identifier hs-type">Arity</span></a><span>    </span><span class="hs-comment">-- Just n &lt;=&gt; Inline only when applied to n</span><span>
</span><a name="line-1196"></a><span>                                     </span><span class="hs-comment">--            explicit (non-type, non-dictionary) args</span><span>
</span><a name="line-1197"></a><span>                                     </span><span class="hs-comment">--   That is, inl_sat describes the number of *source-code*</span><span>
</span><a name="line-1198"></a><span>                                     </span><span class="hs-comment">--   arguments the thing must be applied to.  We add on the</span><span>
</span><a name="line-1199"></a><span>                                     </span><span class="hs-comment">--   number of implicit, dictionary arguments when making</span><span>
</span><a name="line-1200"></a><span>                                     </span><span class="hs-comment">--   the Unfolding, and don't look at inl_sat further</span><span>
</span><a name="line-1201"></a><span>
</span><a name="line-1202"></a><span>      </span><span class="hs-special">,</span><span> </span><a name="inl_act"><a href="BasicTypes.html#inl_act"><span class="hs-identifier">inl_act</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span>     </span><span class="hs-comment">-- Says during which phases inlining is allowed</span><span>
</span><a name="line-1203"></a><span>                                     </span><span class="hs-comment">-- See Note [inl_inline and inl_act]</span><span>
</span><a name="line-1204"></a><span>
</span><a name="line-1205"></a><span>      </span><span class="hs-special">,</span><span> </span><a name="inl_rule"><a href="BasicTypes.html#inl_rule"><span class="hs-identifier">inl_rule</span></a></a><span>   </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a><span>  </span><span class="hs-comment">-- Should the function be treated like a constructor?</span><span>
</span><a name="line-1206"></a><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-1207"></a><span>
</span><a name="line-1208"></a><span class="hs-comment">-- | Inline Specification</span><span>
</span><a name="line-1209"></a><span class="hs-keyword">data</span><span> </span><a name="InlineSpec"><a href="BasicTypes.html#InlineSpec"><span class="hs-identifier">InlineSpec</span></a></a><span>   </span><span class="hs-comment">-- What the user's INLINE pragma looked like</span><span>
</span><a name="line-1210"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="Inline"><a href="BasicTypes.html#Inline"><span class="hs-identifier">Inline</span></a></a><span>       </span><span class="hs-comment">-- User wrote INLINE</span><span>
</span><a name="line-1211"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Inlinable"><a href="BasicTypes.html#Inlinable"><span class="hs-identifier">Inlinable</span></a></a><span>    </span><span class="hs-comment">-- User wrote INLINABLE</span><span>
</span><a name="line-1212"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="NoInline"><a href="BasicTypes.html#NoInline"><span class="hs-identifier">NoInline</span></a></a><span>     </span><span class="hs-comment">-- User wrote NOINLINE</span><span>
</span><a name="line-1213"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="NoUserInline"><a href="BasicTypes.html#NoUserInline"><span class="hs-identifier">NoUserInline</span></a></a><span> </span><span class="hs-comment">-- User did not write any of INLINE/INLINABLE/NOINLINE</span><span>
</span><a name="line-1214"></a><span>                 </span><span class="hs-comment">-- e.g. in `defaultInlinePragma` or when created by CSE</span><span>
</span><a name="line-1215"></a><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-1216"></a><span>        </span><span class="hs-comment">-- Show needed for Lexer.x</span><span>
</span><a name="line-1217"></a><span>
</span><a name="line-1218"></a><span class="hs-comment">{- Note [InlinePragma]
~~~~~~~~~~~~~~~~~~~~~~
This data type mirrors what you can write in an INLINE or NOINLINE pragma in
the source program.

If you write nothing at all, you get defaultInlinePragma:
   inl_inline = NoUserInline
   inl_act    = AlwaysActive
   inl_rule   = FunLike

It's not possible to get that combination by *writing* something, so
if an Id has defaultInlinePragma it means the user didn't specify anything.

If inl_inline = Inline or Inlineable, then the Id should have an InlineRule unfolding.

If you want to know where InlinePragmas take effect: Look in DsBinds.makeCorePair

Note [inl_inline and inl_act]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* inl_inline says what the user wrote: did she say INLINE, NOINLINE,
  INLINABLE, or nothing at all

* inl_act says in what phases the unfolding is active or inactive
  E.g  If you write INLINE[1]    then inl_act will be set to ActiveAfter 1
       If you write NOINLINE[1]  then inl_act will be set to ActiveBefore 1
       If you write NOINLINE[~1] then inl_act will be set to ActiveAfter 1
  So note that inl_act does not say what pragma you wrote: it just
  expresses its consequences

* inl_act just says when the unfolding is active; it doesn't say what
  to inline.  If you say INLINE f, then f's inl_act will be AlwaysActive,
  but in addition f will get a &quot;stable unfolding&quot; with UnfoldingGuidance
  that tells the inliner to be pretty eager about it.

Note [CONLIKE pragma]
~~~~~~~~~~~~~~~~~~~~~
The ConLike constructor of a RuleMatchInfo is aimed at the following.
Consider first
    {-# RULE &quot;r/cons&quot; forall a as. r (a:as) = f (a+1) #-}
    g b bs = let x = b:bs in ..x...x...(r x)...
Now, the rule applies to the (r x) term, because GHC &quot;looks through&quot;
the definition of 'x' to see that it is (b:bs).

Now consider
    {-# RULE &quot;r/f&quot; forall v. r (f v) = f (v+1) #-}
    g v = let x = f v in ..x...x...(r x)...
Normally the (r x) would *not* match the rule, because GHC would be
scared about duplicating the redex (f v), so it does not &quot;look
through&quot; the bindings.

However the CONLIKE modifier says to treat 'f' like a constructor in
this situation, and &quot;look through&quot; the unfolding for x.  So (r x)
fires, yielding (f (v+1)).

This is all controlled with a user-visible pragma:
     {-# NOINLINE CONLIKE [1] f #-}

The main effects of CONLIKE are:

    - The occurrence analyser (OccAnal) and simplifier (Simplify) treat
      CONLIKE thing like constructors, by ANF-ing them

    - New function CoreUtils.exprIsExpandable is like exprIsCheap, but
      additionally spots applications of CONLIKE functions

    - A CoreUnfolding has a field that caches exprIsExpandable

    - The rule matcher consults this field.  See
      Note [Expanding variables] in Rules.hs.
-}</span><span>
</span><a name="line-1288"></a><span>
</span><a name="line-1289"></a><span class="hs-identifier">isConLike</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1290"></a><a name="isConLike"><a href="BasicTypes.html#isConLike"><span class="hs-identifier">isConLike</span></a></a><span> </span><a href="BasicTypes.html#ConLike"><span class="hs-identifier hs-var">ConLike</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1291"></a><span class="hs-identifier">isConLike</span><span> </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1292"></a><span>
</span><a name="line-1293"></a><span class="hs-identifier">isFunLike</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1294"></a><a name="isFunLike"><a href="BasicTypes.html#isFunLike"><span class="hs-identifier">isFunLike</span></a></a><span> </span><a href="BasicTypes.html#FunLike"><span class="hs-identifier hs-var">FunLike</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1295"></a><span class="hs-identifier">isFunLike</span><span> </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1296"></a><span>
</span><a name="line-1297"></a><span class="hs-identifier">noUserInlineSpec</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlineSpec"><span class="hs-identifier hs-type">InlineSpec</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1298"></a><a name="noUserInlineSpec"><a href="BasicTypes.html#noUserInlineSpec"><span class="hs-identifier">noUserInlineSpec</span></a></a><span> </span><a href="BasicTypes.html#NoUserInline"><span class="hs-identifier hs-var">NoUserInline</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1299"></a><span class="hs-identifier">noUserInlineSpec</span><span> </span><span class="hs-identifier">_</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1300"></a><span>
</span><a name="line-1301"></a><span class="hs-identifier">defaultInlinePragma</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">alwaysInlinePragma</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">neverInlinePragma</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">dfunInlinePragma</span><span>
</span><a name="line-1302"></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span>
</span><a name="line-1303"></a><a name="defaultInlinePragma"><a href="BasicTypes.html#defaultInlinePragma"><span class="hs-identifier">defaultInlinePragma</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-var">InlinePragma</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_src</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><span class="hs-string">&quot;{-# INLINE&quot;</span><span>
</span><a name="line-1304"></a><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_act</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>
</span><a name="line-1305"></a><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_rule</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#FunLike"><span class="hs-identifier hs-var">FunLike</span></a><span>
</span><a name="line-1306"></a><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_inline</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NoUserInline"><span class="hs-identifier hs-var">NoUserInline</span></a><span>
</span><a name="line-1307"></a><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_sat</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1308"></a><span>
</span><a name="line-1309"></a><a name="alwaysInlinePragma"><a href="BasicTypes.html#alwaysInlinePragma"><span class="hs-identifier">alwaysInlinePragma</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#defaultInlinePragma"><span class="hs-identifier hs-var">defaultInlinePragma</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_inline</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Inline"><span class="hs-identifier hs-var">Inline</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1310"></a><a name="neverInlinePragma"><a href="BasicTypes.html#neverInlinePragma"><span class="hs-identifier">neverInlinePragma</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#defaultInlinePragma"><span class="hs-identifier hs-var">defaultInlinePragma</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_act</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1311"></a><span>
</span><a name="line-1312"></a><span class="hs-identifier">inlinePragmaSpec</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#InlineSpec"><span class="hs-identifier hs-type">InlineSpec</span></a><span>
</span><a name="line-1313"></a><a name="inlinePragmaSpec"><a href="BasicTypes.html#inlinePragmaSpec"><span class="hs-identifier">inlinePragmaSpec</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">inl_inline</span><span>
</span><a name="line-1314"></a><span>
</span><a name="line-1315"></a><span class="hs-comment">-- A DFun has an always-active inline activation so that</span><span>
</span><a name="line-1316"></a><span class="hs-comment">-- exprIsConApp_maybe can &quot;see&quot; its unfolding</span><span>
</span><a name="line-1317"></a><span class="hs-comment">-- (However, its actual Unfolding is a DFunUnfolding, which is</span><span>
</span><a name="line-1318"></a><span class="hs-comment">--  never inlined other than via exprIsConApp_maybe.)</span><span>
</span><a name="line-1319"></a><a name="dfunInlinePragma"><a href="BasicTypes.html#dfunInlinePragma"><span class="hs-identifier">dfunInlinePragma</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#defaultInlinePragma"><span class="hs-identifier hs-var">defaultInlinePragma</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_act</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>
</span><a name="line-1320"></a><span>                                         </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_rule</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#ConLike"><span class="hs-identifier hs-var">ConLike</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1321"></a><span>
</span><a name="line-1322"></a><span class="hs-identifier">isDefaultInlinePragma</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1323"></a><a name="isDefaultInlinePragma"><a href="BasicTypes.html#isDefaultInlinePragma"><span class="hs-identifier">isDefaultInlinePragma</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-var">InlinePragma</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_act</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214749"><a href="#local-6989586621680214749"><span class="hs-identifier">activation</span></a></a><span>
</span><a name="line-1324"></a><span>                                    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_rule</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214750"><a href="#local-6989586621680214750"><span class="hs-identifier">match_info</span></a></a><span>
</span><a name="line-1325"></a><span>                                    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_inline</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214751"><a href="#local-6989586621680214751"><span class="hs-identifier">inline</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-1326"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#noUserInlineSpec"><span class="hs-identifier hs-var">noUserInlineSpec</span></a><span> </span><a href="#local-6989586621680214751"><span class="hs-identifier hs-var">inline</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><a href="BasicTypes.html#isAlwaysActive"><span class="hs-identifier hs-var">isAlwaysActive</span></a><span> </span><a href="#local-6989586621680214749"><span class="hs-identifier hs-var">activation</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><a href="BasicTypes.html#isFunLike"><span class="hs-identifier hs-var">isFunLike</span></a><span> </span><a href="#local-6989586621680214750"><span class="hs-identifier hs-var">match_info</span></a><span>
</span><a name="line-1327"></a><span>
</span><a name="line-1328"></a><span class="hs-identifier">isInlinePragma</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1329"></a><a name="isInlinePragma"><a href="BasicTypes.html#isInlinePragma"><span class="hs-identifier">isInlinePragma</span></a></a><span> </span><a name="local-6989586621680214752"><a href="#local-6989586621680214752"><span class="hs-identifier">prag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">inl_inline</span><span> </span><a href="#local-6989586621680214752"><span class="hs-identifier hs-var">prag</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1330"></a><span>                        </span><a href="BasicTypes.html#Inline"><span class="hs-identifier hs-var">Inline</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1331"></a><span>                        </span><span class="hs-identifier">_</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1332"></a><span>
</span><a name="line-1333"></a><span class="hs-identifier">isInlinablePragma</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1334"></a><a name="isInlinablePragma"><a href="BasicTypes.html#isInlinablePragma"><span class="hs-identifier">isInlinablePragma</span></a></a><span> </span><a name="local-6989586621680214753"><a href="#local-6989586621680214753"><span class="hs-identifier">prag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">inl_inline</span><span> </span><a href="#local-6989586621680214753"><span class="hs-identifier hs-var">prag</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1335"></a><span>                           </span><a href="BasicTypes.html#Inlinable"><span class="hs-identifier hs-var">Inlinable</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1336"></a><span>                           </span><span class="hs-identifier">_</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1337"></a><span>
</span><a name="line-1338"></a><span class="hs-identifier">isAnyInlinePragma</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1339"></a><span class="hs-comment">-- INLINE or INLINABLE</span><span>
</span><a name="line-1340"></a><a name="isAnyInlinePragma"><a href="BasicTypes.html#isAnyInlinePragma"><span class="hs-identifier">isAnyInlinePragma</span></a></a><span> </span><a name="local-6989586621680214754"><a href="#local-6989586621680214754"><span class="hs-identifier">prag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">inl_inline</span><span> </span><a href="#local-6989586621680214754"><span class="hs-identifier hs-var">prag</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1341"></a><span>                        </span><a href="BasicTypes.html#Inline"><span class="hs-identifier hs-var">Inline</span></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1342"></a><span>                        </span><a href="BasicTypes.html#Inlinable"><span class="hs-identifier hs-var">Inlinable</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1343"></a><span>                        </span><span class="hs-identifier">_</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1344"></a><span>
</span><a name="line-1345"></a><span class="hs-identifier">inlinePragmaSat</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="BasicTypes.html#Arity"><span class="hs-identifier hs-type">Arity</span></a><span>
</span><a name="line-1346"></a><a name="inlinePragmaSat"><a href="BasicTypes.html#inlinePragmaSat"><span class="hs-identifier">inlinePragmaSat</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">inl_sat</span><span>
</span><a name="line-1347"></a><span>
</span><a name="line-1348"></a><span class="hs-identifier">inlinePragmaActivation</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span>
</span><a name="line-1349"></a><a name="inlinePragmaActivation"><a href="BasicTypes.html#inlinePragmaActivation"><span class="hs-identifier">inlinePragmaActivation</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-var">InlinePragma</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_act</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214755"><a href="#local-6989586621680214755"><span class="hs-identifier">activation</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214755"><span class="hs-identifier hs-var">activation</span></a><span>
</span><a name="line-1350"></a><span>
</span><a name="line-1351"></a><span class="hs-identifier">inlinePragmaRuleMatchInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a><span>
</span><a name="line-1352"></a><a name="inlinePragmaRuleMatchInfo"><a href="BasicTypes.html#inlinePragmaRuleMatchInfo"><span class="hs-identifier">inlinePragmaRuleMatchInfo</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-var">InlinePragma</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_rule</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214756"><a href="#local-6989586621680214756"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214756"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-1353"></a><span>
</span><a name="line-1354"></a><span class="hs-identifier">setInlinePragmaActivation</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span>
</span><a name="line-1355"></a><a name="setInlinePragmaActivation"><a href="BasicTypes.html#setInlinePragmaActivation"><span class="hs-identifier">setInlinePragmaActivation</span></a></a><span> </span><a name="local-6989586621680214757"><a href="#local-6989586621680214757"><span class="hs-identifier">prag</span></a></a><span> </span><a name="local-6989586621680214758"><a href="#local-6989586621680214758"><span class="hs-identifier">activation</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214757"><span class="hs-identifier hs-var">prag</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_act</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214758"><span class="hs-identifier hs-var">activation</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1356"></a><span>
</span><a name="line-1357"></a><span class="hs-identifier">setInlinePragmaRuleMatchInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span>
</span><a name="line-1358"></a><a name="setInlinePragmaRuleMatchInfo"><a href="BasicTypes.html#setInlinePragmaRuleMatchInfo"><span class="hs-identifier">setInlinePragmaRuleMatchInfo</span></a></a><span> </span><a name="local-6989586621680214759"><a href="#local-6989586621680214759"><span class="hs-identifier">prag</span></a></a><span> </span><a name="local-6989586621680214760"><a href="#local-6989586621680214760"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214759"><span class="hs-identifier hs-var">prag</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_rule</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214760"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1359"></a><span>
</span><a name="line-1360"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1361"></a><span>   </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>       </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-1362"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;~&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-1363"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214661"><a href="#local-6989586621680214661"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'~'</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680214661"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-1364"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span>  </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214662"><a href="#local-6989586621680214662"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680214662"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-1365"></a><span>
</span><a name="line-1366"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1367"></a><span>   </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#ConLike"><span class="hs-identifier hs-var">ConLike</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;CONLIKE&quot;</span><span>
</span><a name="line-1368"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#FunLike"><span class="hs-identifier hs-var">FunLike</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;FUNLIKE&quot;</span><span>
</span><a name="line-1369"></a><span>
</span><a name="line-1370"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#InlineSpec"><span class="hs-identifier hs-type">InlineSpec</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1371"></a><span>   </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#Inline"><span class="hs-identifier hs-var">Inline</span></a><span>       </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;INLINE&quot;</span><span>
</span><a name="line-1372"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#NoInline"><span class="hs-identifier hs-var">NoInline</span></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;NOINLINE&quot;</span><span>
</span><a name="line-1373"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#Inlinable"><span class="hs-identifier hs-var">Inlinable</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;INLINABLE&quot;</span><span>
</span><a name="line-1374"></a><span>   </span><span class="hs-identifier">ppr</span><span> </span><a href="BasicTypes.html#NoUserInline"><span class="hs-identifier hs-var">NoUserInline</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;NOUSERINLINE&quot;</span><span> </span><span class="hs-comment">-- what is better?</span><span>
</span><a name="line-1375"></a><span>
</span><a name="line-1376"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1377"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#pprInline"><span class="hs-identifier hs-var">pprInline</span></a><span>
</span><a name="line-1378"></a><span>
</span><a name="line-1379"></a><span class="hs-identifier">pprInline</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-1380"></a><a name="pprInline"><a href="BasicTypes.html#pprInline"><span class="hs-identifier">pprInline</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#pprInline%27"><span class="hs-identifier hs-var">pprInline'</span></a><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1381"></a><span>
</span><a name="line-1382"></a><span class="hs-identifier">pprInlineDebug</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-1383"></a><a name="pprInlineDebug"><a href="BasicTypes.html#pprInlineDebug"><span class="hs-identifier">pprInlineDebug</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#pprInline%27"><span class="hs-identifier hs-var">pprInline'</span></a><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1384"></a><span>
</span><a name="line-1385"></a><span class="hs-identifier">pprInline'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>           </span><span class="hs-comment">-- True &lt;=&gt; do not display the inl_inline field</span><span>
</span><a name="line-1386"></a><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a><span>
</span><a name="line-1387"></a><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-1388"></a><a name="pprInline%27"><a href="BasicTypes.html#pprInline%27"><span class="hs-identifier">pprInline'</span></a></a><span> </span><a name="local-6989586621680214761"><a href="#local-6989586621680214761"><span class="hs-identifier">emptyInline</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#InlinePragma"><span class="hs-identifier hs-var">InlinePragma</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">inl_inline</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214762"><a href="#local-6989586621680214762"><span class="hs-identifier">inline</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_act</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214763"><a href="#local-6989586621680214763"><span class="hs-identifier">activation</span></a></a><span>
</span><a name="line-1389"></a><span>                                    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_rule</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214764"><a href="#local-6989586621680214764"><span class="hs-identifier">info</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">inl_sat</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621680214765"><a href="#local-6989586621680214765"><span class="hs-identifier">mb_arity</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-1390"></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214766"><span class="hs-identifier hs-var">pp_inl</span></a><span> </span><a href="#local-6989586621680214762"><span class="hs-identifier hs-var">inline</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="#local-6989586621680214767"><span class="hs-identifier hs-var">pp_act</span></a><span> </span><a href="#local-6989586621680214762"><span class="hs-identifier hs-var">inline</span></a><span> </span><a href="#local-6989586621680214763"><span class="hs-identifier hs-var">activation</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-6989586621680214768"><span class="hs-identifier hs-var">pp_sat</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-6989586621680214769"><span class="hs-identifier hs-var">pp_info</span></a><span>
</span><a name="line-1391"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-1392"></a><span>      </span><a name="local-6989586621680214766"><a href="#local-6989586621680214766"><span class="hs-identifier">pp_inl</span></a></a><span> </span><a name="local-6989586621680214770"><a href="#local-6989586621680214770"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621680214761"><span class="hs-identifier hs-var">emptyInline</span></a><span> </span><span class="hs-keyword">then</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span> </span><span class="hs-keyword">else</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680214770"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-1393"></a><span>
</span><a name="line-1394"></a><span>      </span><a name="local-6989586621680214767"><a href="#local-6989586621680214767"><span class="hs-identifier">pp_act</span></a></a><span> </span><a href="BasicTypes.html#Inline"><span class="hs-identifier hs-var">Inline</span></a><span>   </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-1395"></a><span>      </span><span class="hs-identifier">pp_act</span><span> </span><a href="BasicTypes.html#NoInline"><span class="hs-identifier hs-var">NoInline</span></a><span> </span><a href="BasicTypes.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-1396"></a><span>      </span><span class="hs-identifier">pp_act</span><span> </span><span class="hs-identifier">_</span><span>        </span><a name="local-6989586621680214771"><a href="#local-6989586621680214771"><span class="hs-identifier">act</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680214771"><span class="hs-identifier hs-var">act</span></a><span>
</span><a name="line-1397"></a><span>
</span><a name="line-1398"></a><span>      </span><a name="local-6989586621680214768"><a href="#local-6989586621680214768"><span class="hs-identifier">pp_sat</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621680214772"><a href="#local-6989586621680214772"><span class="hs-identifier">ar</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621680214765"><span class="hs-identifier hs-var">mb_arity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;sat-args=&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680214772"><span class="hs-identifier hs-var">ar</span></a><span class="hs-special">)</span><span>
</span><a name="line-1399"></a><span>             </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>           </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-1400"></a><span>      </span><a name="local-6989586621680214769"><a href="#local-6989586621680214769"><span class="hs-identifier">pp_info</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="BasicTypes.html#isFunLike"><span class="hs-identifier hs-var">isFunLike</span></a><span> </span><a href="#local-6989586621680214764"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-1401"></a><span>              </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-6989586621680214764"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-1402"></a><span>
</span><a name="line-1403"></a><span class="hs-identifier">isActive</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#CompilerPhase"><span class="hs-identifier hs-type">CompilerPhase</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1404"></a><a name="isActive"><a href="BasicTypes.html#isActive"><span class="hs-identifier">isActive</span></a></a><span> </span><a href="BasicTypes.html#InitialPhase"><span class="hs-identifier hs-var">InitialPhase</span></a><span> </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1405"></a><span class="hs-identifier">isActive</span><span> </span><a href="BasicTypes.html#InitialPhase"><span class="hs-identifier hs-var">InitialPhase</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1406"></a><span class="hs-identifier">isActive</span><span> </span><a href="BasicTypes.html#InitialPhase"><span class="hs-identifier hs-var">InitialPhase</span></a><span> </span><span class="hs-identifier">_</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1407"></a><span class="hs-identifier">isActive</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Phase"><span class="hs-identifier hs-var">Phase</span></a><span> </span><a name="local-6989586621680214773"><a href="#local-6989586621680214773"><span class="hs-identifier">p</span></a></a><span class="hs-special">)</span><span>    </span><a name="local-6989586621680214774"><a href="#local-6989586621680214774"><span class="hs-identifier">act</span></a></a><span>               </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#isActiveIn"><span class="hs-identifier hs-var">isActiveIn</span></a><span> </span><a href="#local-6989586621680214773"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="#local-6989586621680214774"><span class="hs-identifier hs-var">act</span></a><span>
</span><a name="line-1408"></a><span>
</span><a name="line-1409"></a><span class="hs-identifier">isActiveIn</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#PhaseNum"><span class="hs-identifier hs-type">PhaseNum</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1410"></a><a name="isActiveIn"><a href="BasicTypes.html#isActiveIn"><span class="hs-identifier">isActiveIn</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a href="BasicTypes.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1411"></a><span class="hs-identifier">isActiveIn</span><span> </span><span class="hs-identifier">_</span><span> </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1412"></a><span class="hs-identifier">isActiveIn</span><span> </span><a name="local-6989586621680214775"><a href="#local-6989586621680214775"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214776"><a href="#local-6989586621680214776"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214775"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-operator hs-var">&lt;=</span><span> </span><a href="#local-6989586621680214776"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-1413"></a><span class="hs-identifier">isActiveIn</span><span> </span><a name="local-6989586621680214777"><a href="#local-6989586621680214777"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214778"><a href="#local-6989586621680214778"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214777"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span>  </span><a href="#local-6989586621680214778"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-1414"></a><span>
</span><a name="line-1415"></a><span class="hs-identifier">competesWith</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1416"></a><span class="hs-comment">-- See Note [Activation competition]</span><span>
</span><a name="line-1417"></a><a name="competesWith"><a href="BasicTypes.html#competesWith"><span class="hs-identifier">competesWith</span></a></a><span> </span><a href="BasicTypes.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a><span>       </span><span class="hs-identifier">_</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1418"></a><span class="hs-identifier">competesWith</span><span> </span><span class="hs-identifier">_</span><span>                 </span><a href="BasicTypes.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1419"></a><span class="hs-identifier">competesWith</span><span> </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>      </span><span class="hs-identifier">_</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1420"></a><span>
</span><a name="line-1421"></a><span class="hs-identifier">competesWith</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1422"></a><span class="hs-identifier">competesWith</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1423"></a><span class="hs-identifier">competesWith</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214779"><a href="#local-6989586621680214779"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214780"><a href="#local-6989586621680214780"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214779"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">&lt;</span><span> </span><a href="#local-6989586621680214780"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-1424"></a><span>
</span><a name="line-1425"></a><span class="hs-identifier">competesWith</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1426"></a><span class="hs-identifier">competesWith</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1427"></a><span class="hs-identifier">competesWith</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214781"><a href="#local-6989586621680214781"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveAfter"><span class="hs-identifier hs-var">ActiveAfter</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214782"><a href="#local-6989586621680214782"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214781"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">&gt;=</span><span> </span><a href="#local-6989586621680214782"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-1428"></a><span>
</span><a name="line-1429"></a><span class="hs-comment">{- Note [Competing activations]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sometimes a RULE and an inlining may compete, or two RULES.
See Note [Rules and inlining/other rules] in Desugar.

We say that act1 &quot;competes with&quot; act2 iff
   act1 is active in the phase when act2 *becomes* active
NB: remember that phases count *down*: 2, 1, 0!

It's too conservative to ensure that the two are never simultaneously
active.  For example, a rule might be always active, and an inlining
might switch on in phase 2.  We could switch off the rule, but it does
no harm.
-}</span><span>
</span><a name="line-1443"></a><span>
</span><a name="line-1444"></a><span class="hs-identifier">isNeverActive</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">isAlwaysActive</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">isEarlyActive</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#Activation"><span class="hs-identifier hs-type">Activation</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1445"></a><a name="isNeverActive"><a href="BasicTypes.html#isNeverActive"><span class="hs-identifier">isNeverActive</span></a></a><span> </span><a href="BasicTypes.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1446"></a><span class="hs-identifier">isNeverActive</span><span> </span><span class="hs-identifier">_</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1447"></a><span>
</span><a name="line-1448"></a><a name="isAlwaysActive"><a href="BasicTypes.html#isAlwaysActive"><span class="hs-identifier">isAlwaysActive</span></a></a><span> </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1449"></a><span class="hs-identifier">isAlwaysActive</span><span> </span><span class="hs-identifier">_</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1450"></a><span>
</span><a name="line-1451"></a><a name="isEarlyActive"><a href="BasicTypes.html#isEarlyActive"><span class="hs-identifier">isEarlyActive</span></a></a><span> </span><a href="BasicTypes.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1452"></a><span class="hs-identifier">isEarlyActive</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#ActiveBefore"><span class="hs-identifier hs-var">ActiveBefore</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-1453"></a><span class="hs-identifier">isEarlyActive</span><span> </span><span class="hs-identifier">_</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1454"></a><span>
</span><a name="line-1455"></a><span class="hs-comment">-- | Integral Literal</span><span>
</span><a name="line-1456"></a><span class="hs-comment">--</span><span>
</span><a name="line-1457"></a><span class="hs-comment">-- Used (instead of Integer) to represent negative zegative zero which is</span><span>
</span><a name="line-1458"></a><span class="hs-comment">-- required for NegativeLiterals extension to correctly parse `-0::Double`</span><span>
</span><a name="line-1459"></a><span class="hs-comment">-- as negative zero. See also #13211.</span><span>
</span><a name="line-1460"></a><span class="hs-keyword">data</span><span> </span><a name="IntegralLit"><a href="BasicTypes.html#IntegralLit"><span class="hs-identifier">IntegralLit</span></a></a><span>
</span><a name="line-1461"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="IL"><a href="BasicTypes.html#IL"><span class="hs-identifier">IL</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="il_text"><a href="BasicTypes.html#il_text"><span class="hs-identifier">il_text</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span>
</span><a name="line-1462"></a><span>       </span><span class="hs-special">,</span><span> </span><a name="il_neg"><a href="BasicTypes.html#il_neg"><span class="hs-identifier">il_neg</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-comment">-- See Note [Negative zero]</span><span>
</span><a name="line-1463"></a><span>       </span><span class="hs-special">,</span><span> </span><a name="il_value"><a href="BasicTypes.html#il_value"><span class="hs-identifier">il_value</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-1464"></a><span>       </span><span class="hs-special">}</span><span>
</span><a name="line-1465"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-1466"></a><span>
</span><a name="line-1467"></a><span class="hs-identifier">mkIntegralLit</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Integral</span><span> </span><a href="#local-6989586621680214696"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621680214696"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntegralLit"><span class="hs-identifier hs-type">IntegralLit</span></a><span>
</span><a name="line-1468"></a><a name="mkIntegralLit"><a href="BasicTypes.html#mkIntegralLit"><span class="hs-identifier">mkIntegralLit</span></a></a><span> </span><a name="local-6989586621680214783"><a href="#local-6989586621680214783"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#IL"><span class="hs-identifier hs-var">IL</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">il_text</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621680214784"><span class="hs-identifier hs-var">i_integer</span></a><span class="hs-special">)</span><span>
</span><a name="line-1469"></a><span>                     </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">il_neg</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214783"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-operator hs-var">&lt;</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-1470"></a><span>                     </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">il_value</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214784"><span class="hs-identifier hs-var">i_integer</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1471"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-1472"></a><span>    </span><span class="hs-identifier">i_integer</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-1473"></a><span>    </span><a name="local-6989586621680214784"><a href="#local-6989586621680214784"><span class="hs-identifier">i_integer</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><a href="#local-6989586621680214783"><span class="hs-identifier hs-var">i</span></a><span>
</span><a name="line-1474"></a><span>
</span><a name="line-1475"></a><span class="hs-identifier">negateIntegralLit</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#IntegralLit"><span class="hs-identifier hs-type">IntegralLit</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntegralLit"><span class="hs-identifier hs-type">IntegralLit</span></a><span>
</span><a name="line-1476"></a><a name="negateIntegralLit"><a href="BasicTypes.html#negateIntegralLit"><span class="hs-identifier">negateIntegralLit</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#IL"><span class="hs-identifier hs-var">IL</span></a><span> </span><a name="local-6989586621680214785"><a href="#local-6989586621680214785"><span class="hs-identifier">text</span></a></a><span> </span><a name="local-6989586621680214786"><a href="#local-6989586621680214786"><span class="hs-identifier">neg</span></a></a><span> </span><a name="local-6989586621680214787"><a href="#local-6989586621680214787"><span class="hs-identifier">value</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1477"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680214785"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1478"></a><span>      </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-char">'-'</span><span class="hs-glyph">:</span><a name="local-6989586621680214788"><a href="#local-6989586621680214788"><span class="hs-identifier">src</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IL"><span class="hs-identifier hs-var">IL</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><a href="#local-6989586621680214788"><span class="hs-identifier hs-var">src</span></a><span class="hs-special">)</span><span>       </span><span class="hs-identifier hs-var">False</span><span>    </span><span class="hs-special">(</span><span class="hs-identifier hs-var">negate</span><span> </span><a href="#local-6989586621680214787"><span class="hs-identifier hs-var">value</span></a><span class="hs-special">)</span><span>
</span><a name="line-1479"></a><span>      </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span>      </span><a name="local-6989586621680214789"><a href="#local-6989586621680214789"><span class="hs-identifier">src</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IL"><span class="hs-identifier hs-var">IL</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-char">'-'</span><span class="hs-glyph">:</span><a href="#local-6989586621680214789"><span class="hs-identifier hs-var">src</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">True</span><span>     </span><span class="hs-special">(</span><span class="hs-identifier hs-var">negate</span><span> </span><a href="#local-6989586621680214787"><span class="hs-identifier hs-var">value</span></a><span class="hs-special">)</span><span>
</span><a name="line-1480"></a><span>      </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IL"><span class="hs-identifier hs-var">IL</span></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier hs-var">not</span><span> </span><a href="#local-6989586621680214786"><span class="hs-identifier hs-var">neg</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">negate</span><span> </span><a href="#local-6989586621680214787"><span class="hs-identifier hs-var">value</span></a><span class="hs-special">)</span><span>
</span><a name="line-1481"></a><span>
</span><a name="line-1482"></a><span class="hs-comment">-- | Fractional Literal</span><span>
</span><a name="line-1483"></a><span class="hs-comment">--</span><span>
</span><a name="line-1484"></a><span class="hs-comment">-- Used (instead of Rational) to represent exactly the floating point literal that we</span><span>
</span><a name="line-1485"></a><span class="hs-comment">-- encountered in the user's source program. This allows us to pretty-print exactly what</span><span>
</span><a name="line-1486"></a><span class="hs-comment">-- the user wrote, which is important e.g. for floating point numbers that can't represented</span><span>
</span><a name="line-1487"></a><span class="hs-comment">-- as Doubles (we used to via Double for pretty-printing). See also #2245.</span><span>
</span><a name="line-1488"></a><span class="hs-keyword">data</span><span> </span><a name="FractionalLit"><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier">FractionalLit</span></a></a><span>
</span><a name="line-1489"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="FL"><a href="BasicTypes.html#FL"><span class="hs-identifier">FL</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="fl_text"><a href="BasicTypes.html#fl_text"><span class="hs-identifier">fl_text</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a><span>     </span><span class="hs-comment">-- How the value was written in the source</span><span>
</span><a name="line-1490"></a><span>       </span><span class="hs-special">,</span><span> </span><a name="fl_neg"><a href="BasicTypes.html#fl_neg"><span class="hs-identifier">fl_neg</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>            </span><span class="hs-comment">-- See Note [Negative zero]</span><span>
</span><a name="line-1491"></a><span>       </span><span class="hs-special">,</span><span> </span><a name="fl_value"><a href="BasicTypes.html#fl_value"><span class="hs-identifier">fl_value</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Rational</span><span>      </span><span class="hs-comment">-- Numeric value of the literal</span><span>
</span><a name="line-1492"></a><span>       </span><span class="hs-special">}</span><span>
</span><a name="line-1493"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-1494"></a><span>  </span><span class="hs-comment">-- The Show instance is required for the derived Lexer.x:Token instance when DEBUG is on</span><span>
</span><a name="line-1495"></a><span>
</span><a name="line-1496"></a><span class="hs-identifier">mkFractionalLit</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Real</span><span> </span><a href="#local-6989586621680214695"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621680214695"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a><span>
</span><a name="line-1497"></a><a name="mkFractionalLit"><a href="BasicTypes.html#mkFractionalLit"><span class="hs-identifier">mkFractionalLit</span></a></a><span> </span><a name="local-6989586621680214790"><a href="#local-6989586621680214790"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#FL"><span class="hs-identifier hs-var">FL</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">fl_text</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realToFrac</span><span> </span><a href="#local-6989586621680214790"><span class="hs-identifier hs-var">r</span></a><span class="hs-glyph">::</span><span class="hs-identifier hs-type">Double</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-1498"></a><span>                           </span><span class="hs-comment">-- Converting to a Double here may technically lose</span><span>
</span><a name="line-1499"></a><span>                           </span><span class="hs-comment">-- precision (see #15502). We could alternatively</span><span>
</span><a name="line-1500"></a><span>                           </span><span class="hs-comment">-- convert to a Rational for the most accuracy, but</span><span>
</span><a name="line-1501"></a><span>                           </span><span class="hs-comment">-- it would cause Floats and Doubles to be displayed</span><span>
</span><a name="line-1502"></a><span>                           </span><span class="hs-comment">-- strangely, so we opt not to do this. (In contrast</span><span>
</span><a name="line-1503"></a><span>                           </span><span class="hs-comment">-- to mkIntegralLit, where we always convert to an</span><span>
</span><a name="line-1504"></a><span>                           </span><span class="hs-comment">-- Integer for the highest accuracy.)</span><span>
</span><a name="line-1505"></a><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fl_neg</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214790"><span class="hs-identifier hs-var">r</span></a><span> </span><span class="hs-operator hs-var">&lt;</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-1506"></a><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fl_value</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toRational</span><span> </span><a href="#local-6989586621680214790"><span class="hs-identifier hs-var">r</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1507"></a><span>
</span><a name="line-1508"></a><span class="hs-identifier">negateFractionalLit</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a><span>
</span><a name="line-1509"></a><a name="negateFractionalLit"><a href="BasicTypes.html#negateFractionalLit"><span class="hs-identifier">negateFractionalLit</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#FL"><span class="hs-identifier hs-var">FL</span></a><span> </span><a name="local-6989586621680214791"><a href="#local-6989586621680214791"><span class="hs-identifier">text</span></a></a><span> </span><a name="local-6989586621680214792"><a href="#local-6989586621680214792"><span class="hs-identifier">neg</span></a></a><span> </span><a name="local-6989586621680214793"><a href="#local-6989586621680214793"><span class="hs-identifier">value</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-1510"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621680214791"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-1511"></a><span>      </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-char">'-'</span><span class="hs-glyph">:</span><a name="local-6989586621680214794"><a href="#local-6989586621680214794"><span class="hs-identifier">src</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#FL"><span class="hs-identifier hs-var">FL</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><a href="#local-6989586621680214794"><span class="hs-identifier hs-var">src</span></a><span class="hs-special">)</span><span>     </span><span class="hs-identifier hs-var">False</span><span> </span><a href="#local-6989586621680214793"><span class="hs-identifier hs-var">value</span></a><span>
</span><a name="line-1512"></a><span>      </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span>      </span><a name="local-6989586621680214795"><a href="#local-6989586621680214795"><span class="hs-identifier">src</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#FL"><span class="hs-identifier hs-var">FL</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-char">'-'</span><span class="hs-glyph">:</span><a href="#local-6989586621680214795"><span class="hs-identifier hs-var">src</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">True</span><span>  </span><a href="#local-6989586621680214793"><span class="hs-identifier hs-var">value</span></a><span>
</span><a name="line-1513"></a><span>      </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#FL"><span class="hs-identifier hs-var">FL</span></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">not</span><span> </span><a href="#local-6989586621680214792"><span class="hs-identifier hs-var">neg</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">negate</span><span> </span><a href="#local-6989586621680214793"><span class="hs-identifier hs-var">value</span></a><span class="hs-special">)</span><span>
</span><a name="line-1514"></a><span>
</span><a name="line-1515"></a><span class="hs-identifier">integralFractionalLit</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a><span>
</span><a name="line-1516"></a><a name="integralFractionalLit"><a href="BasicTypes.html#integralFractionalLit"><span class="hs-identifier">integralFractionalLit</span></a></a><span> </span><a name="local-6989586621680214796"><a href="#local-6989586621680214796"><span class="hs-identifier">neg</span></a></a><span> </span><a name="local-6989586621680214797"><a href="#local-6989586621680214797"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#FL"><span class="hs-identifier hs-var">FL</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">fl_text</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621680214797"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-1517"></a><span>                                   </span><span class="hs-identifier">fl_neg</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214796"><span class="hs-identifier hs-var">neg</span></a><span class="hs-special">,</span><span>
</span><a name="line-1518"></a><span>                                   </span><span class="hs-identifier">fl_value</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fromInteger</span><span> </span><a href="#local-6989586621680214797"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-1519"></a><span>
</span><a name="line-1520"></a><span class="hs-comment">-- Comparison operations are needed when grouping literals</span><span>
</span><a name="line-1521"></a><span class="hs-comment">-- for compiling pattern-matching (module MatchLit)</span><span>
</span><a name="line-1522"></a><span>
</span><a name="line-1523"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="BasicTypes.html#IntegralLit"><span class="hs-identifier hs-type">IntegralLit</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1524"></a><span>  </span><span class="hs-special">(</span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">==</span><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">on</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">il_value</span><span>
</span><a name="line-1525"></a><span>
</span><a name="line-1526"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="BasicTypes.html#IntegralLit"><span class="hs-identifier hs-type">IntegralLit</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1527"></a><span>  </span><a name="local-8214565720323790496"><span class="hs-identifier">compare</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">compare</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">on</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">il_value</span><span>
</span><a name="line-1528"></a><span>
</span><a name="line-1529"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#IntegralLit"><span class="hs-identifier hs-type">IntegralLit</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1530"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#IL"><span class="hs-identifier hs-var">IL</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#SourceText"><span class="hs-identifier hs-var">SourceText</span></a><span> </span><a name="local-6989586621680214659"><a href="#local-6989586621680214659"><span class="hs-identifier">src</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><a href="#local-6989586621680214659"><span class="hs-identifier hs-var">src</span></a><span>
</span><a name="line-1531"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#IL"><span class="hs-identifier hs-var">IL</span></a><span> </span><a href="BasicTypes.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621680214660"><a href="#local-6989586621680214660"><span class="hs-identifier">value</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621680214660"><span class="hs-identifier hs-var">value</span></a><span class="hs-special">)</span><span>
</span><a name="line-1532"></a><span>
</span><a name="line-1533"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1534"></a><span>  </span><span class="hs-special">(</span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">==</span><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">on</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">fl_value</span><span>
</span><a name="line-1535"></a><span>
</span><a name="line-1536"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1537"></a><span>  </span><a name="local-8214565720323790496"><span class="hs-identifier">compare</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">compare</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">on</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">fl_value</span><span>
</span><a name="line-1538"></a><span>
</span><a name="line-1539"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#FractionalLit"><span class="hs-identifier hs-type">FractionalLit</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1540"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a name="local-6989586621680214658"><a href="#local-6989586621680214658"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#pprWithSourceText"><span class="hs-identifier hs-var">pprWithSourceText</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">fl_text</span><span> </span><a href="#local-6989586621680214658"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#rational"><span class="hs-identifier hs-var">rational</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">fl_value</span><span> </span><a href="#local-6989586621680214658"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-1541"></a><span>
</span><a name="line-1542"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
    IntWithInf
*                                                                      *
************************************************************************

Represents an integer or positive infinity

-}</span><span>
</span><a name="line-1552"></a><span>
</span><a name="line-1553"></a><span class="hs-comment">-- | An integer or infinity</span><span>
</span><a name="line-1554"></a><span class="hs-keyword">data</span><span> </span><a name="IntWithInf"><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier">IntWithInf</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Int"><a href="BasicTypes.html#Int"><span class="hs-identifier">Int</span></a></a><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-1555"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a name="Infinity"><a href="BasicTypes.html#Infinity"><span class="hs-identifier">Infinity</span></a></a><span>
</span><a name="line-1556"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Eq</span><span>
</span><a name="line-1557"></a><span>
</span><a name="line-1558"></a><span class="hs-comment">-- | A representation of infinity</span><span>
</span><a name="line-1559"></a><span class="hs-identifier">infinity</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span>
</span><a name="line-1560"></a><a name="infinity"><a href="BasicTypes.html#infinity"><span class="hs-identifier">infinity</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span>
</span><a name="line-1561"></a><span>
</span><a name="line-1562"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1563"></a><span>  </span><a name="local-8214565720323790496"><span class="hs-identifier">compare</span></a><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">EQ</span><span>
</span><a name="line-1564"></a><span>  </span><span class="hs-identifier">compare</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>  </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">LT</span><span>
</span><a name="line-1565"></a><span>  </span><span class="hs-identifier">compare</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">GT</span><span>
</span><a name="line-1566"></a><span>  </span><span class="hs-identifier">compare</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214656"><a href="#local-6989586621680214656"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214657"><a href="#local-6989586621680214657"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214656"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">compare</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621680214657"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-1567"></a><span>
</span><a name="line-1568"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1569"></a><span>  </span><a name="local-8214565720324887700"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'&#8734;'</span><span>
</span><a name="line-1570"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214655"><a href="#local-6989586621680214655"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#int"><span class="hs-identifier hs-var">int</span></a><span> </span><a href="#local-6989586621680214655"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-1571"></a><span>
</span><a name="line-1572"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Num</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-1573"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323790403"><span class="hs-operator">+</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#plusWithInf"><span class="hs-identifier hs-var">plusWithInf</span></a><span>
</span><a name="line-1574"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323790402"><span class="hs-operator">*</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#mulWithInf"><span class="hs-identifier hs-var">mulWithInf</span></a><span>
</span><a name="line-1575"></a><span>
</span><a name="line-1576"></a><span>  </span><a name="local-8214565720323790401"><span class="hs-identifier">abs</span></a><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span>
</span><a name="line-1577"></a><span>  </span><span class="hs-identifier">abs</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214653"><a href="#local-6989586621680214653"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">abs</span><span> </span><a href="#local-6989586621680214653"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-1578"></a><span>
</span><a name="line-1579"></a><span>  </span><a name="local-8214565720323790400"><span class="hs-identifier">signum</span></a><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><span class="hs-number">1</span><span>
</span><a name="line-1580"></a><span>  </span><span class="hs-identifier">signum</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214654"><a href="#local-6989586621680214654"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">signum</span><span> </span><a href="#local-6989586621680214654"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-1581"></a><span>
</span><a name="line-1582"></a><span>  </span><a name="local-3458764513820541088"><span class="hs-identifier">fromInteger</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fromInteger</span><span>
</span><a name="line-1583"></a><span>
</span><a name="line-1584"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;subtracting IntWithInfs&quot;</span><span>
</span><a name="line-1585"></a><span>
</span><a name="line-1586"></a><span class="hs-identifier">intGtLimit</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-1587"></a><a name="intGtLimit"><a href="BasicTypes.html#intGtLimit"><span class="hs-identifier">intGtLimit</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-1588"></a><span class="hs-identifier">intGtLimit</span><span> </span><a name="local-6989586621680214798"><a href="#local-6989586621680214798"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214799"><a href="#local-6989586621680214799"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680214798"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span> </span><a href="#local-6989586621680214799"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-1589"></a><span>
</span><a name="line-1590"></a><span class="hs-comment">-- | Add two 'IntWithInf's</span><span>
</span><a name="line-1591"></a><span class="hs-identifier">plusWithInf</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span>
</span><a name="line-1592"></a><a name="plusWithInf"><a href="BasicTypes.html#plusWithInf"><span class="hs-identifier">plusWithInf</span></a></a><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-identifier">_</span><span>        </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span>
</span><a name="line-1593"></a><span class="hs-identifier">plusWithInf</span><span> </span><span class="hs-identifier">_</span><span>        </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span>
</span><a name="line-1594"></a><span class="hs-identifier">plusWithInf</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214800"><a href="#local-6989586621680214800"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214801"><a href="#local-6989586621680214801"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680214800"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">+</span><span> </span><a href="#local-6989586621680214801"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-1595"></a><span>
</span><a name="line-1596"></a><span class="hs-comment">-- | Multiply two 'IntWithInf's</span><span>
</span><a name="line-1597"></a><span class="hs-identifier">mulWithInf</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span>
</span><a name="line-1598"></a><a name="mulWithInf"><a href="BasicTypes.html#mulWithInf"><span class="hs-identifier">mulWithInf</span></a></a><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-identifier">_</span><span>        </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span>
</span><a name="line-1599"></a><span class="hs-identifier">mulWithInf</span><span> </span><span class="hs-identifier">_</span><span>        </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span>
</span><a name="line-1600"></a><span class="hs-identifier">mulWithInf</span><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214802"><a href="#local-6989586621680214802"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a name="local-6989586621680214803"><a href="#local-6989586621680214803"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621680214802"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">*</span><span> </span><a href="#local-6989586621680214803"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-1601"></a><span>
</span><a name="line-1602"></a><span class="hs-comment">-- | Turn a positive number into an 'IntWithInf', where 0 represents infinity</span><span>
</span><a name="line-1603"></a><span class="hs-identifier">treatZeroAsInf</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span>
</span><a name="line-1604"></a><a name="treatZeroAsInf"><a href="BasicTypes.html#treatZeroAsInf"><span class="hs-identifier">treatZeroAsInf</span></a></a><span> </span><span class="hs-number">0</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Infinity"><span class="hs-identifier hs-var">Infinity</span></a><span>
</span><a name="line-1605"></a><span class="hs-identifier">treatZeroAsInf</span><span> </span><a name="local-6989586621680214804"><a href="#local-6989586621680214804"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span> </span><a href="#local-6989586621680214804"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-1606"></a><span>
</span><a name="line-1607"></a><span class="hs-comment">-- | Inject any integer into an 'IntWithInf'</span><span>
</span><a name="line-1608"></a><span class="hs-identifier">mkIntWithInf</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#IntWithInf"><span class="hs-identifier hs-type">IntWithInf</span></a><span>
</span><a name="line-1609"></a><a name="mkIntWithInf"><a href="BasicTypes.html#mkIntWithInf"><span class="hs-identifier">mkIntWithInf</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BasicTypes.html#Int"><span class="hs-identifier hs-var">Int</span></a><span>
</span><a name="line-1610"></a><span>
</span><a name="line-1611"></a><span class="hs-keyword">data</span><span> </span><a name="SpliceExplicitFlag"><a href="BasicTypes.html#SpliceExplicitFlag"><span class="hs-identifier">SpliceExplicitFlag</span></a></a><span>
</span><a name="line-1612"></a><span>          </span><span class="hs-glyph">=</span><span> </span><a name="ExplicitSplice"><a href="BasicTypes.html#ExplicitSplice"><span class="hs-identifier">ExplicitSplice</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- ^ &lt;=&gt; $(f x y)</span><span>
</span><a name="line-1613"></a><span>            </span><a name="ImplicitSplice"><a href="BasicTypes.html#ImplicitSplice"><span class="hs-identifier">ImplicitSplice</span></a></a><span>   </span><span class="hs-comment">-- ^ &lt;=&gt; f x y,  i.e. a naked top level expression</span><span>
</span><a name="line-1614"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Data</span><span>
</span><a name="line-1615"></a></pre></body></html>