<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Applicative.Free.Final</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Control.Applicative.Free.Final.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">free-5.1.3: Monads for free</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(C) 2012-2013 Edward Kmett</td></tr><tr><th>License</th><td>BSD-style (see the file LICENSE)</td></tr><tr><th>Maintainer</th><td>Edward Kmett &lt;ekmett@gmail.com&gt;</td></tr><tr><th>Stability</th><td>provisional</td></tr><tr><th>Portability</th><td>GADTs, Rank2Types</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Applicative.Free.Final</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Examples</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Final encoding of free <code><a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> functors.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Ap">Ap</a> f a = <a href="#v:Ap">Ap</a> {<ul class="subs"><li><a href="#v:_runAp">_runAp</a> :: <span class="keyword">forall</span> g. <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> g =&gt; (<span class="keyword">forall</span> x. f x -&gt; g x) -&gt; g a</li></ul>}</li><li class="src short"><a href="#v:runAp">runAp</a> :: <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> g =&gt; (<span class="keyword">forall</span> x. f x -&gt; g x) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; g a</li><li class="src short"><a href="#v:runAp_">runAp_</a> :: <a href="../base-4.12.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; (<span class="keyword">forall</span> a. f a -&gt; m) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; m</li><li class="src short"><a href="#v:liftAp">liftAp</a> :: f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a</li><li class="src short"><a href="#v:hoistAp">hoistAp</a> :: (<span class="keyword">forall</span> a. f a -&gt; g a) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> g b</li><li class="src short"><a href="#v:retractAp">retractAp</a> :: <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; f a</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="doc"><p>Compared to the free monad, they are less expressive. However, they are also more
 flexible to inspect and interpret, as the number of ways in which
 the values can be nested is more limited.</p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Ap" class="def">Ap</a> f a <a href="src/Control.Applicative.Free.Final.html#Ap" class="link">Source</a> <a href="#t:Ap" class="selflink">#</a></p><div class="doc"><p>The free <code><a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> for a <code><a href="../base-4.12.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code> <code>f</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Ap" class="def">Ap</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:_runAp" class="def">_runAp</a> :: <span class="keyword">forall</span> g. <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> g =&gt; (<span class="keyword">forall</span> x. f x -&gt; g x) -&gt; g a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Ap" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Ap:Functor:1"></span> <a href="../base-4.12.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f)</span> <a href="src/Control.Applicative.Free.Final.html#line-61" class="link">Source</a> <a href="#t:Ap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Ap:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Applicative-Free-Final.html">Control.Applicative.Free.Final</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Ap:Applicative:2"></span> <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f)</span> <a href="src/Control.Applicative.Free.Final.html#line-67" class="link">Source</a> <a href="#t:Ap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Ap:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Applicative-Free-Final.html">Control.Applicative.Free.Final</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f (a -&gt; b) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Ap:Apply:3"></span> <a href="../semigroupoids-5.3.4/Data-Functor-Apply.html#t:Apply" title="Data.Functor.Apply">Apply</a> (<a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f)</span> <a href="src/Control.Applicative.Free.Final.html#line-64" class="link">Source</a> <a href="#t:Ap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Ap:Apply:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Applicative-Free-Final.html">Control.Applicative.Free.Final</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60-.-62-">(&lt;.&gt;)</a> :: <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f (a -&gt; b) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b <a href="#v:-60-.-62-" class="selflink">#</a></p><p class="src"><a href="#v:.-62-">(.&gt;)</a> :: <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b <a href="#v:.-62-" class="selflink">#</a></p><p class="src"><a href="#v:-60-.">(&lt;.)</a> :: <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a <a href="#v:-60-." class="selflink">#</a></p><p class="src"><a href="#v:liftF2">liftF2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f c <a href="#v:liftF2" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:runAp" class="def">runAp</a> :: <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> g =&gt; (<span class="keyword">forall</span> x. f x -&gt; g x) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; g a <a href="src/Control.Applicative.Free.Final.html#runAp" class="link">Source</a> <a href="#v:runAp" class="selflink">#</a></p><div class="doc"><p>Given a natural transformation from <code>f</code> to <code>g</code>, this gives a canonical monoidal natural transformation from <code><code><a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a></code> f</code> to <code>g</code>.</p><pre>runAp t == retractApp . hoistApp t</pre></div></div><div class="top"><p class="src"><a id="v:runAp_" class="def">runAp_</a> :: <a href="../base-4.12.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; (<span class="keyword">forall</span> a. f a -&gt; m) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; m <a href="src/Control.Applicative.Free.Final.html#runAp_" class="link">Source</a> <a href="#v:runAp_" class="selflink">#</a></p><div class="doc"><p>Perform a monoidal analysis over free applicative value.</p><p>Example:</p><pre>count :: Ap f a -&gt; Int
count = getSum . runAp_ (\_ -&gt; Sum 1)
</pre></div></div><div class="top"><p class="src"><a id="v:liftAp" class="def">liftAp</a> :: f a -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a <a href="src/Control.Applicative.Free.Final.html#liftAp" class="link">Source</a> <a href="#v:liftAp" class="selflink">#</a></p><div class="doc"><p>A version of <code>lift</code> that can be used with just a <code><a href="../base-4.12.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code> for <code>f</code>.</p></div></div><div class="top"><p class="src"><a id="v:hoistAp" class="def">hoistAp</a> :: (<span class="keyword">forall</span> a. f a -&gt; g a) -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f b -&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> g b <a href="src/Control.Applicative.Free.Final.html#hoistAp" class="link">Source</a> <a href="#v:hoistAp" class="selflink">#</a></p><div class="doc"><p>Given a natural transformation from <code>f</code> to <code>g</code> this gives a monoidal natural transformation from <code>Ap f</code> to <code>Ap g</code>.</p></div></div><div class="top"><p class="src"><a id="v:retractAp" class="def">retractAp</a> :: <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; <a href="Control-Applicative-Free-Final.html#t:Ap" title="Control.Applicative.Free.Final">Ap</a> f a -&gt; f a <a href="src/Control.Applicative.Free.Final.html#retractAp" class="link">Source</a> <a href="#v:retractAp" class="selflink">#</a></p><div class="doc"><p>Interprets the free applicative functor over f using the semantics for
   <code><a href="../base-4.12.0.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> and <code><a href="../base-4.12.0.0/Control-Applicative.html#v:-60--42--62-" title="Control.Applicative">&lt;*&gt;</a></code> given by the Applicative instance for f.</p><pre>retractApp == runAp id</pre></div></div><a href="#g:1" id="g:1"><h1>Examples</h1></a><div class="doc"><p><a href="examples/ValidationForm.hs">Validation form</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>